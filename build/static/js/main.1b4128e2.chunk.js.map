{"version":3,"sources":["img/logo.png","img/signupbg.png","Components/Posts/Prompt.js","Components/Common/HelpModal.js","Components/Auth/SignInModalDetails.js","Store/Actions/authActions.js","Components/Auth/SignInModal.js","Components/Auth/SignUpModalDetails.js","Components/Auth/SignUpModal.js","Store/Actions/postActions.js","Components/Posts/NewPostModal.js","Components/Layout/PromptsFeedHeader.js","Components/Layout/PromptsFeed.js","Components/Posts/StoryCard.js","Components/Layout/StoriesFeedHeader.js","Components/Layout/StoriesFeed.js","Components/Layout/Sidebar.js","Components/Profile/ProfilePostFeed.js","Components/Profile/UserProfile.js","Components/Layout/Footer.js","Components/Layout/Home.js","Components/Common/AccountDropdown.js","Components/Common/Notifications.js","Components/Auth/SignedInLinks.js","Components/Auth/SignedOutLinks.js","Components/Layout/Nav.js","Components/Posts/StoryComment.js","Components/Posts/Comments.js","Components/Posts/SubmitChapter.js","Components/Posts/StoryModalContent.js","Components/Posts/StoryModal.js","App.js","serviceWorker.js","Store/Reducers/authReducer.js","Store/Reducers/postReducer.js","Store/Reducers/rootReducer.js","Config/fbConfig.js","index.js"],"names":["module","exports","firebase","require","Prompt","props","state","likes","amountOfLikes","userLiked","photoURL","like","bind","delete","getAvatar","this","setState","postedTime","time","hoursLeft","Math","abs","Date","toDate","minutesLeft","tooltipTitle","title","style","background","border","color","round","getFirestore","collection","doc","id","i","length","uid","type","theme","size","key","auth","isEmpty","update","firestore","FieldValue","arrayUnion","displayName","set","postId","author","content","genre","likeCount","arrayRemove","where","get","then","querySnapshot","forEach","ref","message","warning","that","exists","undefined","data","console","log","catch","error","success","onConfirm","okText","cancelText","Meta","actions","onClick","renderHeart","deletePromptButton","avatar","src","icon","getTime","description","Component","connect","posts","ordered","HelpModal","showModal","visible","handleClose","e","next","previous","carousel","React","createRef","prev","onCancel","footer","node","dots","textAlign","SignInModalDetails","handleChange","target","value","handleSubmit","preventDefault","signIn","email","password","prevProps","prevState","authError","onSubmit","className","Item","onChange","prefix","placeholder","htmlType","dispatch","creds","credentials","getState","getFirebase","signInWithEmailAndPassword","window","location","reload","err","SignInModal","handleCancel","SignUpModalDetails","signUp","username","backgroundColor","height","xs","md","signupbg","alt","newUser","check","snapshot","createUserWithEmailAndPassword","resp","currentUser","updateProfile","user","add","sendEmailVerification","document","SignUpModal","NewPostModal","toString","remainingCharacters","handleSelectChange","handleRadioChange","numberOfChapters","validateForm","createPost","TextArea","Option","display","alignItems","marginRight","padding","for","marginBottom","rows","opacity","Group","buttonStyle","Button","showSearch","width","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","post","today","authorPic","createdAt","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","docRef","PromptsFeedHeader","align","flexDirection","marginTop","loggedIn","PromptsFeed","sort","loaded","handleSort","handleSortOrder","map","justifyContent","order","sortOrder","query","showArrow","defaultValue","getSortOrder","getPrompts","compose","firestoreConnect","getAll","sortBy","orderBy","StoryCard","increment","diffMins","current","currentChapter","created","now","chapter2","chapter3","chapter4","final","text","onCopy","hoverable","to","pathname","yposition","complete","getTimeLeft","StoriesFeedHeader","Step","StoriesFeed","listenToScroll","scrollY","stories","addEventListener","removeEventListener","scrollTo","y","top","behavior","prompt","chapters","chapter1","getStories","Sidebar","mobile","updateWidth","innerWidth","SubMenu","handleClick","position","overflowY","overflowX","paddingTop","left","zIndex","openKeys","defaultOpenKeys","forceSubMenuRender","selectedKeys","mode","styles","IconStyle","fontSize","ProfilePostFeed","getPosts","subcollections","storeAs","UserProfile","fileSelectedHandler","event","fileUploadHandler","files","file","userName","uploadTask","storage","put","on","progress","bytesTransferred","totalBytes","TaskState","PAUSED","RUNNING","getDownloadURL","downloadURL","selected","shape","marginLeft","margin","visibility","showRelevantFeed","Footer","Home","getQuery","getScrollPosition","hasOwnProperty","substr","condition","slice","isOwnProfile","xl","updateQuery","offset","AccountDropdown","menu","signOut","overlay","trigger","Notifications","toggleMenu","closeMenu","newNotifs","resetNotifs","notifications","menuItems","push","minHeight","minWidth","notification","date","Divider","maxHeight","posted","diffMin","getNotifications","onVisibleChange","count","limit","SignedInLinks","SignedOutLinks","links","logo","StoryComment","expanded","deleteSubmission","expandComment","getLikeAmount","diff","hours","paddingRight","overflow","isOwnSubmission","comment","expandStyle","cursor","datetime","Comments","submissions","getSubmissions","updateSort","updateSortOrder","header","getCommentSort","itemLayout","dataSource","renderItem","item","locale","emptyText","renderSortArrow","subs","getComments","chapter","SubmitChapter","closePanel","submitChapter","autosize","minRows","maxRows","submission","StoryModalContent","selectedChapter","submissionsLoaded","userSubmitted","timeLeft","updateCommentSort","updateCommentSortOrder","openSubmitPanel","closeSubmitPanel","hasUserSubmitted","selectedChapters","radio","paddingBottom","paddingLeft","enabled","disabled","status","getEnabledRadios","getDisabledRadios","equalAmountOfLikes","a","b","endSubmissionProcess","panelOpen","getTopSubmission","topSubmission","href","renderSubmitHeader","renderChapterRadios","StoryModal","goBack","storyId","split","pop","history","referrer","substring","App","exact","path","render","component","Boolean","hostname","match","initState","authReducer","action","postReducer","rootReducer","combineReducers","firestoreReducer","firebaseReducer","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","settings","timestampsInSnapshots","store","createStore","applyMiddleware","thunk","withExtraArgument","reduxFirestore","fbConfig","reactReduxFirebase","attachAuthIsReady","firebaseAuthIsReady","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1b4128e2.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/signupbg.1cd6d96c.png\";","import React, { Component } from 'react';\nimport { Card, Icon, Avatar, Tag, Popover, Tooltip, message, Popconfirm } from 'antd';\nimport '../../App.css'\nimport { connect } from 'react-redux'\nimport { getFirestore } from \"redux-firestore\";\nvar firebase = require('firebase');\n\nclass Prompt extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            photoURL: null\n        }\n        this.like = this.like.bind(this)\n        this.delete = this.delete.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState({\n            amountOfLikes: this.props.amountOfLikes\n        })\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    getTime(){\n        var postedTime = this.props.time\n        if(postedTime){\n\n            var diffHours = Math.abs(new Date() - postedTime.toDate()) / 36e5;\n            var hoursLeft = 48 - diffHours\n            var minutesLeft = hoursLeft * 60\n            const tooltipTitle = \"The time left until this prompt possibly becomes a story\"\n\n            if(hoursLeft > 12){\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Tag style={{\n                            background: 'none',\n                            border: '1px solid rgb(135, 232, 222, 0.5)',\n                            color: '#87e8de'\n                        }}>\n                            {Math.round(hoursLeft) + 'h Left'}\n                        </Tag>\n                    </Tooltip>\n                )\n            }else if(hoursLeft > 4){\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Tag style={{\n                            background: 'none',\n                            border: '1px solid rgb(135, 232, 222, 0.5)',\n                            color: '#87e8de'\n                        }}>\n                            {Math.round(hoursLeft) + 'h Left'}\n                        </Tag>\n                    </Tooltip>\n                )\n            }else if(hoursLeft > 1){\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Tag style={{\n                            background: 'none',\n                            border: '1px solid rgb(135, 232, 222, 0.5)',\n                            color: '#87e8de'\n                        }}>\n                            {Math.round(hoursLeft) + 'h Left'}\n                        </Tag>\n                    </Tooltip>\n                )\n            }else if(hoursLeft > 0) {\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Tag color=\"#cf1322\">{60 - Math.round(minutesLeft) + 'min Left'}</Tag>\n                    </Tooltip>\n                )\n            }else if(minutesLeft <= 0){\n                //Delete prompt after time runs out\n                getFirestore().collection('posts').doc(this.props.id).delete()\n            }\n        }\n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i].uid == this.props.uid){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <Icon \n                    type=\"heart\"\n                    theme=\"filled\"\n                    size=\"large\"\n                    key=\"heart\" \n                    style={{ color:'#ff7a45' }}\n                />\n            )\n        }else{\n            return(\n                <Icon \n                    type=\"heart\" \n                    key=\"heart\" \n                    style={{ color:'white' }}\n                />\n            )\n        }\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked == false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('posts').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    )\n                })\n                getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').doc().set({\n                    type: 'prompt',\n                    postId: this.props.id,\n                    author: this.props.author,\n                    content: this.props.content,\n                    genre: this.props.genre,\n                    title: this.props.title,\n                    time: this.props.time,\n                    likes: this.props.likes,\n                    likeCount: this.state.amountOfLikes\n                })\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('posts').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    )\n                })\n                // Delete post from users 'liked' collection\n                var delete_query = getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').where('postId','==',this.props.id)\n                delete_query.get().then(function(querySnapshot){\n                    querySnapshot.forEach(function(doc){\n                        doc.ref.delete();\n                    })\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n        }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n        });\n    }\n\n    delete(){\n        getFirestore().collection('posts').doc(this.props.id).delete().then(function() {\n            message.success('Prompt deleted')\n        }).catch(function(error) {\n            message.error('Prompt could not be deleted. Try again.')\n        });\n    }\n\n    deletePromptButton(){\n        if(!this.props.auth.isEmpty){\n            if(this.props.auth.displayName === this.props.author){\n                return(\n                    <Tooltip title=\"Delete prompt\">\n                        <Popconfirm\n                            title=\"Are you sure delete this prompt?\"\n                            onConfirm={this.delete}\n                            okText=\"Yes\"\n                            cancelText=\"No\"\n                        >\n                            <button id=\"cardActionBtn\">\n                                <Icon type=\"delete\" key=\"delete\"/>\n                            </button>\n                        </Popconfirm>\n                    </Tooltip>\n                )\n            }else{\n                return(\n                    <Tooltip title=\"Report this prompt\">\n                        <button id=\"cardActionBtn\">\n                            <Icon type=\"warning\" key=\"warning\" />\n                        </button>\n                    </Tooltip>\n                )    \n            }\n        }else{\n            return(\n                <Tooltip title=\"Report this prompt\">\n                    <button id=\"cardActionBtn\">\n                        <Icon type=\"warning\" key=\"warning\" />\n                    </button>\n                </Tooltip>\n            )\n        }\n    }\n\n    render() { \n        const { Meta } = Card;\n        return (\n            <Card\n                actions={[\n                    <button id=\"cardActionBtn\" onClick= {this.like}>\n                        {this.renderHeart()}\n                        <span id=\"likes\">\n                            {this.state.amountOfLikes}\n                        </span>\n                    </button>,\n                    <button id=\"cardActionBtn\">\n                        <Icon type=\"book\" key=\"book\" />\n                    </button>,\n                    this.deletePromptButton()\n                ]}\n            >\n                <Meta\n                    avatar={\n                        <span>\n                            <Popover content={this.props.author} title=\"\">\n                                {this.state.photoURL !== null ?\n                                    <Avatar src={this.state.photoURL}/>:\n                                    <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                            }\n                            </Popover>\n                        </span>\n                    }\n                    title = {\n                        <span id=\"title-container\">\n                            <span id=\"card-title\">{this.props.title}</span>\n                            <Tag style={{\n                                background: 'none',\n                                border: '1px solid rgb(135, 232, 222, 0.5)',\n                                color: '#87e8de'\n                            }}>Prompt</Tag>\n                            {this.getTime()}\n                        </span>\n                    }\n                    description =  { \n                        <div>\n                            <small>{ this.props.genre }</small>\n                            <br></br><br></br>\n                            <span id=\"card-content\">{ this.props.content }</span>\n                            <br></br>\n                        </div>\n                    }\n                />\n            </Card>\n\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\n\nexport default connect(mapStateToProps)(Prompt);","import React, { Component } from 'react'\nimport { Modal, Button, Carousel, Icon } from 'antd';\nimport '../../App.css'\n\nclass HelpModal extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: false\n        }\n        this.showModal = this.showModal.bind(this)\n        this.handleClose = this.handleClose.bind(this)\n        this.next = this.next.bind(this);\n        this.previous = this.previous.bind(this);\n        this.carousel = React.createRef();\n    }\n\n    showModal = () => {\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleClose = e => {\n        console.log(e)\n        this.setState({\n            visible: false\n        })\n    }\n\n    next() {\n        this.carousel.next();\n    }\n\n    previous() {\n        this.carousel.prev();\n    }\n\n    render() {\n        return (\n            <div>\n                <Button onClick={this.showModal}>\n                    <Icon type=\"question\"/>\n                </Button>\n                <Modal\n                    title=\"How CoAuthor works\"\n                    visible={this.state.visible}\n                    onCancel={this.handleClose}\n                    footer={null}\n                >\n                <Carousel \n                    ref={node => (this.carousel = node)}\n                    dots={false}\n                >\n                    <div>\n                        <h1>\n                            Step 1\n                        </h1>\n                        <p>Prompts are posted and voted on by users</p>\n                    </div>\n                    <div>\n                        <h1>\n                            Step 2\n                        </h1>\n                        <p>The highest ranked prompts become stories</p>\n                    </div>\n                    <div>\n                        <h1>    \n                            Step 3\n                        </h1>\n                        <p>Users submit written chapters for these stories. The highest ranked submission\n                            is chosen as that chapter. Then, the next chapter submission process begins until the story\n                            is complete.\n                        </p>\n                    </div>\n\n                </Carousel>\n                <div style={{ textAlign: \"center\" }}>\n                    <Button onClick={this.previous}>\n                        <Icon type=\"left\"/>\n                        Prev\n                    </Button>\n                    <Button onClick={this.next}>\n                        <Icon type=\"right\"/>\n                        Next\n                    </Button>\n                </div>\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default HelpModal;","import React, { Component } from 'react'\nimport { Form, Icon, Input, Button,  Select, message } from 'antd';\nimport { connect } from 'react-redux';\nimport { signIn } from '../../Store/Actions/authActions'\nimport logo from '../../img/logo.png'\nimport '../../App.css'\nimport { ninvoke } from 'q';\n\nclass SignInModalDetails extends Component {\n  \n    constructor() {\n        super();\n        this.state = {\n            email: '',\n            password: '',\n            error: null\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.authError !== this.props.authError){\n            this.setState({\n                error: this.props.authError\n            })\n        }\n        if(prevState.error !== this.state.error && this.state.error !== null){\n            message.error(this.state.error)\n            this.setState({\n                error: null\n            })\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.signIn(this.state);\n    }\n\n    render() {\n        return (\n            <div>\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                <h3>LOGIN</h3>\n                <Form.Item>\n                    <Input\n                        id=\"email\"\n                        onChange={this.handleChange} \n                        prefix={<Icon type=\"user\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                        placeholder=\"Username\"\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Input\n                        id=\"password\"\n                        onChange={this.handleChange} \n                        prefix={<Icon type=\"lock\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                        type=\"password\"\n                        placeholder=\"Password\"\n                    />\n                </Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\">    \n                    <Icon type=\"plus\"/>\n                    Login\n                </Button>\n            </Form>\n            </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        authError: state.auth.authError\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signIn: (creds) => dispatch(signIn(creds))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInModalDetails)","import { firestore } from \"firebase\";\nimport { responsiveArray } from \"antd/lib/_util/responsiveObserve\";\nimport { getFirestore } from \"redux-firestore\";\nimport { relativeTimeRounding } from \"moment\";\nimport { notification, message } from 'antd'\n\nexport const signIn = (credentials) => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n\n        firebase.auth().signInWithEmailAndPassword(\n            credentials.email,\n            credentials.password\n        ).then(() => {\n            dispatch({ type: 'LOGIN_SUCCESS'});\n            window.location.reload();\n            message.success('Logged In Successfully')\n        }).catch((err) => {\n            dispatch({ type: 'LOGIN_ERROR', err });\n        })\n    }\n} \n\nexport const signOut = () => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n        firebase.auth().signOut().then(() => {\n            dispatch({ type: 'SIGNOUT_SUCCESS' });\n            window.location.reload();\n            message.success('Signed Out Successfully')\n        })\n    }\n}\n\nexport const signUp = (newUser) => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n        const firestore = getFirestore();\n       \n        let check = false;\n        let usersRef = firestore.collection('users');\n        let query = usersRef.get(\n        ).then(snapshot => {\n            snapshot.forEach(doc => {\n                //console.log(doc.id, '=>', doc.data());\n                if (doc.id == newUser.username) { check = true; console.log('fuck')}\n            });\n            if (check == false) {\n\n                firebase.auth().createUserWithEmailAndPassword(\n                    newUser.email,\n                    newUser.password,\n                ).then((resp) => {\n                    firebase.auth().currentUser.updateProfile({\n                    displayName: newUser.username,\n                    });\n                    return (\n                        firestore.collection('users').doc(newUser.username).set({\n                            uid: resp.user.uid\n                        }),\n                        firestore.collection('users').doc(newUser.username).collection('liked').doc().add({\n                            type: 'inital',\n                            postId: 'initial'\n                        }),\n                        firebase.auth().currentUser.sendEmailVerification().then(function() {\n                            //email sent, look for emailVerified \n                        }).catch(function(err) {\n                            //error\n                        })\n                    )\n                }).then(() => {\n                    dispatch({ type: 'SIGNUP_SUCCESS'})\n                    window.document.reload()\n                }).catch(err => {\n                    dispatch({ type: 'SIGNUP_ERROR', err})\n                })\n            } else {\n                dispatch({ type: 'NAME_TAKEN'})\n            }\n        })\n\n    }\n}","import React from 'react';\nimport SignInModalDetails from '../Auth/SignInModalDetails'\nimport { Button, Modal, Icon } from 'antd';\nimport '../../App.css'\n\nclass SignInModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            visible: false\n        }\n        this.showModal = this.showModal.bind(this)\n        this.handleCancel = this.handleCancel.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Button onClick={this.showModal}>\n                    <Icon type=\"user\"/>    \n                    Login\n                </Button>\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    className=\"login-form-modal\"\n                >\n                    <SignInModalDetails/>   \n                </Modal>\n            </div>\n    );\n  }\n}\n\nexport default SignInModal","import React, { Component } from 'react'\nimport { Form, Icon, Input, Button,  Row, Col } from 'antd';\nimport { connect } from 'react-redux';\nimport { signUp } from '../../Store/Actions/authActions'\nimport signupbg from '../../img/signupbg.png'\nimport '../../App.css'\n\nclass SignUpModalDetails extends Component {\n  \n    constructor() {\n        super();\n        this.state = {\n            email: '',\n            password: '',\n            username: ''\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.signUp(this.state);\n    }\n\n    render() {\n        const { authError } = this.props\n        return (\n            <Row style= {{ backgroundColor: '#1a1a1a', height: '100%'}}>\n\n                <Col xs={24} md={12} className=\"left-side-signup\">\n\n                    <h1>Start Writing.</h1>\n\n                    <div className=\"signup-form\">\n                        <Form onSubmit={this.handleSubmit}>\n                            <Form.Item>\n                                <Input\n                                    id=\"username\"\n                                    onChange={this.handleChange} \n                                    placeholder=\"Username\"\n                                />\n                            </Form.Item>\n\n                            <Form.Item>\n                                <Input\n                                    id=\"email\"\n                                    onChange={this.handleChange} \n                                    placeholder=\"Email\"\n                                />\n                            </Form.Item>\n\n                            <Form.Item>\n                                <Input\n                                    id=\"password\"\n                                    onChange={this.handleChange} \n                                    placeholder=\"Password\"\n                                />\n                            </Form.Item>\n\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"sign-up-submit\">    \n                                Join\n                            </Button>\n                            \n                            <div className=\"red-text center\">\n                                { authError ? <p>{authError}</p> : null }\n                            </div>\n\n                        </Form>\n                    </div>\n                </Col>\n\n                <Col xs={0} md={12}>\n                    <div className=\"join-bg\">\n                        <img src={signupbg} alt=\"bg\" />\n                    </div>\n                </Col>\n                \n\n            </Row>\n            \n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        authError: state.auth.authError\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signUp: (creds) => dispatch(signUp(creds))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpModalDetails)","import React from 'react';\nimport SignUpModalDetails from '../Auth/SignUpModalDetails'\nimport { Modal, Button, Icon } from 'antd';\n\nclass SignUpModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: false\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Button \n                    onClick={this.showModal}\n                    type=\"primary\"\n                >\n                    <Icon type=\"user\"/>    \n                    Join\n                </Button>\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    className={'sign-up-modal'}\n                >\n                <SignUpModalDetails/>\n                </Modal>\n            </div>\n    );\n  }\n}\n\nexport default SignUpModal","import { getFirestore } from \"redux-firestore\";\nimport * as firebase from \"firebase\";\nimport 'firebase/firestore'\nimport { message } from 'antd'\n\nexport const createPost = (post) => {\n    return (dispatch, getState, { getFirebase, getFirestore }) => {\n        // make async call to db\n        const firestore = getFirestore()\n        console.log(post)\n        var today = new Date();\n        firestore.collection('posts').add({ \n            ...post,\n            author: getFirebase().auth().currentUser.displayName,\n            authorPic: getFirebase().auth().currentUser.photoURL,\n            createdAt: new Date(),\n            time: today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()+' - '+today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds(),\n        }).then(function(docRef) { //setting an initial like from the user\n            firestore.collection('posts').doc(docRef.id).collection('likes').doc(getFirebase().auth().currentUser.displayName).set({\n                uid: getFirebase().auth().currentUser.uid\n            })\n        }).then(() => {\n            dispatch({ type: 'CREATE_POST', post})\n        }).catch((err) => {\n            dispatch({ type: 'CREATE_PROJECT_ERROR', err })\n        })\n        message.success('Your prompt has been posted!')\n    } \n}\n\nexport const submitChapter = (submission) => {\n    return (dispatch, getState, { getFirebase, getFirestore }) => {\n        const firestore = getFirestore()\n        firestore.collection('stories').doc(submission.postId).collection('submissions').doc().set({\n            ...submission,\n            likes: [],\n            likeCount: 0,\n            author: getFirebase().auth().currentUser.displayName,\n            time: new Date()\n        })\n        message.success('Your chapter has been submitted!')\n        .then(() => {\n            dispatch({ type: 'SUBMIT_CHAPTER', submission})\n        }).catch((err) => {\n            dispatch({ type: 'SUBMIT_CHAPTER_ERROR', err })\n        })\n    }\n}\n","import React from 'react';\nimport { Button, Modal, Icon, Form, Input, Select, message, Radio } from 'antd';\nimport { connect } from 'react-redux'\nimport { createPost } from '../../Store/Actions/postActions'\nimport { FaPlus } from 'react-icons/fa'\n\nclass NewPostModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            title: '',\n            content: '',\n            genre: '',\n            likes: [],\n            visible: false,\n            remainingCharacters: 500,\n            numberOfChapters: null\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    handleChange = (e) => {\n        if(e.target.id === 'content'){\n            var content = e.target.value.toString()\n            this.setState({\n                remainingCharacters: 500 - content.length\n            })\n        }\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSelectChange = (e) => {\n        this.setState({\n            genre: e\n        })\n    }\n\n    handleRadioChange = (e) => {\n        this.setState({\n            numberOfChapters: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        console.log(this.state);\n        this.validateForm(this.state)\n    }\n\n    validateForm(state){\n        if(state.title.length < 4 || state.content.length < 10){\n            return message.error('Title or content length is too short.')\n        }else if(state.genre.length === 0){\n            return message.error('Please select a category.')\n        }else if(state.numberOfChapters === null){\n            return message.error('Please select amount of chapters')\n        }else if(state.remainingCharacters < 0){\n            return message.error('Content is too long.')\n        }else{\n            this.props.createPost(state)\n            this.handleCancel()\n        }\n    }\n\n    render() {\n        const { auth } = this.props;\n        //if (!auth.uid) return <redirect to= '/signin'/> //Use for actions that the user cant complete unless they are signed in\n        const { TextArea } = Input;\n        const { Option } = Select;\n        return (\n            <div>\n                <Button \n                    onClick={this.showModal}\n                    type=\"primary\"\n                >\n                    <div style={{ display: 'flex', alignItems: 'center'}}>\n                        <FaPlus style={{ marginRight: '5px' }}/>\n                        {this.props.title}\n                    </div>\n\n                </Button>\n                <Modal\n                    className=\"post-modal\"\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                >\n\n                {/* **** MODAL DETAILS (FORM) ****/}\n                <div className=\"post-modal-form\" style={{ padding: '24px'}}>\n                    <h2>New Prompt</h2>\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                        <Form.Item>\n                            <label for=\"title\">\n                                <small>Title</small>\n                            </label>\n                            <Input\n                                id=\"title\"\n                                onChange={this.handleChange} \n                            />\n                        </Form.Item>\n                        <Form.Item style={{ marginBottom: 0 }}>\n                            <label for=\"content\">\n                                <small>Content</small>\n                            </label>\n                            <TextArea\n                                id=\"content\" \n                                onChange={this.handleChange}\n                                rows={5}\n                            />\n                        </Form.Item>\n                        <span \n                            style={\n                                this.state.remainingCharacters < 0 ? \n                                    { color: '#fa541c', opacity: 0.5} : \n                                    { opacity: 0.5 }\n                            }\n                        >\n                            <small>{this.state.remainingCharacters} characters left</small>\n                        </span>\n                        <br></br><br></br>\n                        <Form.Item>\n                            <small>Number of chapters</small><br></br>\n                            <Radio.Group buttonStyle=\"solid\" onChange={this.handleRadioChange}>\n                                <Radio.Button value={2}>2</Radio.Button>\n                                <Radio.Button value={3}>3</Radio.Button>\n                                <Radio.Button value={4}>4</Radio.Button>\n                            </Radio.Group>\n                        </Form.Item>\n                        <Form.Item>\n                            <Select\n                                showSearch\n                                style={{ width: 200 }}\n                                placeholder=\"Category\"\n                                onChange={this.handleSelectChange}\n                                optionFilterProp=\"children\"\n                                filterOption={(input, option) =>\n                                    option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                }\n                            >\n                                <Option value=\"Comedy\">Comedy</Option>\n                                <Option value=\"Horror\">Horror</Option>\n                                <Option value=\"Fantasy\">Fantasy</Option>\n                                <Option value=\"Romance\">Romance</Option>\n                                <Option value=\"SciFi\">Sci-Fi</Option>\n                            </Select>\n                        </Form.Item>\n                        <Button type=\"primary\" htmlType=\"submit\">    \n                            <Icon type=\"plus\"/>\n                            Post Prompt\n                        </Button>\n                    </Form>\n                </div>\n                </Modal>\n            </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        createPost: (post) => dispatch(createPost(post))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPostModal)","import React, { Component } from 'react'\nimport { Row, Col } from 'antd'\nimport HelpModal from '../Common/HelpModal'\nimport SignInModal from '../Auth/SignInModal'\nimport SignUpModal from '../Auth/SignUpModal'\nimport NewPostModal from '../Posts/NewPostModal'\n\nclass PromptsFeedHeader extends Component {\n    render() {\n        return (\n            <Row type=\"flex\" align=\"middle\" id=\"feed-header-container\">\n                <Col md={10}>\n                    <div id=\"feed-header-text\">\n                        <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', marginBottom: '10px'}}>\n                            <h1 style={{ marginRight: '10px', marginBottom: 0}}>PROMPTS</h1>\n                            <HelpModal/>\n                        </div>\n                        <h4 style={{ opacity: 0.8, marginTop: '14px' }}>Story ideas created and voted on by users.</h4>\n                    </div>\n                    <div style={{ display: 'flex', flexDirection: 'row '}}>\n                        {this.props.loggedIn ? \n                            <NewPostModal title=\"New Prompt\" />   \n                            :\n                            <div style={{ display: 'flex', flexDirection: 'row'}}>\n                                <span style={{ marginRight: '14px' }}><SignInModal/></span>\n                                <SignUpModal/>\n                            </div>\n                        }\n                    </div>\n                </Col>\n                <Col md={14} style={{height: '100%'}}>\n                </Col>\n            </Row>\n        );\n    }\n}\n\nexport default PromptsFeedHeader;","import React, { Component } from 'react';\nimport Prompt from '../Posts/Prompt'\nimport { Row, Col, Select, Breadcrumb, Icon, Spin, Button } from 'antd';\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport PromptsFeedHeader from '../Layout/PromptsFeedHeader'\nimport '../../App.css'\nimport NewPostModal from '../Posts/NewPostModal';\n\nclass PromptsFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            sort: \"new\",\n            loaded: false\n        }\n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    handleSort(value){\n        return this.props.sort(value)\n    }\n\n    componentDidMount(){\n        if(!this.props.posts){\n            this.setState({\n                loaded: false\n            })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.posts !== this.props.posts){\n            this.setState({\n                loaded: true\n            })\n        }\n    }\n\n    getPrompts(){\n        const { posts } = this.props;\n        if(this.state.loaded){\n            if(this.props.posts.length > 0){\n                return(\n                    posts.map((post,i) =>\n                            <Col id=\"prompt\">\n                                <Prompt \n                                    key={post.id} \n                                    id={post.id} \n                                    title={post.title} \n                                    genre={post.genre}\n                                    content={post.content}\n                                    author={post.author}\n                                    authorPic={post.authorPic ? post.authorPic : null}\n                                    time={post.createdAt}\n                                    likes={post.likes}\n                                    amountOfLikes={post.likes.length}\n                                />\n                            </Col> \n                    )\n                )\n            }else{\n                return(\n                    <div style={{ height: '400px', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n                        <p style={{ textAlign: 'center' }}>\n                            No prompts found :( <br></br><br></br>\n                            {this.props.auth.isEmpty ? '' : <NewPostModal title='Post your own prompt!'/>}\n                        </p>\n                    </div>\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '100px', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n    getSortOrder(){\n        var order = this.props.order\n        if(order === 'desc'){\n            return <Button onClick={this.handleSortOrder}><Icon type=\"down\"/></Button>\n        }else{\n            return <Button onClick={this.handleSortOrder}><Icon type=\"up\"/></Button>\n        }\n    }\n\n    handleSortOrder(){\n        return this.props.sortOrder()\n    }\n\n    render() {\n        const { Option } = Select;\n        return (\n            <div>\n                <Row>\n                    <PromptsFeedHeader loggedIn={this.props.auth.isEmpty ? false : true}/>\n                    <div id=\"feed-header\">\n                        <div id=\"breadcrumb-container\">\n                            <Breadcrumb>\n                                <Breadcrumb.Item>\n                                    Prompts\n                                </Breadcrumb.Item>\n                                <Breadcrumb.Item>\n                                    {this.props.query}\n                                </Breadcrumb.Item>\n                            </Breadcrumb>\n                        </div>\n                        <div>\n                            <Select showArrow={false} defaultValue=\"createdAt\" style={{ width: 100 }} onChange={this.handleSort}>\n                                <Option value=\"createdAt\">\n                                    {/* <Icon type=\"bulb\"/> */}\n                                    New\n                                </Option>\n                                <Option value=\"Hot\">\n                                    {/* <Icon type=\"fire\"/> */}\n                                    Hot\n                                </Option>\n                                <Option value=\"author\">\n                                    {/* <Icon type=\"arrow-up\"/> */}\n                                    Author\n                                </Option>\n                            </Select>\n                        </div>\n                        {this.getSortOrder()}\n                    </div>\n                    <div>\n                        {this.getPrompts()}\n                    </div>\n                </Row>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n\n        const { getAll, query, sortBy, order } = props\n\n        if(getAll == true){\n            return [\n                { collection: 'posts',\n                  orderBy: [sortBy, order]\n                }\n            ]\n        }else{\n            return [{ \n                collection: 'posts', \n                orderBy: [sortBy, order],\n                where: [\"genre\", \"==\", query] \n            }]\n        }\n\n    })\n)(PromptsFeed)","import React, { Component } from 'react'\nimport { Card, Icon, Avatar, Tag, Popover, Tooltip, message } from 'antd';\nimport { Link } from 'react-router-dom'\nimport { getFirestore } from \"redux-firestore\";\nimport CopyToClipboard from 'react-copy-to-clipboard'\nimport '../../App.css'\nvar firebase = require('firebase');\n\nclass StoryCard extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            photoURL: null\n        }\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState({\n            amountOfLikes: this.props.likes.length\n        })\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked === false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n                getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').doc().set({\n                    type: 'story',\n                    postId: this.props.id,\n                    author: this.props.author,\n                    content: this.props.content,\n                    genre: this.props.genre,\n                    title: this.props.title,\n                    likes: this.props.likes,\n                    createdAt: this.props.createdAt\n                })\n                message.success('Story liked!')\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n                // Delete post from users 'liked' collection\n                var delete_query = getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').where('postId','==',this.props.id)\n                delete_query.get().then(function(querySnapshot){\n                    querySnapshot.forEach(function(doc){\n                        doc.ref.delete();\n                    })\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i].uid === this.props.auth.uid){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <span className=\"heart-filled\">\n                    <Icon \n                        type=\"heart\"\n                        theme=\"filled\"\n                        size=\"large\"\n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }else{\n            return(\n                <span className=\"heart\">\n                    <Icon\n                        type=\"heart\" \n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }\n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n        }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n        });\n    }\n\n    getTimeLeft(){\n        var current = this.props.currentChapter\n        var created = this.props.createdAt.toDate()\n        var diffMins\n        var now = new Date()\n        var chapter2 = new Date(created.getTime() + 3*60000);\n        var chapter3 = new Date(chapter2.getTime() + 3*60000);\n        var chapter4 = new Date(chapter3.getTime() + 3*60000);\n        var final = new Date(chapter4.getTime() + 3*60000);\n\n        switch(current) {\n            case 1:\n                diffMins = (chapter2 - now) / 60000;\n                break;\n            case 2:\n                diffMins = (chapter3 - now) / 60000;\n                break;\n            case 3:\n                diffMins = (chapter4 - now) / 60000;\n                break;\n            case 4:\n                diffMins = (final - now) / 60000;\n                break;    \n            default:\n                break;\n        }\n\n        if(diffMins > 60){\n            return(\n                <Tooltip title=\"Hours left until chapter selection\">\n                    <Tag style={{\n                        background: 'none',\n                        border: '1px solid rgb(135, 232, 222, 0.5)',\n                        color: '#87e8de'\n                    }}>\n                        <span style={{ display: 'flex', alignItems: 'center'}}>\n                            <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                            {Math.round(diffMins * 60) + 'h '}\n                        </span>\n                    </Tag>\n                </Tooltip>\n            )\n        }else if(diffMins > 0) {\n            return(\n                <Tooltip title=\"Minutes left until chapter selection\">\n                    <Tag style={{\n                        background: 'none',\n                        border: '1px solid rgb(135, 232, 222, 0.5)',\n                        color: '#87e8de'\n                    }}>\n                        <span style={{ display: 'flex', alignItems: 'center'}}>\n                            <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                            {Math.round(diffMins) + ' min'}\n                        </span>\n                    </Tag>\n                </Tooltip>\n            )\n        }\n    }\n\n    render() {\n        const { Meta } = Card;\n        return (\n                <Card\n                    actions={[     \n                        \n                        <Tooltip title=\"Like story\">\n                            <button id=\"cardActionBtn\" onClick={this.like}>\n                                <span className=\"heart-hover\">\n                                    {this.renderHeart()}\n                                </span>\n                            </button>\n                        </Tooltip>,\n\n                        <Tooltip title=\"Share story\">\n                            <CopyToClipboard text={'cowrite.io/story/' + this.props.id}\n                                onCopy={() => message.success('Link copied to clipboard')}\n                            >\n                                <button id=\"cardActionBtn\">\n                                    <Icon type=\"share-alt\"/>\n                                </button>\n                            </CopyToClipboard>\n                        </Tooltip>,\n\n                        <Tooltip title={this.props.author}>\n                            <button id=\"cardActionBtn\">\n                                <Icon type=\"user\"/>\n                            </button>\n                        </Tooltip>,\n\n                        <Tooltip title=\"Report this prompt\">\n                            <button id=\"cardActionBtn\">\n                                <Icon type=\"warning\" key=\"warning\" />\n                            </button>\n                        </Tooltip>\n                    ]}\n                    hoverable={true}\n                >\n                    <Link to={{ pathname: '/story/' + this.props.id, \n                        state: { \n                            id: this.props.id,\n                            auth: this.props.auth,\n                            yposition: this.props.yposition,\n                            query: this.props.query\n                        } \n                    }}>\n                    <Meta\n                        avatar={\n                            <span>\n                                <Popover content={this.props.author} title=\"\">\n                                    {this.state.photoURL !== null ?\n                                        <Avatar src={this.state.photoURL}/> :\n                                        <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                                }\n                                </Popover>\n                            </span>\n                        }\n                        title = {\n                            <span id=\"title-container\">\n                                <span id=\"card-title\">{this.props.title}</span>\n\n                                <Tag style={{\n                                    background: 'none',\n                                    border: '1px solid rgb(135, 232, 222, 0.5)',\n                                    color: '#87e8de'\n                                }}>\n                                    {this.props.complete ? \n                                        'COMPLETE'\n                                    :\n                                        this.props.currentChapter !== this.props.numberOfChapters ?\n                                            <Tooltip title=\"Current chapter\">\n                                                <span style={{ display: 'flex', alignItems: 'center'}}>\n                                                    <Icon type=\"book\" style={{ marginRight: '4px' }}/>\n                                                    {this.props.currentChapter +  '/' + this.props.numberOfChapters}\n                                                </span>\n                                            </Tooltip> \n                                        :\n                                            'FINAL CHAPTER'\n                                    }\n                                </Tag>\n\n                                {this.getTimeLeft()}\n                            </span>\n                        }\n                        description =  { \n                            <div>\n                                \n                                <small>\n                                    {this.props.genre}\n                                </small>\n                                <br></br><br></br>\n                                <span id=\"card-content\">{this.props.content}</span>\n                                <br></br>\n                            </div>\n                        }\n                    />\n                    </Link>\n                </Card>\n            )\n    }\n}\n\nexport default StoryCard;\n","import React, { Component } from 'react'\nimport { Row, Col, Steps } from 'antd'\nimport HelpModal from '../Common/HelpModal'\n\nclass StoriesFeedHeader extends Component {\n    render() {\n        var { Step } = Steps\n        return (\n            <Row type=\"flex\" align=\"middle\" id=\"feed-header-container\">\n                <Col md={24}>\n                    <div id=\"feed-header-text\">\n                        <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', marginBottom: '10px'}}>\n                            <h1 style={{ marginRight: '10px', marginBottom: 0}}>STORIES</h1>\n                        </div>\n                    </div>\n                </Col> \n                <Col md={20}>\n                    <Steps current={1} style={{ padding: 0 }}>\n                        <Step style={{ opacity: 0.7 }} title=\"Prompt Process\" description=\"Got enough likes.\" />\n                        <Step title=\"Chapter Process\" description=\"Post and rank chapter submissions. Top ranked is selected.\" />\n                        <Step style={{ opacity: 0.7 }} title=\"Done\" description=\"A story completed by users.\" />\n                    </Steps>\n                </Col>\n            </Row>\n        );\n    }\n}\n\nexport default StoriesFeedHeader;","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { Row, Col, Breadcrumb, Select, Spin, Icon, Button } from 'antd'\nimport StoryCard from '../Posts/StoryCard'\nimport '../../App.css'\nimport StoriesFeedHeader from './StoriesFeedHeader'\n\nclass StoriesFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            sort: \"new\",\n            loaded: false,\n            yposition: 0,\n            sortOrder: 'desc'\n        }\n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    handleSort(value){\n        return this.props.sort(value)\n    }\n\n    componentDidMount(){\n        if(!this.props.stories){\n            this.setState({\n                loaded: false,\n            })\n        }\n        window.addEventListener('scroll', this.listenToScroll)\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.listenToScroll)\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.stories !== this.props.stories){\n            if(this.state.yposition === 0){\n                this.setState({\n                    loaded: true,\n                    yposition: this.props.yposition\n                }, () => {\n                    this.scrollTo(this.state.yposition)\n                });\n            }else{\n                this.setState({\n                    loaded: true\n                }, () => {\n                    this.listenToScroll()\n                    this.scrollTo(this.state.yposition)\n                })\n            }\n        }\n    }\n\n    scrollTo(y){\n        console.log('SCROLLING:' , y)\n        window.scrollTo({\n            top: y,\n            behavior: 'smooth'\n        });\n    }\n\n    listenToScroll = () => {\n        this.setState({\n            yposition: window.scrollY,\n        })\n    }\n\n    getStories(){\n        const { stories } = this.props;\n        if(this.state.loaded){\n            if(this.props.stories.length > 0){\n                return(\n                    stories.map((post,i) =>\n                        <Col id=\"prompt\">\n                            <StoryCard \n                                key={post.id} \n                                auth={this.props.auth}\n                                id={post.id} \n                                title={post.title} \n                                genre={post.genre}\n                                content={post.prompt}\n                                numberOfChapters={post.numberOfChapters}\n                                author={post.author}\n                                authorPic={post.authorPic ? post.authorPic : null}\n                                createdAt={post.createdAt}\n                                currentChapter={post.currentChapter}\n                                chapters={post.chapters}\n                                chapter1={post.chapter1}\n                                chapter2={post.chapter2}\n                                chapter3={post.chapter3}\n                                chapter4={post.chapter4}\n                                likes={post.likes}\n                                yposition={this.state.yposition}\n                                query={this.props.query}\n                                complete={post.complete}\n                            />\n                        </Col> \n                    )\n                )\n            }else{\n                return(\n                    <div style={{ height: '400px', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n                        <p style={{ textAlign: 'center' }}>\n                            No stories found :( <br></br>\n                            Like prompts to help convert them into stories!\n                        </p>\n                    </div>\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '25%', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n    getSortOrder(){\n        var order = this.props.order\n        if(order === 'desc'){\n            return <Button onClick={this.handleSortOrder}><Icon type=\"down\"/></Button>\n        }else{\n            return <Button onClick={this.handleSortOrder}><Icon type=\"up\"/></Button>\n        }\n    }\n\n    handleSortOrder(){\n        return this.props.sortOrder()\n    }\n\n    render() {\n        const { Option } = Select;\n        return (\n            <div>\n                <StoriesFeedHeader/>\n                <Row>\n                    <div id=\"feed-header\">\n                        <div id=\"breadcrumb-container\">\n                            <Breadcrumb>\n                                <Breadcrumb.Item>\n                                    Prompts\n                                </Breadcrumb.Item>\n                                <Breadcrumb.Item>\n                                    {this.props.query}\n                                </Breadcrumb.Item>\n                            </Breadcrumb>\n                        </div>\n                        <div>\n                            <Select showArrow={false} defaultValue=\"createdAt\" style={{ width: 100 }} onChange={this.handleSort}>\n                                <Option value=\"createdAt\">\n                                    New\n                                </Option>\n                                <Option value=\"likeCount\">\n                                    Top\n                                </Option>\n                                <Option value=\"numberOfChapters\">\n                                    Chapters\n                                </Option>\n                            </Select>\n                            {this.getSortOrder()}\n                        </div>\n                    </div>\n                    {this.getStories()}\n                </Row>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        stories: state.firestore.ordered.stories,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n        const { getAll, sortBy, query, order } = props\n        if(getAll == true){\n            return [\n                { collection: 'stories',\n                  orderBy: [sortBy, order]\n                }\n            ]\n        }else{\n            return [{ \n                collection: 'stories', \n                orderBy: [sortBy, order],\n                where: [\"genre\", \"==\", query] \n            }]\n        }\n    })\n)(StoriesFeed)","import React, { Component } from 'react';\nimport { Menu, Icon, Divider } from 'antd';\nimport { NavLink } from 'react-router-dom'\nimport { FaLaughSquint, FaHeart, FaRobot, FaList } from 'react-icons/fa'\nimport { GiShardSword, GiRaiseZombie} from 'react-icons/gi'\nimport '../../App.css'\n\nclass Sidebar extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            mobile: false\n        }\n        this.updateWidth = this.updateWidth.bind(this)\n    }\n\n    componentDidMount(){\n        this.updateWidth();\n        window.addEventListener('resize', this.updateWidth);\n    }\n\n    updateWidth() {\n        if(window.innerWidth > 768){\n            this.setState({\n                mobile: false\n            })\n        }else{\n            this.setState({ \n                mobile: true\n            })\n        }\n    }\n\n    render() { \n        const { SubMenu } = Menu;\n        return (\n            <Menu\n                onClick={this.handleClick}\n                style={this.state.mobile === false ? { \n                    height: '100vh',\n                    position: 'fixed',\n                    overflowY: 'scroll',\n                    overflowX: 'hidden',\n                    paddingTop: '100px',\n                    top: 0,\n                    left: 0\n                } : {\n                    position: 'fixed',\n                    width: '100%',\n                    left: '0',\n                    zIndex: 100\n                }}\n                {...(this.state.mobile === false ? {openKeys: ['sub1', 'sub2', 'sub3']} : null)}\n                {...(this.state.mobile === false ? {defaultOpenKeys: ['sub1', 'sub2', 'sub3']} : null)}\n                {...(this.state.mobile === true ? {forceSubMenuRender: true} : null)}\n                selectedKeys={window.location.pathname}\n                mode={this.state.mobile === true ? 'horizontal' : 'inline'}\n                id=\"sidebar\"\n            >\n                <SubMenu\n                    key=\"sub1\"\n                    title={\n                        <span>\n                        <Icon type=\"edit\" />\n                        <span>Prompts</span>\n                        </span>\n                    }\n                >\n                    <Menu.Item key=\"/prompts/all\">\n                        <NavLink to={{\n                            pathname: \"/prompts/all\"\n                        }}>\n                            <FaList style={styles.IconStyle}/>\n                            All\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/prompts/comedy\">\n                        <NavLink to={{\n                            pathname: \"/prompts/comedy\",\n                            state: {\n                                query: 'Comedy'\n                            }\n                        }}>\n                            <FaLaughSquint style={styles.IconStyle}/>\n                            Comedy\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/prompts/horror\">\n                        <NavLink to={{\n                            pathname: \"/prompts/horror\",\n                            state: {\n                                query: 'Horror'\n                            }\n                        }}>\n                            <GiRaiseZombie style={styles.IconStyle}/>\n                            Horror\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/prompts/fantasy\">\n                        <NavLink to={{\n                            pathname: \"/prompts/fantasy\",\n                            state: {\n                                query: 'Fantasy'\n                            }\n                        }}>\n                            <GiShardSword \n                                style={styles.IconStyle}\n                            />\n                            Fantasy\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/prompts/romance\">\n                        <NavLink to={{\n                            pathname: \"/prompts/romance\",\n                            state: {\n                                query: 'Romance'\n                            }\n                        }}>\n                            <FaHeart \n                                style={styles.IconStyle}\n                            />\n                            Romance\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/prompts/scifi\">\n                        <NavLink to={{\n                            pathname: \"/prompts/scifi\",\n                            state: {\n                                query: 'SciFi'\n                            }\n                        }}>\n                            <FaRobot \n                                style={styles.IconStyle} \n                            />\n                            SciFi\n                        </NavLink>\n                    </Menu.Item>\n\n                </SubMenu>\n\n                {this.state.mobile === true ? '' : <Divider/>}\n\n                {/* STORIES PART OF SIDEBAR*/}\n\n                <SubMenu\n                    key=\"sub2\"\n                    title={\n                        <span>\n                        <Icon type=\"edit\" />\n                        <span>Stories</span>\n                        </span>\n                    }\n                >\n                    <Menu.Item key=\"/stories/all\">\n                        <NavLink to={{\n                            pathname: \"/stories/all\",\n                            state: {\n                                query: 'all'\n                            }\n                        }}>\n                            <FaList style={styles.IconStyle}/>\n                            All\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/stories/comedy\">\n                        <NavLink to={{\n                            pathname: \"/stories/comedy\",\n                            state: {\n                                query: 'Comedy'\n                            }\n                        }}>\n                            <FaLaughSquint               \n                                style={styles.IconStyle}\n                            />\n                            Comedy\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/stories/horror\">\n                        <NavLink to={{\n                            pathname: \"/stories/horror\",\n                            state: {\n                                query: 'Horror'\n                            }\n                        }}>\n                            <GiRaiseZombie \n                                style={styles.IconStyle}\n                            />\n                            Horror\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/stories/fantasy\">\n                        <NavLink to={{\n                            pathname: \"/stories/fantasy\",\n                            state: {\n                                query: 'Fantasy'\n                            }\n                        }}>\n                            <GiShardSword \n                                style={styles.IconStyle}\n                            />\n                            Fantasy\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/stories/romance\">\n                        <NavLink to={{\n                            pathname: \"/stories/romance\",\n                            state: {\n                                query: 'Romance'\n                            }\n                        }}>\n                            <FaHeart \n                                style={styles.IconStyle}\n                            />\n                            Romance\n                        </NavLink>\n                    </Menu.Item>\n                    <Menu.Item key=\"/stories/scifi\">\n                        <NavLink to={{\n                            pathname: \"/stories/scifi\",\n                            state: {\n                                query: 'SciFi'\n                            }\n                        }}>\n                            <FaRobot style={styles.IconStyle}/>\n                            SciFi\n                        </NavLink>\n                    </Menu.Item>\n                </SubMenu>\n            </Menu>        \n        );\n    }\n}\n\nconst styles = {\n    IconStyle: {\n        marginRight: '20px',\n        fontSize: '1.2em'\n    }\n}\n \nexport default Sidebar;","import React, { Component } from 'react'\nimport Prompt from '../Posts/Prompt'\nimport StoryCard from '../Posts/StoryCard'\nimport { Col, Row, Spin } from 'antd'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\n\nclass ProfilePostFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            loaded: false\n        }\n    }\n\n    componentDidMount(){\n        if(!this.props.posts){\n            this.setState({\n                loaded: false\n            })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.posts !== this.props.posts){\n            this.setState({\n                loaded: true\n            })\n        }\n    }\n\n    getPosts(){\n        const { posts } = this.props;\n        if(this.state.loaded){\n            if(this.props.posts.length > 0){\n                return(\n                    posts.map((post,i) =>\n                            <Col id=\"prompt\">\n                                {post.type === \"story\" ?\n                                    <StoryCard \n                                        auth={this.props.auth}\n                                        key={post.id} \n                                        id={post.id} \n                                        title={post.title} \n                                        genre={post.genre}\n                                        content={post.content}\n                                        author={post.author}\n                                        authorPic={post.authorPic ? post.authorPic : null}\n                                        time={post.createdAt}\n                                        likes={post.likes}\n                                    />\n                                :\n                                    <Prompt\n                                        key={post.id} \n                                        id={post.id} \n                                        title={post.title} \n                                        genre={post.genre}\n                                        content={post.content}\n                                        author={post.author}\n                                        authorPic={post.authorPic ? post.authorPic : null}\n                                        time={post.createdAt}\n                                        likes={post.likes}\n                                    />\n                                }\n                            </Col> \n                    )\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '100px', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n\n    render() {\n        return (\n            <Row>\n                {this.getPosts()}\n            </Row>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n        const { type, id } = props\n        return [{ \n            collection: 'users', \n            doc: id,\n            subcollections: [{ collection: type }],\n            storeAs: 'posts'\n        }]\n    })\n)(ProfilePostFeed)","import React, { Component } from 'react';\nimport { Button, Input,  Radio, Avatar, Row, Col, message } from 'antd'\nimport ProfilePostFeed from '../Profile/ProfilePostFeed'\nimport { getFirestore } from \"redux-firestore\";\nvar firebase = require('firebase');\n\nclass UserProfile extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            selected: 'likes'\n        }\n        this.handleRadioChange = this.handleRadioChange.bind(this)\n    }\n\n    fileSelectedHandler = event => {\n        this.fileUploadHandler(event.target.files[0])\n    }\n\n    fileUploadHandler = (file) => {\n\n        var user = firebase.auth().currentUser;\n        var userName = user.displayName\n        var storageRef = firebase.storage().ref(userName + '/profilePicture/' + file)\n        var uploadTask = storageRef.put(file)\n\n        uploadTask.on('state_changed', function(snapshot){\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log('Upload is ' + progress + '% done');\n            \n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    console.log('Upload is paused');\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    console.log('Upload is running');\n                    break;\n                default: console.log('default')\n            }\n        }, function(error) {\n            // Handle unsuccessful uploads\n        }, function() {\n            // Handle successful uploads on complete\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                user.updateProfile({\n                    photoURL: downloadURL\n                }).then(function() {\n                    message.success('Display Pic Successfully Changed!')\n                    getFirestore().collection('users').doc(userName).update({\n                        photoURL: downloadURL\n                    })\n                    .then(function(){\n                        window.location.reload()\n                    })\n                }).catch(function(error) {\n                    console.log('ERROR Uploading pic')\n                });\n            });\n        });\n\n    }\n\n    handleRadioChange(e){\n        this.setState({\n            selected: e.target.value\n        })\n    }\n\n    showRelevantFeed(){\n        return(<ProfilePostFeed type={this.state.selected} id={this.props.auth.displayName}/>)\n    }\n\n    getAvatar(){\n        if(this.props.auth.photoURL !== null){\n            return <Avatar shape=\"square\" size={100} src={this.props.auth.photoURL} />\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                <Row type=\"flex\" align=\"middle\">\n                    <Col md={2}>\n                        {this.getAvatar()}\n                    </Col>\n                    <Col md={4} style={{ marginLeft: '15px'}}>\n                        <h1>{this.props.auth.displayName}</h1>\n                        <Button style={{ padding: 0, margin: 0}}>\n                            <label style={{ width: '100%', height: '100%', padding: '10px'}} for=\"upload\">Change DP</label>\n                        </Button>\n                        <Input type=\"file\" id=\"upload\" style={{ visibility: 'hidden', width: 0 }} onChange={this.fileSelectedHandler}/>\n                    </Col>\n                    {/* <input type=\"file\" onChange={this.fileSelectedHandler}/>\n                    <Button type=\"primary\" onClick={this.fileUploadHandler}>Upload</Button> */}\n                </Row>\n                <Row style={{ marginTop: '48px' }} onChange={this.handleRadioChange}>\n                    <Radio.Group defaultValue=\"posts\" buttonStyle=\"solid\">\n                        <Radio.Button value=\"posts\">Your Posts</Radio.Button>\n                        <Radio.Button value=\"liked\">Liked</Radio.Button>\n                        <Radio.Button value=\"Delete\">Delete</Radio.Button>\n                    </Radio.Group>\n                </Row>\n                <Row style={{ marginTop: '48px' }}>\n                    {this.showRelevantFeed()}\n                </Row>\n            </div>\n        )\n    }\n}\n\nexport default UserProfile","import React, { Component } from 'react';\nimport '../../App.css'\n\nclass Footer extends Component {\n    render() {\n        return (\n            <div id=\"footer\">\n                coauthor 2019\n            </div>\n        );\n    }\n}\n\nexport default Footer;","import React, { Component } from 'react';\nimport PromptsFeed from '../Layout/PromptsFeed'\nimport StoriesFeed from '../Layout/StoriesFeed'\nimport Sidebar from '../Layout/Sidebar'\nimport UserProfile from '../Profile/UserProfile'\nimport { Row, Col } from 'antd';\nimport '../../App.css'\nimport Footer from '../Layout/Footer'\nimport { connect } from 'react-redux';\n\nclass Home extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            query: '',\n            getAll: false,\n            sort: 'createdAt',\n            sortOrder: 'desc',\n            yposition: 0\n        }\n        this.sort = this.sort.bind(this)\n        this.sortOrder = this.sortOrder.bind(this)\n    }\n\n    componentDidMount(){\n        this.getQuery()\n        this.getScrollPosition()\n        this.getAll()\n    }\n\n    getQuery(){\n        if(this.props.location.state){\n            this.setState({\n                query: this.props.location.state.query\n            })\n        }\n    }\n\n    getScrollPosition(){\n        if(this.props.location.state){\n            if(this.props.location.state.hasOwnProperty('yposition')){\n                this.setState({\n                    yposition: this.props.location.state.yposition\n                })\n            }\n        }\n    }\n\n    getAll(){\n        if(window.location.pathname.substr(-3) === 'all'){\n            this.setState({\n                getAll: true\n            })\n        }\n    }\n\n    sort(condition){\n        this.setState({\n            sort: condition\n        })\n    }\n\n    sortOrder(){\n        if(this.state.sortOrder === 'desc'){\n            this.setState({\n                sortOrder: 'asc'\n            })\n        }else{\n            this.setState({\n                sortOrder: 'desc'\n            })\n        }\n    }\n\n    showRelevantFeed(){\n        if(window.location.pathname.slice(1,8) === 'prompts'){\n            return <PromptsFeed \n                        sort={this.sort} \n                        order={this.state.sortOrder}\n                        sortOrder={this.sortOrder} \n                        sortBy={this.state.sort} \n                        getAll={this.state.getAll} \n                        query={this.state.query}\n                    />\n        }else if(window.location.pathname.slice(1,8) === 'profile'){\n            return <UserProfile auth={this.props.auth} isOwnProfile={true}/>\n        }else{\n            return <StoriesFeed \n                        sort={this.sort} \n                        order={this.state.sortOrder}\n                        sortOrder={this.sortOrder} \n                        sortBy={this.state.sort} \n                        getAll={this.state.getAll} \n                        query={this.state.query} \n                        yposition={this.state.yposition}\n                    />\n        }\n    }    \n\n    render() {\n        return (\n            <div>\n            <div id=\"home\">\n                <Row>\n                    <Col xs={24} md={5} xl={3}>\n                        <Sidebar auth={this.props.auth} query={this.updateQuery}/>\n                    </Col>\n                    <Col xs={22} md={17} xl={19} offset={1}  id=\"feed-container\">\n                        {this.showRelevantFeed()}\n                    </Col>\n                </Row>\n            </div>\n            <Footer/>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react'\nimport { Menu, Dropdown, Icon, Button, Avatar } from 'antd';\nimport { NavLink } from 'react-router-dom'\nimport { getFirestore } from 'redux-firestore'\n\nclass AccountDropdown extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            photoURL: null\n        }\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.getAvatar()\n    }\n    \n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.auth.displayName).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n        }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n        });\n    }\n\n    render() {\n\n        const menu = (\n            <Menu>\n                <Menu.Item key=\"0\" onClick={this.props.signOut}>\n                    Sign Out\n                </Menu.Item>\n                <Menu.Item>\n                    <NavLink to={{\n                        pathname: \"/profile\"\n                    }}>\n                        Profile\n                    </NavLink>\n                </Menu.Item>\n            </Menu>\n        )\n\n        return (\n            <div>\n                <Dropdown overlay={menu} trigger={['click']}>\n                    <Button type=\"dashed\" style={{ background: 'none' }}>\n                        {this.state.photoURL !== null ?\n                            <Avatar size=\"small\" style={{ marginRight: '10px' }} src={this.state.photoURL}/> :\n                            <Avatar size=\"small\" style={{ background: '#111717', color: '#171F22', marginRight: '14px' }} icon=\"user\" />\n                        }\n                        {this.props.auth.displayName} \n                        <Icon type=\"down\" />\n                    </Button>\n                </Dropdown>\n            </div>\n        );\n    }\n}\n\nexport default AccountDropdown\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport {Dropdown, Menu, Badge, Icon, Button, Divider } from 'antd'\n\nclass Notifications extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            loaded: false,\n            newNotifs: 0,\n            visible: false\n        }\n        this.resetNotifs = this.resetNotifs.bind(this)\n        window.addEventListener(\"scroll\", this.closeMenu);\n    }\n  \n    toggleMenu = () => {\n      this.setState({ visible: !this.state.visible })\n    }\n  \n    closeMenu = () => {\n      this.setState({ visible: false })\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.notifications !== this.props.notifications){\n            if(prevProps.notifications !== 0 && this.props.notifications > prevProps.notifications){\n                this.setState({\n                    loaded: true,\n                    newNotifs: (this.props.notifications.length - prevProps.notifications.length) + this.state.newNotifs\n                })\n            }else{\n                this.setState({\n                    loaded: true\n                })\n            }\n        }\n    }\n\n    getNotifications(){\n\n        var loaded = this.state.loaded\n        var notifications = this.props.notifications\n        var menuItems = []\n\n        if(loaded){\n            for (let i = 0; i < notifications.length; i++) {\n                menuItems.push(\n                    <div>\n                    <Link to={{ \n                        pathname: '/story/' + notifications[i].id, \n                        state: { \n                            id: notifications[i].id,\n                            auth: this.props.auth,\n                            yposition: 0,\n                            query: 'all'\n                        }\n                    }}>\n                        <Menu.Item \n                            key={i}\n                            id='notification'\n                            onClick={this.closeMenu}\n                            style={{ \n                                minHeight: '75px', \n                                minWidth: '250px',\n                                display: 'flex', \n                                justifyContent: 'center',\n                                flexDirection: 'row'\n                        }}>\n                            <div \n                                style={{ \n                                    width: '20%',\n                                    display: 'flex', \n                                    justifyContent: 'center',\n                                    alignItems: 'center'\n                                }}\n                            >\n                                <Icon type=\"sync\"/>\n                            </div>\n                            <div \n                                style={{ \n                                    width: '75%',\n                                    display: 'flex', \n                                    justifyContent: 'center',\n                                    flexDirection: 'column'\n                                }}\n                            >\n                                <b>{notifications[i].title}</b>\n                                <small \n                                    style={{ opacity: 0.6 }}\n                                >\n                                {notifications[i].notification} - {this.getTime(new Date(), notifications[i].date.toDate())}\n                                </small>\n                            </div>\n                        </Menu.Item>\n                    </Link>\n                    <Menu.Divider />\n                    </div>\n                )\n            }\n            return(\n                <Menu style={{ maxHeight: '80vh', overflowY: 'scroll', overflowX: 'hidden'}}>\n                    {menuItems}\n                </Menu>\n            )\n        }else{\n            return <small>Loading...</small>\n        }\n\n    }\n\n    getTime(current, posted){\n        var diffMin = (current - posted) / 60000\n        \n        if(diffMin > 60){\n            return Math.round(diffMin * 60) + 'h ago'\n        }else if(diffMin > 1){\n            return Math.round(diffMin) + ' min ago'\n        }else{\n            return 'now'\n        }\n    }\n\n    resetNotifs(){\n        this.setState({ newNotifs: 0 })\n    }\n\n    render() {\n        return (\n            <div>\n                <Dropdown \n                    overlay={this.getNotifications()} \n                    trigger={['click']}\n                    onVisibleChange={this.toggleMenu}\n                    visible={this.state.visible}\n                >\n                    <Badge id=\"notification-badge\" count={this.state.newNotifs > 10 ? '10+' : this.state.newNotifs} onClick={this.resetNotifs}>\n                        <Icon type=\"notification\" />\n                    </Badge>\n                </Dropdown>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        notifications: state.firestore.ordered.notifications,\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect((props) => {\n        return [\n            { \n                collection: 'notifications',\n                sortBy: 'time',\n                limit: 10\n            }\n        ]\n    })\n)(Notifications)","import React, { Component, Fragment } from 'react'\nimport NewPostModal from '../Posts/NewPostModal';\nimport { signOut } from '../../Store/Actions/authActions'\nimport { connect } from 'react-redux'\nimport HelpModal from '../Common/HelpModal'\nimport AccountDropdown from '../Common/AccountDropdown'\nimport Notifications from '../Common/Notifications'\nimport '../../App.css'\n\nclass SignedInLinks extends Component {\n\n    render() {\n        return (\n            <Fragment>\n\n                <div className=\"nav-link\">\n                    <NewPostModal title=\"New Prompt\"/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <HelpModal/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <AccountDropdown signOut={this.props.signOut} auth={this.props.auth}/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <Notifications/>\n                </div>\n\n            </Fragment>\n        );\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signOut: () => dispatch(signOut())\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(SignedInLinks);","import React, { Component, Fragment } from 'react'\nimport SignInModal from '../Auth/SignInModal'\nimport SignUpModal from '../Auth/SignUpModal'\nimport HelpModal from '../Common/HelpModal'\nimport '../../App.css'\n\nclass SignedOutLinks extends Component {\n    \n    render() {\n        return (\n            <Fragment>\n\n                <div className=\"nav-link\">\n                    <HelpModal/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <SignInModal/>\n                </div>\n                \n                <div className=\"nav-link\">\n                    <SignUpModal/>\n                </div>\n                \n            </Fragment>\n            \n        );\n    }\n}\n\nexport default SignedOutLinks;","import React from 'react'\nimport { Menu, Row, Col } from 'antd'\nimport '../../App.css'\nimport SignedInLinks from '../Auth/SignedInLinks';\nimport SignedOutLinks from '../Auth/SignedOutLinks';\nimport { connect } from 'react-redux';\nimport { NavLink, withRouter } from 'react-router-dom'\nimport logo from '../../img/logo.png'\n\nconst Nav = (props) => {\n    const { auth } = props;\n    const links = auth.uid ? <SignedInLinks auth={auth}/> : <SignedOutLinks/>;\n    return (\n        <div>\n            <Menu id=\"navBar\" mode=\"horizontal\">\n\n                <Row className=\"nav-row\">\n                    <NavLink to={{\n                        pathname: \"/\"\n                    }}> \n                        <Col xs={24} md={3} className=\"nav-col-left\">\n                            <Menu.Item key=\"app\">\n                                    <img id=\"logo\" src={logo} alt=\"logo\"/>\n                            </Menu.Item>\n                        </Col>\n                    </NavLink>\n\n                    <Col xs={22} md={19} offset={1} className=\"nav-col-right\">\n                        { links }\n                    </Col>\n                </Row>\n\n            </Menu>\n        </div>\n\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nexport default connect(mapStateToProps)(Nav);","import React, { Component } from 'react'\nimport { Comment, Tooltip, Icon, Avatar, message, Popover, Popconfirm } from 'antd'\nimport { getFirestore } from \"redux-firestore\";\nvar firebase = require('firebase');\n\nclass StoryComment extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            amountOfLikes : 0,\n            userLiked: false,\n            expanded: false\n        }\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.deleteSubmission = this.deleteSubmission.bind(this)\n        this.expandComment = this.expandComment.bind(this)\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(prevProps.id !== this.props.id){\n            this.setState({\n                amountOfLikes : 0,\n                userLiked: false\n            })\n            this.getLikeAmount()\n            this.userLiked()    \n        }\n    }\n\n    componentDidMount(){\n        this.getLikeAmount()\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    getTime(){\n        var postedTime = this.props.time\n        var currentTime = new Date()\n        var diff = currentTime - postedTime\n        var hours = diff / 1000 / 60 / 60\n\n        if(hours >= 24){\n            return(Math.round(hours / 24) + ' days ago')\n        }\n        else if(hours < 1){\n            if(hours < 0.016){\n                return 'now'\n            }else{\n                return Math.round(diff / 1000 / 60) + ' minutes ago'\n            }\n        }else{\n            return Math.round(hours) + ' hours ago'\n        }\n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i].uid == this.props.uid){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <Icon \n                    type=\"heart\"\n                    theme=\"filled\"\n                    size=\"large\"\n                    key=\"heart\" \n                    style={{ color:'#ff7a45' }}\n                />\n            )\n        }else{\n            return(\n                <Icon \n                    type=\"heart\" \n                    key=\"heart\" \n                    style={{ color:'white' }}\n                />\n            )\n        }\n    }\n\n    getLikeAmount(){\n        this.setState({\n            amountOfLikes: this.props.likeCount\n        })\n    }\n\n    like(){\n        if (this.props.uid) {\n            if(this.state.userLiked == false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id)\n                .update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        {\n                            uid: this.props.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n                message.success('Comment Liked!')\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id)\n                .update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        {\n                            uid: this.props.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n            }\n        }else{\n            message.error('Please Login To Like Submissions')\n        }\n\n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document!\");\n            }\n        }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n        });\n    }\n\n    deleteSubmission(){\n        getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id).delete()\n        .then(function() {\n            message.success('Your submission has been deleted.')\n        }).catch(function(error) {\n            message.error(error)\n        });\n    }\n\n    isOwnSubmission(){\n        var currentUser = this.props.auth.displayName\n        if(currentUser === this.props.author){\n            return(\n                <Popconfirm\n                    title=\"Are you sure you want to delete your submission?\"\n                    onConfirm={this.deleteSubmission}\n                    okText=\"Yes\"\n                    cancelText=\"No\"\n                >\n                    delete\n                </Popconfirm>\n            )\n        }\n    }\n\n    expandComment(){\n        this.setState({\n            expanded: !this.state.expanded\n        })\n    }\n\n    expandStyle(){\n        if(this.state.expanded){\n            return({\n                height: 'auto',\n                paddingRight: '48px'\n            })\n        }else{\n            return({\n                maxHeight: '6.3em',\n                overflow: 'hidden',\n                paddingRight: '48px'\n            })\n        }\n    }\n\n    render() {  \n        const actions = [\n            <span onClick={this.like} key=\"comment-basic-like\">\n                <Tooltip title=\"Like\">\n                    {this.renderHeart()}\n                    <span style={{ marginLeft: '5px' }}>\n                        {this.state.amountOfLikes}\n                    </span>\n                </Tooltip>\n                {/* <span style={{ paddingLeft: 8, cursor: 'auto' }}>{this.props.likes.length}</span> */}\n            </span>,\n            this.isOwnSubmission()\n        ]\n        return (\n            <Comment\n                author={<a>{this.props.author}</a>}\n                actions={this.props.selected ? '' : actions}\n                avatar={\n                    <span \n                    style={{ \n                        display: 'flex', \n                        flexDirection: 'column', \n                        alignItems: 'center'\n                    }}>\n                        <Popover content={this.props.author} title=\"\">\n                            {this.state.photoURL !== null ?\n                                <Avatar src={this.state.photoURL}/> :\n                                <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                        }\n                        </Popover>\n                    </span>\n                }\n                content={\n                    this.props.selected ?\n                        <div style={{ paddingRight: '48px'}}>\n                            <p>{this.props.comment}</p>\n                        </div> \n                    :\n                        <div>\n                            <div style={this.expandStyle()}>\n                                <p>{this.props.comment}</p>\n                            </div>\n                            <div>\n                                {this.state.expanded ? \n                                    <span\n                                        onClick={this.expandComment} \n                                        style={{opacity: 0.6}}\n                                    >\n                                        <small style={{ cursor: 'pointer '}}>less</small>\n                                    </span> : \n                                    <span \n                                        onClick={this.expandComment} \n                                        style={{opacity: 0.6}}\n                                    >\n                                        <small style={{ cursor: 'pointer '}}>more</small>\n                                    </span>\n                                }\n                            </div>\n                        </div>\n                }\n                datetime={\n                    this.props.selected ? \n                        <span></span>: \n                        this.getTime()\n                }\n            />\n        )\n    }\n}\n\nexport default StoryComment;","import React, { Component } from 'react'\nimport StoryComment from '../Posts/StoryComment'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { List, Select, Button, Icon, Divider } from 'antd'\n\n\nclass Comments extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            loaded: false,\n            submissions: [],\n            sortOrder: 'desc'\n        }        \n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    componentDidUpdate(prevState, prevProps){\n        if(this.state.loaded !== this.props.loaded || prevState.submissions !== this.props.submissions){\n            this.setState({\n                loaded: true,\n                submissions: this.props.submissions\n            })\n            return this.props.getSubmissions(this.props.auth.uid, this.props.submissions)\n        }\n    }\n\n    handleSort(value){\n        return this.props.updateSort(value)\n    }\n\n    handleSortOrder(){\n        var order = this.props.sortOrder\n        if(order == 'desc'){\n            return this.props.updateSortOrder('asc')\n        }else{\n            return this.props.updateSortOrder('desc')\n        }\n    }\n    \n    renderSortArrow(){\n        var order = this.props.sortOrder\n        if(order == 'desc'){\n            return <Icon type=\"down\"/>\n        }else{\n            return <Icon type=\"up\"/>\n        }\n    }\n\n    getComments(){\n        if(this.state.loaded && this.state.submissions.length > 0){\n            return(\n                <List\n                    className=\"comment-list\"\n                    header={this.getCommentSort()}\n                    itemLayout=\"horizontal\"\n                    dataSource={this.getSubmissions()}\n                    renderItem={item => (\n                        <li>\n                            <StoryComment \n                                id={item.id}\n                                postId={item.postId}\n                                auth={this.props.auth}\n                                uid={this.props.auth.uid}\n                                author={item.author}\n                                comment={item.content}\n                                likes={item.likes}\n                                likeCount={item.likeCount}\n                                time={item.time}\n                            />\n                        </li>\n                    )}\n                />\n            )\n        }else{\n            return(\n                <List\n                    className=\"comment-list\"\n                    header={this.getCommentSort()}\n                    itemLayout=\"horizontal\"\n                    dataSource={[]} \n                    locale={{ emptyText: <p>No Submissions</p> }}\n                />\n            )\n        }\n    }\n\n    getCommentSort(){\n        const { Option } = Select;\n        return(\n            <div style={{marginBottom: '24px'}}>\n                {this.state.submissions.length + ' Submissions'}\n                <Select \n                    defaultValue=\"time\" \n                    style={{ width: 80, marginLeft: '20px'}} \n                    onChange={this.handleSort}\n                    showArrow={false}\n                >\n                    <Option value=\"time\">New</Option>\n                    <Option value=\"likeCount\">Top</Option>\n                </Select>\n                <Button style={{ marginLeft: '5px' }} onClick={this.handleSortOrder}>\n                    {this.renderSortArrow()}\n                </Button>\n            </div>\n        )\n    }\n\n    getSubmissions(){\n        const subs = []\n        for (let i = 0; i < this.state.submissions.length; i++) {\n            subs.push({\n                postId: this.state.submissions[i].postId,\n                uid: this.props.auth.uid,\n                id: this.state.submissions[i].id,\n                author: this.state.submissions[i].author,\n                content: this.state.submissions[i].content,\n                likes: this.state.submissions[i].likes,\n                likeCount: this.state.submissions[i].likeCount,\n                time: this.state.submissions[i].time.toDate()\n            })\n        }\n        return subs\n    }\n\n    render() {\n        return (\n            <div id=\"comments\">\n                {this.getComments()}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        submissions: state.firestore.ordered.submissions,\n        auth: state.firebase.auth,\n        loaded: true\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect(props => {\n        return [{\n            collection: 'stories',\n            doc: props.id,\n            subcollections: [{ collection: 'submissions'}],\n            where: [\n                'chapter', '==', props.chapter\n            ],\n            orderBy: [props.sort, props.sortOrder],\n            storeAs: 'submissions'\n        }];\n    })\n)(Comments)","import React, { Component } from 'react'\nimport { Input, Button, Divider, Form, message } from 'antd';\nimport { connect } from 'react-redux'\nimport { submitChapter } from '../../Store/Actions/postActions'\n\nconst { TextArea } = Input;\n\nclass SubmitChapter extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            content: '',\n            remainingCharacters: 4000\n        }\n    }\n\n    componentDidMount(){\n        this.setState({\n            postId: this.props.id,\n            chapter: this.props.chapter\n        })\n    }\n\n    handleChange = (e) => {\n        if(e.target.id == 'content'){\n            var content = e.target.value.toString()\n            this.setState({\n                remainingCharacters: 2000 - content.length\n            })\n        }\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) =>{\n        e.preventDefault();\n        if(this.state.remainingCharacters > 0){\n            this.props.closePanel()\n            this.props.submitChapter(this.state)\n        }else{\n            message.error('Chapter is too long.')\n        }\n    }\n\n    render() { \n        return (  \n            <div>\n                <Form onSubmit={this.handleSubmit}>\n                <Form.Item>\n                    <TextArea\n                        id=\"content\"\n                        className=\"submit-chapter-input\"\n                        onChange={this.handleChange}\n                        autosize={{ minRows: 3, maxRows: 15 }}\n                    />\n                </Form.Item>\n                <span \n                    style={\n                        this.state.remainingCharacters < 0 ? \n                            { color: '#fa541c', opacity: 0.5} : \n                            { opacity: 0.5 }\n                    }\n                >\n                    <small>{this.state.remainingCharacters} characters left</small>\n                </span>\n                <br></br>\n                <Button \n                    type=\"primary\"\n                    id=\"submit-chapter-button\"\n                    htmlType=\"submit\"\n                >\n                    Submit\n                </Button>\n                </Form>\n            </div>\n        );\n    }\n}\n \nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        submitChapter: (submission) => dispatch(submitChapter(submission))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubmitChapter)\n\n","import React from 'react';\nimport Comments from './Comments'\nimport SubmitChapter from './SubmitChapter'\nimport StoryComment from '../Posts/StoryComment'\nimport { Button, Icon, Divider, message, Tooltip, BackTop, Steps } from 'antd';\nimport { getFirestore } from \"redux-firestore\";\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport '../../App.css'\nvar firebase = require('firebase');\n\nclass StoryModalContent extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            chapter: 1,\n            sort: 'time',\n            sortOrder: 'desc',\n            uid: '',\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            submissions: [],\n            submissionsLoaded: false,\n            userSubmitted: true,\n            selectedChapter: 0,\n            timeLeft: 0 // Minutes left in chapter\n        }\n        this.updateCommentSort = this.updateCommentSort.bind(this)\n        this.updateCommentSortOrder = this.updateCommentSortOrder.bind(this)\n        this.getSubmissions = this.getSubmissions.bind(this)\n        this.openSubmitPanel = this.openSubmitPanel.bind(this)\n        this.closeSubmitPanel = this.closeSubmitPanel.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.hasUserSubmitted = this.hasUserSubmitted.bind(this)\n        this.timeLeft = this.timeLeft.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState({\n            amountOfLikes: this.props.likes.length,\n            currentChapter: this.props.currentChapter,\n            selectedChapter: this.props.currentChapter - 1\n        })\n        this.userLiked()\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevState.submissions !== this.state.submissions){\n            this.setState({\n                submissionsLoaded: true\n            },() => {\n                this.hasUserSubmitted()\n                this.timeLeft()\n            })\n        }\n    }\n\n    getComments(){\n\n        var selected = this.props.selectedChapters\n        var radio = this.state.selectedChapter\n        var current = this.state.currentChapter\n\n        if(current){\n            if((radio + 1) < current || this.props.complete){\n                return (\n                    <div style={{ \n                        paddingBottom: '24px', \n                        paddingTop: '14px',\n                        paddingLeft: '24px',\n                        paddingRight: '24px',\n                        backgroundColor: '#111717'\n                    }}>\n                        {/* <h3 style={{ marginBottom: '12px' }}>Chapter {this.state.selectedChapter + 1}</h3>\n                        <Divider/> */}\n                        <StoryComment \n                            id={selected[radio].id}\n                            postId={selected[radio].postId}\n                            uid={this.props.auth.uid}\n                            author={selected[radio].author}\n                            comment={selected[radio].content}\n                            likes={selected[radio].likes}\n                            likeCount={selected[radio].likeCount}\n                            auth={this.props.auth}\n                            selected={true}\n                        />\n                    </div>\n                )\n            }else{\n                return(\n                    <Comments\n                        id={this.props.id}\n                        uid={this.state.uid}\n                        chapter={this.state.selectedChapter + 1}\n                        sort={this.state.sort}\n                        sortOrder={this.state.sortOrder}\n                        updateSort={this.updateCommentSort}\n                        updateSortOrder={this.updateCommentSortOrder}\n                        submissions={this.state.submissions}\n                        getSubmissions={this.getSubmissions}\n                    />\n                )\n            }\n        }else{\n            return <p>Loadin</p>\n        }\n    \n    }\n\n    getEnabledRadios(){\n        var current = this.props.currentChapter\n        var enabled = []\n        var timeLeft = this.state.timeLeft\n        var { Step } = Steps;\n        for (let i = 1; i <= current; i++) {\n            if(i === current && this.props.complete === false){\n                enabled.push(\n                    <Step \n                        icon={<Icon type=\"hourglass\" />} \n                        title={\"Chapter \" + i} \n                        description={\n                            timeLeft > 60 ? \n                                Math.round(timeLeft * 60) + ' Hrs Left' \n                            : \n                                Math.round(timeLeft) + ' Min Left'\n                        }\n                    />\n                )\n            }else{\n                enabled.push(\n                    <Step \n                        icon={<Icon type=\"check-circle\" />}\n                        title={\"Chapter \" + i} \n                        description={this.props.complete ? null : \"Complete\"}\n                    />\n                )\n            }\n        }\n        return enabled\n    }\n\n    getDisabledRadios(){\n        var current = this.props.currentChapter\n        var numberOfChapters = this.props.numberOfChapters\n        var disabled = []\n        var { Step } = Steps;\n\n        for (let i = current + 1; i <= numberOfChapters; i++) {\n            disabled.push(\n                <Step \n                    title={\"Chapter \" + i} \n                    style={{ opacity: 0.3 }} \n                    disabled={true} \n                    description={\n                        i === current + 1 ?\n                            'Up Next'\n                        :\n                            ''\n                    }\n                />\n            )\n        }\n        return disabled\n    }\n\n    onChange = selectedChapter => {\n        this.setState({ selectedChapter });\n    };\n\n    renderChapterRadios(){\n        const { selectedChapter } = this.state;\n        return(\n            <div>\n                <Steps type=\"navigation\" size=\"small\" status=\"process\" current={selectedChapter} onChange={this.onChange}>\n                    {this.getEnabledRadios()}\n                    {this.getDisabledRadios()}\n                </Steps>\n            </div>\n        )\n    }\n\n    updateCommentSort(value){\n        this.setState({\n            sort: value,\n            sortOrder: 'desc'\n        })\n    }\n\n    updateCommentSortOrder(order){\n        this.setState({\n            sortOrder: order\n        })\n    }\n\n    getSubmissions(uid, submissions){\n        this.setState({\n            uid: uid,\n            submissions: submissions\n        })\n    }\n\n    getTopSubmission(){\n        var submissions = this.state.submissions\n        var equalAmountOfLikes = []\n        // Sort submissions by like count\n        submissions.sort(function(a, b){\n            return b.likeCount - a.likeCount\n        })\n\n        if(submissions.length > 0 && this.state.submissionsLoaded){\n            // If top likes are equal, push to array\n            if(submissions.length > 1){\n                for (let i = 0; i < submissions.length - 1; i++) {\n                    if(submissions[i].likeCount === submissions[i+1].likeCount){\n                        equalAmountOfLikes.push(submissions[i])\n                        equalAmountOfLikes.push(submissions[i+1])\n                    }else{\n                        break\n                    }\n                }\n            }\n            // If there is equal likes, sort by newest submission, if not return top liked\n            if(equalAmountOfLikes.length > 0){\n                equalAmountOfLikes.sort(function(a,b){\n                    return b.time.toDate() - a.time.toDate()\n                })\n                this.endSubmissionProcess(equalAmountOfLikes[0])\n            }else{\n                this.endSubmissionProcess(submissions[0])\n            }\n        }else{\n            getFirestore().collection('stories').doc(this.props.id).delete()\n        }\n\n    }\n\n    openSubmitPanel(){\n        this.setState({\n            panelOpen: !this.state.panelOpen\n        })\n    }\n\n    closeSubmitPanel(){\n        this.setState({\n            panelOpen: false\n        })\n    }\n\n    hasUserSubmitted(){\n        var submissions = this.state.submissions\n        if(submissions.length > 0){\n            for (let i = 0; i < submissions.length; i++) {\n                if(submissions[i].author === this.props.auth.displayName && submissions[i].chapter === this.props.currentChapter){\n                    this.setState({\n                        userSubmitted: true\n                    })\n                    break\n                }else{\n                    this.setState({\n                        userSubmitted: false\n                    })\n                }\n            }\n        }else{\n            this.setState({\n                userSubmitted: false\n            })\n        }\n    }\n\n    renderSubmitHeader(){\n        if(this.state.panelOpen){\n            return(\n                <SubmitChapter\n                    id={this.props.id}\n                    chapter={this.props.currentChapter}\n                    closePanel={this.closeSubmitPanel}\n                />\n            )\n        }\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked == false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n                getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').doc().set({\n                    type: 'story',\n                    postId: this.props.id,\n                    author: this.props.author,\n                    content: this.props.prompt,\n                    genre: this.props.genre,\n                    title: this.props.title\n                })\n                message.success('Story Liked!')\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        {\n                            uid: this.props.auth.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n                // Delete post from users 'liked' collection\n                var delete_query = getFirestore().collection('users').doc(this.props.auth.displayName).collection('liked').where('postId','==',this.props.id)\n                delete_query.get().then(function(querySnapshot){\n                    querySnapshot.forEach(function(doc){\n                        doc.ref.delete();\n                    })\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i].uid === this.props.auth.uid){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <Icon \n                    type=\"heart\"\n                    theme=\"filled\"\n                    size=\"large\"\n                    key=\"heart\" \n                    style={{ color:'#ff7a45' }}\n                />\n            )\n        }else{\n            return(\n                <Icon \n                    type=\"heart\" \n                    key=\"heart\" \n                    style={{ color:'rgba(255, 255, 255, 0.4)' }}\n                />\n            )\n        }\n    }\n\n    \n    timeLeft(){\n        var current = this.props.currentChapter\n        var created = this.props.createdAt.toDate()\n        var diffMins\n        var now = new Date()\n        var chapter2 = new Date(created.getTime() + 3*60000);\n        var chapter3 = new Date(chapter2.getTime() + 3*60000);\n        var chapter4 = new Date(chapter3.getTime() + 3*60000);\n        var final = new Date(chapter4.getTime() + 3*60000);\n\n        switch(current) {\n            case 1:\n                diffMins = (chapter2 - now) / 60000;\n                break;\n            case 2:\n                diffMins = (chapter3 - now) / 60000;\n                break;\n            case 3:\n                diffMins = (chapter4 - now) / 60000;\n                break;\n            case 4:\n                diffMins = (final - now) / 60000;\n                break;    \n            default:\n                break;\n        }\n\n        if(diffMins < 0){\n            this.getTopSubmission()\n        }else{\n            this.setState({\n                timeLeft: diffMins\n            })\n        }\n\n    }\n\n    endSubmissionProcess(topSubmission){\n        // If story is not on last chapter do following\n        if(this.props.currentChapter !== this.props.numberOfChapters){\n            getFirestore().collection('stories').doc(this.props.id).update({\n                currentChapter: this.props.currentChapter + 1,\n                selectedChapters: firebase.firestore.FieldValue.arrayUnion(\n                    topSubmission\n                )\n            })\n        }else{\n            getFirestore().collection('stories').doc(this.props.id).update({\n                complete: true,\n                selectedChapters: firebase.firestore.FieldValue.arrayUnion(\n                    topSubmission\n                )\n            })\n        }\n    }\n\n    render() { \n\n        return (\n            <div>\n                <BackTop/>\n                <div className=\"modal-body\">\n\n                    {/* HEADER */}\n\n                    <div>\n                        <span style={{ display: 'flex', flexDirection: 'row' }}>\n                            <h2>{this.props.title}</h2>\n                        </span>\n                    </div>\n\n                    <br></br>\n\n                    {/* PROMPT STYLING */}\n                    <div>\n                        <div style={{ marginBottom: '48px' }}>\n                            {this.props.prompt}\n                        </div>\n                    </div>        \n\n                    <div className=\"modal-buttons\">\n                        \n                        {this.props.auth.isEmpty ? \n                            <Button\n                                onClick={function(){ message.error('Please login to submit chapters.')}}\n                                style={{ \n                                    paddingBottom: '30px',\n                                    paddingRight: '10px',\n                                    paddingLeft: '10px',\n                                    paddingTop: '10px',\n                                    marginRight: '14px'\n                                }} \n                                type=\"primary\"\n                            >\n                                <Icon type=\"plus\"/> Submit Chapter {this.props.currentChapter}</Button>    \n                            :\n                            <Button \n                                onClick={this.openSubmitPanel} \n                                style={{ \n                                    paddingBottom: '30px',\n                                    paddingRight: '10px',\n                                    paddingLeft: '10px',\n                                    paddingTop: '10px', \n                                    marginRight: '28px'\n                                }} \n                                type=\"primary\"\n                                disabled={this.state.userSubmitted}\n                            >\n                                {this.state.userSubmitted ? \n                                    <Icon type=\"check\"/> : \n                                this.state.panelOpen ? \n                                    <Icon type=\"minus\"/> : \n                                    <Icon type=\"plus\"/>\n                                }\n                                {this.state.userSubmitted ?\n                                    'Chapter Submitted':\n                                    'Submit Chapter ' + this.props.currentChapter     \n                                }\n                            </Button>\n                        }\n\n                        <Button \n                            type=\"link\" \n                            onClick={this.like} \n                        >\n                            <span style={{ display: 'flex', alignItems: 'center' }}>\n                                {this.renderHeart()}\n                                <span id=\"likes\">\n                                    {this.state.amountOfLikes}\n                                </span>\n                            </span>\n                        </Button>\n\n                        <Tooltip title={this.props.author}>\n                            <Button type=\"link\">\n                                <span style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"user\"/>\n                                </span>\n                            </Button>\n                        </Tooltip>\n\n                        <Button type=\"link\">\n                            <span style={{ display: 'flex', alignItems: 'center' }}>\n                                <Icon type=\"warning\"/>\n                            </span>\n                        </Button>\n\n                        <CopyToClipboard text={window.location.href}\n                            onCopy={() => message.success('Link copied to clipboard')}\n                        >\n                            <Button type=\"link\">\n                                <span style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"share-alt\"/>\n                                </span>\n                            </Button>\n                        </CopyToClipboard>\n\n                    </div>\n                    {this.renderSubmitHeader()}\n                    <Divider/>\n                    {this.renderChapterRadios()}\n                </div>\n\n                {this.getComments()}\n\n            </div>\n    );\n  }\n}\n\nexport default StoryModalContent","import React, { Component } from 'react'\nimport StoryModalContent from './StoryModalContent'\nimport { Modal, Button, Icon, Tag } from 'antd';\nimport { connect } from 'react-redux'\nimport { getFirestore } from 'redux-firestore'\nimport '../../App.css'\n\nclass StoryModal extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: true,\n            loaded: false,\n            error: false\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n        this.goBack = this.goBack.bind(this);\n    }\n\n    componentDidMount(){\n\n        var that = this;\n        var rawPath = window.location.pathname.split('/')\n        var storyId = rawPath.pop()\n\n        getFirestore().collection('stories').doc(storyId).get()\n        .then(function(doc){\n            that.setState({\n                data: doc.data()\n            })\n        }).catch(function(error){\n            that.setState({\n                error: true\n            })\n        })\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(prevState.data !== this.state.data){\n            this.setState({\n                loaded: true\n            })\n        }    \n    }\n     \n    goBack(){\n        // if(document.referrer.substring(0,7) == 'cowrite'){\n        //     this.props.history.goBack();\n        // }else{\n        //     window.location.href = 'cowrite.io/stories/category/' + this.state.data.genre;\n        // }\n        this.props.history.goBack();\n    }     \n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        console.log(document.referrer.substring(0,12))\n        if(document.referrer.substring(0,12) === 'http://local'){\n            this.props.history.push({\n                pathname: '/stories/' + this.props.location.state.query.toLowerCase(),\n                state: { \n                    query: this.props.location.state.query,\n                    yposition: this.props.location.state.yposition\n                }\n            })\n        }else{\n            this.props.history.push({\n                pathname: '/stories/all',\n                state: { \n                    query: 'all',\n                }\n            })\n        }\n    }\n    \n    render() {\n        if(this.state.loaded){\n\n            var data = this.state.data\n            var rawPath = window.location.pathname.split('/')\n            var storyId = rawPath.pop()\n\n            return (\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    style={{ top: 0, padding: 0 }}\n                    className={\"story-modal\"}\n                >\n                    <StoryModalContent\n                        id = {storyId}\n                        auth = {this.props.auth}\n                        title = {data.title}\n                        author = {data.author}\n                        authorPic = {data.authorPic}\n                        genre = {data.genre}\n                        currentChapter = {data.currentChapter}\n                        chapters = {data.chapters}\n                        prompt = {data.prompt}\n                        createdAt = {data.createdAt}\n                        chapter2 = {data.chapter2}\n                        chapter3 = {data.chapter3}\n                        chapter4 = {data.chapter4}\n                        likes = {data.likes}\n                        numberOfChapters = {data.numberOfChapters}\n                        selectedChapters = {data.selectedChapters}\n                        complete= {data.complete}\n                    />      \n                </Modal>\n            );\n        }else{\n            return(\n                <Modal \n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null} \n                    className={\"story-modal\"}\n                >\n                </Modal>\n            )\n        }\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\n\nexport default connect(mapStateToProps)(StoryModal);","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport Home from './Components/Layout/Home'\nimport Nav from './Components/Layout/Nav'\nimport StoryModal from './Components/Posts/StoryModal'\nimport { BackTop, Layout } from 'antd';\nimport './App.css'\n\nconst App = () => (\n    <Router>\n        <Layout>\n        <div>\n            <Nav/>\n            <BackTop/>\n            {/* Redirect user to prompts during inital load */}\n            <Route exact path=\"/\" render={() => (\n                <Redirect to=\"/prompts/all\"/>\n            )}/>\n            <Route path=\"/prompts/all\" component={Home}/>\n            <Route path=\"/prompts/comedy\" component={Home}/>\n            <Route path=\"/prompts/horror\" component={Home}/>\n            <Route path=\"/prompts/fantasy\" component={Home}/>\n            <Route path=\"/prompts/romance\" component={Home}/>\n            <Route path=\"/prompts/scifi\" component={Home}/>\n\n            <Route path=\"/stories/all\" component={Home}/>\n            <Route path=\"/stories/comedy\" component={Home}/>\n            <Route path=\"/stories/horror\" component={Home}/>\n            <Route path=\"/stories/fantasy\" component={Home}/>\n            <Route path=\"/stories/romance\" component={Home}/>\n            <Route path=\"/stories/scifi\" component={Home}/>\n            \n            <Route path=\"/profile\" component={Home}/>\n            <Route path=\"/story/:id\" component={StoryModal}/>\n        </div>\n        </Layout>\n    </Router>\n)\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const initState = {\n    authError: null\n}\nconst authReducer = (state = initState, action) => {\n    switch(action.type){\n        case 'LOGIN_ERROR':\n            console.log('login error');\n\n            return {\n                ...state,\n                authError: 'Login Failed'\n            }\n            \n        case 'LOGIN_SUCCESS':\n            console.log('login success');\n\n            return {\n                ...state,\n                authError: null\n            }\n        \n        case 'SIGNOUT_SUCCESS':\n            console.log('signout success');\n            return state\n\n        case 'SIGNUP_SUCCESS':\n            console.log('signup success');\n            return {\n                ...state,\n                authError: null\n            }\n        case 'SIGNUP_ERROR':\n                console.log('signup error');\n                return {\n                    ...state,\n                    authError: action.err.message\n                }\n        case 'NAME_TAKEN':\n                console.log('username taken');\n                return {\n                    ...state,\n                    authError: 'Name is already taken'\n                }\n        default:\n            return state;\n    }\n}\n\nexport default authReducer","const initState = {\n    posts: [\n        {id: 1, title: 'Greek God Revenge', content: 'Youre an ancient Greek man coming home from 4 months of war to find your wife 3 months pregnant. Now youve embarked on a solemn quest: to punch Zeus in the face.'},\n        {id: 2, title: 'Where Is My Super Suit', content: 'The Suit is powerfull. A mech for some, body armor for others, always unique to each person who wore it. Those who wear it, hear the words \"not original user, booting basic mode\" As a joke, your sergeant gives you The Suit and the first thing you hear is: \"User detected: Welcome back, Commander\"'},\n        {id: 3, title: 'School Reunion', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'},\n        {id: 4, title: 'Seth The Killer', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'},\n        {id: 5, title: 'School Reunion', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'}\n    ]\n}\nconst postReducer = (state = initState, action) => {\n    switch(action.type){\n        case 'CREATE_POST':\n            console.log('created post', action.post)\n            return state\n        case 'CREATE_POST_ERR':\n            console.log('create project error', action.err)\n            return state\n        default: \n            return state\n    }\n}\n\nexport default postReducer","import authReducer from './authReducer'\nimport postReducer from './postReducer'\nimport { combineReducers } from 'redux'\nimport { firestoreReducer } from 'redux-firestore'\nimport { firebaseReducer } from 'react-redux-firebase'\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    post: postReducer,\n    firestore: firestoreReducer,\n    firebase: firebaseReducer\n});\n\nexport default rootReducer","import firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\n// Your web app's Firebase configuration\nvar firebaseConfig = {\n    apiKey: \"AIzaSyC-1qE_pSDh3kKMmLI3fA4iErj4qGuZrgw\",\n    authDomain: \"writingrelay.firebaseapp.com\",\n    databaseURL: \"https://writingrelay.firebaseio.com\",\n    projectId: \"writingrelay\",\n    storageBucket: \"writingrelay.appspot.com\",\n    messagingSenderId: \"549963888326\",\n    appId: \"1:549963888326:web:65281ab754acef09\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.firestore().settings({ timestampsInSnapshots: true })\n\nexport default firebase","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport rootReducer from './Store/Reducers/rootReducer'\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { reduxFirestore, getFirestore } from 'redux-firestore'\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase'\nimport fbConfig from './Config/fbConfig'\n\nconst store = createStore(rootReducer, \n    compose(\n        applyMiddleware(thunk.withExtraArgument({ getFirestore, getFirebase })),\n        reduxFirestore(fbConfig),\n        reactReduxFirebase(fbConfig, {attachAuthIsReady: true})\n    )\n);\nstore.firebaseAuthIsReady.then(() => {\n    ReactDOM.render(\n        <Provider store={store}>\n            <App />\n        </Provider>, \n        document.getElementById('root'));\n        serviceWorker.unregister();\n})\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}