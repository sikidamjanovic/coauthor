{"version":3,"sources":["img/signupbg.png","img/logo.png","Components/Posts/ReportModal.js","Components/Posts/Prompt.js","Store/Actions/postActions.js","Components/Posts/NewPostModal.js","Components/Common/HelpModal.js","Components/Layout/PromptsFeedHeader.js","Components/Layout/PromptsFeed.js","Components/Posts/StoryCard.js","Components/Layout/StoriesFeedHeader.js","Components/Layout/StoriesFeed.js","Components/Layout/Sidebar.js","Components/Profile/ProfilePostFeed.js","Components/Profile/DisplayPicUploader.js","Components/Profile/UserProfile.js","Components/Layout/Footer.js","Components/Layout/Home.js","Components/Common/AccountDropdown.js","Components/Common/Notifications.js","Components/Auth/SignedInLinks.js","Store/Actions/authActions.js","Components/Auth/SignInModalDetails.js","Components/Auth/SignInModal.js","Components/Auth/SignUpModalDetails.js","Components/Auth/SignUpModal.js","Components/Auth/SignedOutLinks.js","Components/Layout/Nav.js","Components/Posts/StoryComment.js","Components/Posts/Comments.js","Components/Posts/SubmitChapter.js","Components/Posts/SelectedComment.js","Components/Posts/StoryModalContent.js","Components/Posts/StoryModal.js","App.js","serviceWorker.js","Store/Reducers/authReducer.js","Store/Reducers/postReducer.js","Store/Reducers/rootReducer.js","Config/fbConfig.js","index.js"],"names":["module","exports","ReportModal","props","showModal","setState","visible","handleCancel","e","onChange","value","target","handleReport","text","state","message","error","length","getFirestore","collection","doc","set","postId","id","type","category","reason","success","handleTextChange","bind","TextArea","this","component","onClick","style","display","alignItems","onCancel","onOk","okText","padding","marginBottom","title","marginTop","Group","placeholder","rows","Component","firebase","require","Prompt","likes","amountOfLikes","userLiked","photoURL","like","delete","getAvatar","postedTime","time","hoursLeft","Math","abs","Date","toDate","minutesLeft","tooltipTitle","background","border","color","marginRight","round","i","displayName","liked","auth","className","theme","size","key","isEmpty","update","firestore","FieldValue","arrayUnion","likeCount","increment","arrayRemove","warning","that","author","get","then","exists","undefined","data","catch","onConfirm","cancelText","Meta","actions","renderHeart","to","pathname","deletePromptButton","avatar","src","icon","getTime","description","genre","content","connect","posts","ordered","NewPostModal","handleChange","toString","remainingCharacters","handleSelectChange","handleRadioChange","numberOfChapters","handleSubmit","preventDefault","validateForm","createPost","Option","footer","onSubmit","Item","for","opacity","buttonStyle","Button","showSearch","width","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","htmlType","React","dispatch","post","getState","getFirebase","today","add","currentUser","authorPic","createdAt","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","docRef","uid","err","HelpModal","handleClose","slide","next","previous","carousel","createRef","prev","backgroundColor","ref","node","dots","effect","textAlign","paddingBottom","renderButtons","PromptsFeedHeader","flexDirection","step","PromptsFeed","sort","loaded","handleSort","handleSortOrder","prevProps","prevState","map","height","justifyContent","order","sortOrder","loggedIn","query","showArrow","defaultValue","getSortOrder","getPrompts","compose","firestoreConnect","getAll","sortBy","orderBy","where","StoryCard","diffMins","current","currentChapter","created","now","chapter2","chapter3","chapter4","final","onCopy","hoverable","yposition","complete","getTimeLeft","StoriesFeedHeader","StoriesFeed","listenToScroll","window","scrollY","stories","addEventListener","removeEventListener","scrollTo","y","top","behavior","prompt","chapters","chapter1","getStories","Sidebar","mobile","updateWidth","getWidth","renderMenu","innerWidth","SubMenu","handleClick","position","overflowY","overflowX","paddingTop","left","zIndex","selectedKeys","location","defaultOpenKeys","openKeys","mode","styles","IconStyle","fontSize","ProfilePostFeed","getPosts","storeAs","DisplayPicUploader","fileSelectedHandler","event","fileUploadHandler","files","file","user","userName","uploadTask","storage","put","on","snapshot","TaskState","PAUSED","RUNNING","console","log","getDownloadURL","downloadURL","updateProfile","reload","margin","visibility","UserProfile","selected","isOwnProfile","userExists","deleteProfile","doesUserExist","split","path","users","querySnapshot","docs","forEach","push","shape","marginLeft","showRelevantFeed","renderProfile","withRouter","Footer","Home","getQuery","getScrollPosition","hasOwnProperty","substr","condition","slice","xs","md","xl","updateQuery","offset","AccountDropdown","menu","signOut","overlay","trigger","Notifications","toggleMenu","closeMenu","newNotifs","resetNotifs","notifications","menuItems","minHeight","minWidth","getIcon","notification","date","maxHeight","posted","diffMin","getNotifications","onVisibleChange","count","limit","SignedInLinks","SignInModalDetails","signIn","email","password","authError","prefix","Password","creds","credentials","signInWithEmailAndPassword","SignInModal","SignUpModalDetails","username","signUp","forceUpdate","signupbg","alt","newUser","check","createUserWithEmailAndPassword","resp","SignUpModal","SignedOutLinks","links","logo","StoryComment","expanded","deleteSubmission","expandComment","getLikeAmount","diff","hours","overflow","isOwnSubmission","expandStyle","comment","datetime","Comments","submissions","getSubmissions","updateSort","updateSortOrder","header","getCommentSort","itemLayout","dataSource","renderItem","item","locale","emptyText","renderSortArrow","timeLeft","subs","getComments","subcollections","chapter","SubmitChapter","closePanel","submitChapter","autosize","minRows","maxRows","submission","SelectedComments","paddingRight","StoryModalContent","selectedChapter","panelOpen","submissionsLoaded","userSubmitted","updateCommentSort","updateCommentSortOrder","openSubmitPanel","closeSubmitPanel","hasUserSubmitted","selectedChapters","radio","SelectedComment","enabled","disabled","getEnabledRadios","getDisabledRadios","equalAmountOfLikes","a","b","endSubmissionProcess","getTopSubmission","topSubmission","href","paddingLeft","align","renderSubmitButton","renderModalButtons","renderSubmitHeader","renderChapterRadios","StoryModal","goBack","storyId","pop","history","App","exact","render","Boolean","hostname","match","initState","authReducer","action","postReducer","rootReducer","combineReducers","firestoreReducer","firebaseReducer","fb","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","settings","timestampsInSnapshots","store","createStore","applyMiddleware","thunk","withExtraArgument","reduxFirestore","fbConfig","reactReduxFirebase","attachAuthIsReady","firebaseAuthIsReady","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6FAAAA,EAAOC,QAAU,IAA0B,sC,kBCA3CD,EAAOC,QAAU,s7N,ghBCuHFC,E,YAjHX,WAAYC,GAAO,IAAD,8BACd,4CAAMA,KAWVC,UAAY,WACV,EAAKC,SAAS,CACZC,SAAS,KAdK,EAkBlBC,aAAe,SAAAC,GACb,EAAKH,SAAS,CACZC,SAAS,KApBK,EAwBlBG,SAAW,SAAAD,GACP,EAAKH,SAAS,CACZK,MAAOF,EAAEG,OAAOD,SA1BJ,EA8BlBE,aAAe,SAAAJ,GACX,IAAIK,EAAO,EAAKC,MAAMD,KAClBH,EAAQ,EAAKI,MAAMJ,MAEV,OAAVA,EACCK,EAAA,EAAQC,MAAM,wBACO,IAAhBH,EAAKI,OACVF,EAAA,EAAQC,MAAM,6BAEdE,yBAAeC,WAAW,WAAWC,MAAMC,IAAI,CAC3CC,OAAQ,EAAKnB,MAAMoB,GACnBC,KAAM,EAAKrB,MAAMqB,KACjBC,SAAUf,EACVgB,OAAQb,IAEZ,EAAKR,SAAS,CACVC,SAAS,IACX,WACmB,UAAd,EAAKkB,KACJT,EAAA,EAAQY,QAAQ,sDAEhBZ,EAAA,EAAQY,QAAQ,4DAnDd,EAyDlBC,iBAAmB,SAAApB,GACf,EAAKH,SAAS,CACVQ,KAAML,EAAEG,OAAOD,SAzDnB,EAAKI,MAAQ,CACTR,SAAS,EACTI,MAAO,KACPG,KAAM,IAEV,EAAKJ,SAAW,EAAKA,SAASoB,KAAd,gBAChB,EAAKjB,aAAe,EAAKA,aAAaiB,KAAlB,gBACpB,EAAKD,iBAAmB,EAAKA,iBAAiBC,KAAtB,gBATV,E,sEA+DR,IACEC,EADH,IACGA,SACR,OACI,kBAAC,WAAD,KAC8B,SAAzBC,KAAK5B,MAAM6B,UACR,4BAAQT,GAAG,gBAAgBU,QAASF,KAAK3B,WACrC,uBAAMoB,KAAK,aAEf,uBAAQA,KAAK,OAAOS,QAASF,KAAK3B,WAC9B,0BAAM8B,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMZ,KAAK,cAIvB,uBACIlB,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKxB,aACf+B,KAAMP,KAAKnB,aACX2B,OAAO,UAEP,uBAAKL,MAAO,CAAEM,QAAS,SACnB,uBAAKN,MAAO,CAAEO,aAAc,SACxB,uCAAaV,KAAK5B,MAAMuC,MAAxB,MAEJ,uBAAKR,MAAO,CAAES,UAAW,OAAQF,aAAc,SAC3C,sBAAOG,MAAP,CAAanC,SAAUsB,KAAKtB,SAAUC,MAAOqB,KAAKjB,MAAMJ,OACpD,uBAAOA,MAAM,YAAb,oBACA,uBAAOA,MAAM,WACY,UAApBqB,KAAK5B,MAAMqB,KACR,cACA,gBAGR,uBAAOd,MAAM,SAAb,WAGR,2BACI,kBAACoB,EAAD,CACIe,YAAY,SACZC,KAAM,EACNrC,SAAUsB,KAAKH,2B,GAxGrBmB,aCEtBC,EAAWC,EAAQ,IAEjBC,E,YAEF,WAAY/C,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTqC,MAAO,GACPC,cAAe,EACfC,WAAW,EACXC,SAAU,MAEd,EAAKC,KAAO,EAAKA,KAAK1B,KAAV,gBACZ,EAAK2B,OAAS,EAAKA,OAAO3B,KAAZ,gBACd,EAAKwB,UAAY,EAAKA,UAAUxB,KAAf,gBACjB,EAAK4B,UAAY,EAAKA,UAAU5B,KAAf,gBAXH,E,iFAedE,KAAK1B,SAAS,CACV+C,cAAerB,KAAK5B,MAAMiD,gBAE9BrB,KAAKsB,YACLtB,KAAK0B,c,gCAIL,IAAIC,EAAa3B,KAAK5B,MAAMwD,KAC5B,GAAGD,EAAW,CAEV,IACIE,EAAY,GADAC,KAAKC,IAAI,IAAIC,KAASL,EAAWM,UAAY,KAEzDC,EAA0B,GAAZL,EACZM,EAAe,sDAErB,GAAGN,EAAY,EACX,OACI,uBAASlB,MAAOwB,GACZ,uBAAKhC,MAAO,CACRiC,WAAY,OACZC,OAAQ,oCACRC,MAAO,YAEP,uBAAMnC,MAAO,CAAEoC,YAAa,OAAQ9C,KAAK,iBACxCqC,KAAKU,MAAMX,GAAa,MAInC,GAAGA,EAAY,EACjB,OACI,uBAASlB,MAAOwB,GACZ,uBAAMhC,MAAO,CAAEoC,YAAa,OAAQ9C,KAAK,iBACzC,uBAAK6C,MAAM,WAAW,GAAKR,KAAKU,MAAMN,GAAe,QAGxDA,GAAe,GAEpBlC,KAAKyB,Y,+BAMbtC,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMoB,IAAIiC,SACtD,IAAK,IAAIgB,EAAI,EAAGA,EAAIzC,KAAK5B,MAAMgD,MAAMlC,OAAQuD,IACzCtD,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMgD,MAAMqB,GAAGC,aAAaC,MAAMtD,IAAIW,KAAK5B,MAAMoB,IAAIiC,W,kCAMrG,IADA,IAAML,EAAQpB,KAAK5B,MAAMgD,MAChBqB,EAAI,EAAGA,EAAIrB,EAAMlC,OAAQuD,IAC3BrB,EAAMqB,KAAOzC,KAAK5B,MAAMwE,KAAKF,YAC5B1C,KAAK1B,SAAS,CACVgD,WAAW,IAGftB,KAAK1B,SAAS,CACVgD,WAAW,M,oCAOvB,OAAGtB,KAAKjB,MAAMuC,UAEN,0BAAMuB,UAAU,gBACZ,uBACIpD,KAAK,QACLqD,MAAM,SACNC,KAAK,QACLC,IAAI,UAER,0BAAMxD,GAAG,SACJQ,KAAKjB,MAAMsC,gBAMpB,0BAAMwB,UAAU,SACZ,uBACIpD,KAAK,QACLuD,IAAI,UAER,0BAAMxD,GAAG,SACJQ,KAAKjB,MAAMsC,kB,8BAQI,IAA5BrB,KAAK5B,MAAMwE,KAAKK,SACY,IAAzBjD,KAAKjB,MAAMuC,WACVtB,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAE9ClC,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CACzD9B,MAAOH,EAASkC,UAAUC,WAAWC,WACjCrD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,EAASkC,UAAUC,WAAWG,UAAU,OAGvDvD,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAG9ClC,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CACzD9B,MAAOH,EAASkC,UAAUC,WAAWI,YACjCxD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,EAASkC,UAAUC,WAAWG,WAAW,MAI5DvE,EAAA,EAAQyE,QAAQ,6C,kCAKpB,IAAIC,EAAO1D,KACXb,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMuF,QAAQC,MACzDC,MAAK,SAASxE,GACPA,EAAIyE,YACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,OAIlBvC,EAAA,EAAQC,MAAM,wBAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,0BAA2BA,Q,2CAK7C,OAAIe,KAAK5B,MAAMwE,KAAKK,QA2BZ,uBAAStC,MAAM,sBACX,kBAAC,EAAD,CACIA,MAAOX,KAAK5B,MAAMuC,MAClBlB,KAAK,SACLD,GAAIQ,KAAK5B,MAAMoB,GACfS,UAAU,UA/BnBD,KAAK5B,MAAMwE,KAAKF,cAAgB1C,KAAK5B,MAAMuF,OAEtC,uBAAShD,MAAM,iBACX,uBACIA,MAAM,mCACNuD,UAAWlE,KAAKyB,OAChBjB,OAAO,MACP2D,WAAW,MAEX,4BAAQ3E,GAAG,iBACP,uBAAMC,KAAK,SAASuD,IAAI,cAOpC,uBAASrC,MAAM,sBACX,4BAAQnB,GAAG,iBACP,uBAAMC,KAAK,UAAUuD,IAAI,gB,+BAmBvC,IACEoB,EADH,IACGA,KACR,OACI,uBACIC,QAAS,CACL,4BAAQ7E,GAAG,gBAAgBU,QAAUF,KAAKwB,MACrCxB,KAAKsE,eAEV,uBAAS3D,MAAOX,KAAK5B,MAAMuF,QACvB,4BAAQnE,GAAG,iBACP,kBAAC,IAAD,CAAS+E,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEhC,uBAAMlE,KAAK,OAAOuD,IAAI,YAIlChD,KAAKyE,uBAGT,kBAACL,EAAD,CACIM,OACI,kBAAC,IAAD,CAASH,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEhC,uBAAShD,MAAOX,KAAK5B,MAAMuF,QACE,OAAxB3D,KAAKjB,MAAMwC,SACR,uBAAQoD,IAAK3E,KAAKjB,MAAMwC,WACxB,uBAAQpB,MAAO,CAAEiC,WAAY,UAAWE,MAAO,WAAasC,KAAK,WAKjFjE,MACI,0BAAMnB,GAAG,mBACL,0BAAMA,GAAG,cAAcQ,KAAK5B,MAAMuC,OAClC,uBAAKR,MAAO,CACRiC,WAAY,OACZC,OAAQ,oCACRC,MAAO,YAHX,UAKCtC,KAAK6E,WAGdC,YACI,6BACI,+BAAS9E,KAAK5B,MAAM2G,OACpB,6BAAS,6BACT,0BAAMvF,GAAG,gBAAiBQ,KAAK5B,MAAM4G,SACrC,qC,GA9PPhE,aAgRNiE,eARS,SAAClG,EAAOX,GAC5B,MAAO,CACH8G,MAAOnG,EAAMoE,UAAUgC,QAAQD,MAC/BtC,KAAM7D,EAAMkC,SAAS2B,QAKdqC,CAAyB9D,G,2nBCtRjC,I,QCGDiE,E,YAEF,WAAYhH,GAAO,IAAD,8BACd,4CAAMA,KA2BViH,aAAe,SAAC5G,GACZ,GAAmB,YAAhBA,EAAEG,OAAOY,GAAiB,CACzB,IAAIwF,EAAUvG,EAAEG,OAAOD,MAAM2G,WAC7B,EAAKhH,SAAS,CACViH,oBAAqB,IAAMP,EAAQ9F,SAG3C,EAAKZ,SAAL,eACKG,EAAEG,OAAOY,GAAKf,EAAEG,OAAOD,SApCd,EAwClB6G,mBAAqB,SAAC/G,GAClB,EAAKH,SAAS,CACVyG,MAAOtG,KA1CG,EA8ClBgH,kBAAoB,SAAChH,GACjB,EAAKH,SAAS,CACVoH,iBAAkBjH,EAAEG,OAAOD,SAhDjB,EAoDlBgH,aAAe,SAAClH,GACZA,EAAEmH,iBACF,EAAKC,aAAa,EAAK9G,QApDvB,EAAKA,MAAQ,CACT4B,MAAO,GACPqE,QAAS,GACTD,MAAO,GACP3D,MAAO,GACP7C,SAAS,EACTgH,oBAAqB,IACrBG,iBAAkB,KAClBjG,KAAM,UAEV,EAAKjB,aAAe,EAAKA,aAAasB,KAAlB,gBACpB,EAAKzB,UAAY,EAAKA,UAAUyB,KAAf,gBAbH,E,yEAiBdE,KAAK1B,SAAS,CACVC,SAAS,M,qCAKbyB,KAAK1B,SAAS,CACVC,SAAS,M,mCAiCJQ,GACT,OAAGA,EAAM4B,MAAMzB,OAAS,GAAKH,EAAMiG,QAAQ9F,OAAS,GACzCF,EAAA,EAAQC,MAAM,wCACO,IAAvBF,EAAMgG,MAAM7F,OACVF,EAAA,EAAQC,MAAM,4BACW,OAA3BF,EAAM2G,iBACJ1G,EAAA,EAAQC,MAAM,oCAChBF,EAAMwG,oBAAsB,EAC1BvG,EAAA,EAAQC,MAAM,wBAErBe,KAAK5B,MAAM0H,WAAW/G,QACtBiB,KAAKxB,kB,+BAIH,IACEuB,EADH,IACGA,SACAgG,EAFH,IAEGA,OACR,OACI,6BACI,uBACI7F,QAASF,KAAK3B,UACdoB,KAAK,WAEL,yBAAKU,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACvC,kBAAC,IAAD,CAAQF,MAAO,CAAEoC,YAAa,SAC7BvC,KAAK5B,MAAMuC,QAIpB,uBACIkC,UAAU,aACVtE,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKxB,aACfwH,OAAQ,MAIZ,yBAAKnD,UAAU,kBAAkB1C,MAAO,CAAEM,QAAS,SAC/C,0CACA,uBAAMwF,SAAUjG,KAAK2F,aAAc9C,UAAU,cACzC,sBAAMqD,KAAN,KACI,2BAAOC,IAAI,SACP,yCAEJ,uBACI3G,GAAG,QACHd,SAAUsB,KAAKqF,gBAGvB,sBAAMa,KAAN,CAAW/F,MAAO,CAAEO,aAAc,IAC9B,2BAAOyF,IAAI,WACP,2CAEJ,kBAACpG,EAAD,CACIP,GAAG,UACHd,SAAUsB,KAAKqF,aACftE,KAAM,KAGd,0BACIZ,MACIH,KAAKjB,MAAMwG,oBAAsB,EAC7B,CAAEjD,MAAO,UAAW8D,QAAS,IAC7B,CAAEA,QAAS,KAGnB,+BAAQpG,KAAKjB,MAAMwG,oBAAnB,qBAEJ,6BAAS,6BACT,sBAAMW,KAAN,KACI,qDAAiC,6BACjC,sBAAOrF,MAAP,CAAawF,YAAY,QAAQ3H,SAAUsB,KAAKyF,mBAC5C,sBAAOa,OAAP,CAAc3H,MAAO,GAArB,KACA,sBAAO2H,OAAP,CAAc3H,MAAO,GAArB,KACA,sBAAO2H,OAAP,CAAc3H,MAAO,GAArB,OAGR,sBAAMuH,KAAN,KACI,uBACIK,YAAU,EACVpG,MAAO,CAAEqG,MAAO,KAChB1F,YAAY,WACZpC,SAAUsB,KAAKwF,mBACfiB,iBAAiB,WACjBC,aAAc,SAACC,EAAOC,GAAR,OACVA,EAAOxI,MAAMyI,SAASC,cAAcC,QAAQJ,EAAMG,gBAAkB,IAGxE,kBAACf,EAAD,CAAQpH,MAAM,UAAd,UACA,kBAACoH,EAAD,CAAQpH,MAAM,UAAd,UACA,kBAACoH,EAAD,CAAQpH,MAAM,WAAd,WACA,kBAACoH,EAAD,CAAQpH,MAAM,SAAd,UACA,kBAACoH,EAAD,CAAQpH,MAAM,SAAd,WAGR,uBAAQc,KAAK,UAAUuH,SAAS,UAC5B,uBAAMvH,KAAK,SADf,uB,GA3JGwH,IAAMjG,WAmLlBiE,eAZS,SAAClG,GACrB,MAAO,CACH6D,KAAM7D,EAAMkC,SAAS2B,SAIF,SAACsE,GACxB,MAAO,CACHpB,WAAY,SAACqB,GAAD,OAAUD,EDlLJ,SAACC,GACvB,OAAO,SAACD,EAAUE,EAAX,GAAwD,IAAjCC,EAAgC,EAAhCA,YAEpBlE,GAAYhE,EAFwC,EAAnBA,gBAGnCmI,EAAQ,IAAItF,KAChBmB,EAAU/D,WAAW,SAASmI,IAA9B,KACOJ,EADP,CAEI7D,UAAW,EACXK,OAAQ0D,IAAczE,OAAO4E,YAAY9E,YACzC+E,UAAWJ,IAAczE,OAAO4E,YAAYjG,SAC5CmG,UAAW,IAAI1F,KACfJ,KAAM0F,EAAMK,cAAc,KAAKL,EAAMM,WAAW,GAAG,IAAIN,EAAMO,UAAU,MAAMP,EAAMQ,WAAa,IAAMR,EAAMS,aAAe,IAAMT,EAAMU,gBACxInE,MAAK,SAASoE,GACb9E,EAAU/D,WAAW,SAASC,IAAI4I,EAAOzI,IAAIJ,WAAW,SAASC,IAAIgI,IAAczE,OAAO4E,YAAY9E,aAAapD,IAAI,CACnH4I,IAAKb,IAAczE,OAAO4E,YAAYU,SAE3CrE,MAAK,WACJqD,EAAS,CAAEzH,KAAM,cAAe0H,YACjClD,OAAM,SAACkE,GACNjB,EAAS,CAAEzH,KAAM,uBAAwB0I,WAE7CnJ,EAAA,EAAQY,QAAQ,iCC6JekG,CAAWqB,QAInClC,CAA6CG,GCvC7CgD,E,YA3IX,WAAYhK,GAAO,IAAD,8BACd,4CAAMA,KAYVC,UAAY,WACR,EAAKC,SAAS,CACVC,SAAS,KAfC,EAmBlB8J,YAAc,SAAA5J,GACV,EAAKH,SAAS,CACVC,SAAS,KAnBb,EAAKQ,MAAQ,CACTR,SAAS,EACT+J,MAAO,GAEX,EAAKjK,UAAY,EAAKA,UAAUyB,KAAf,gBACjB,EAAKuI,YAAc,EAAKA,YAAYvI,KAAjB,gBACnB,EAAKyI,KAAO,EAAKA,KAAKzI,KAAV,gBACZ,EAAK0I,SAAW,EAAKA,SAAS1I,KAAd,gBAChB,EAAK2I,SAAWxB,IAAMyB,YAVR,E,oEA0Bd1I,KAAKyI,SAASF,OACdvI,KAAK1B,SAAS,CACVgK,MAAOtI,KAAKjB,MAAMuJ,MAAQ,M,iCAK9BtI,KAAKyI,SAASE,OACd3I,KAAK1B,SAAS,CACVgK,MAAOtI,KAAKjB,MAAMuJ,MAAQ,M,sCAK9B,OAAwB,IAArBtI,KAAKjB,MAAMuJ,MAEN,uBAAQpI,QAASF,KAAKuI,MAAtB,OAEI,uBAAM9I,KAAK,WAGO,IAArBO,KAAKjB,MAAMuJ,MAEZ,kBAAC,WAAD,KACI,uBAAQpI,QAASF,KAAKwI,SAAUrI,MAAO,CAAEoC,YAAa,QAClD,uBAAM9C,KAAK,SADf,QAIA,uBAAQS,QAASF,KAAKuI,MAAtB,OAEI,uBAAM9I,KAAK,YAMnB,uBAAQS,QAASF,KAAKwI,SAAUrI,MAAO,CAAEoC,YAAa,QAClD,uBAAM9C,KAAK,SADf,U,+BAQF,IAAD,OACL,OACI,6BACI,uBAAQS,QAASF,KAAK3B,WAClB,uBAAMoB,KAAK,cAEf,uBACIlB,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKqI,YACfrC,OAAQ,KACR7F,MAAO,CAAEyI,gBAAiB,YAE9B,uBACIC,IAAK,SAAAC,GAAI,OAAK,EAAKL,SAAWK,GAC9BC,MAAM,EACNlG,UAAU,gBACVmG,OAAO,QAEP,6BACI,+CACA,6BACA,yEAC+C,6BAD/C,oBAEqB,oCAFrB,uCAEwE,6BAFxE,iCAKA,6BACA,kBAAC,EAAD,CAAcrI,MAAM,gBAExB,6BACI,+CACA,6BACA,wEAC8C,6BAD9C,6DAIA,6BACA,kBAAC,IAAD,CAAS4D,GAAI,CACTC,SAAU,iBAEV,uBAAQ/E,KAAK,UAAUS,QAASF,KAAKqI,aAArC,iBAKR,6BACI,6CACA,4GAGA,6BACA,kBAAC,IAAD,CAAS9D,GAAI,CACTC,SAAU,sBAEV,uBAAQ/E,KAAK,UAAUS,QAASF,KAAKqI,aAArC,uBAMZ,yBAAKlI,MAAO,CAAE8I,UAAW,SAAUC,cAAe,OAAQN,gBAAiB,YACtE5I,KAAKmJ,uB,GApIFnI,aCYToI,E,iLAbP,OACI,6BACI,yBAAK5J,GAAG,oBACJ,yBAAKW,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,MAAOhJ,WAAY,SAAUK,aAAc,SACrF,wBAAIP,MAAO,CAAEoC,YAAa,OAAQ7B,aAAc,IAAhD,WACA,kBAAC,EAAD,CAAW4I,KAAM,W,GAPTtI,aCO1BuI,E,YAEF,WAAYnL,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAM,CACPyK,KAAM,MACNC,QAAQ,GAEZ,EAAKC,WAAa,EAAKA,WAAW5J,KAAhB,gBAClB,EAAK6J,gBAAkB,EAAKA,gBAAgB7J,KAArB,gBAPT,E,wEAUPnB,GACP,OAAOqB,KAAK5B,MAAMoL,KAAK7K,K,0CAInBqB,KAAK5B,MAAM8G,OACXlF,KAAK1B,SAAS,CACVmL,QAAQ,M,yCAKDG,EAAWC,GACvBD,EAAU1E,QAAUlF,KAAK5B,MAAM8G,OAC9BlF,KAAK1B,SAAS,CACVmL,QAAQ,M,mCAKP,IACDvE,EAAUlF,KAAK5B,MAAf8G,MACR,OAAGlF,KAAKjB,MAAM0K,OACPzJ,KAAK5B,MAAM8G,MAAMhG,OAAS,EAErBgG,EAAM4E,KAAI,SAAC3C,EAAK1E,GAAN,OACF,uBAAKjD,GAAG,UACJ,kBAAC,EAAD,CACIwD,IAAKmE,EAAK3H,GACVA,GAAI2H,EAAK3H,GACTmB,MAAOwG,EAAKxG,MACZoE,MAAOoC,EAAKpC,MACZC,QAASmC,EAAKnC,QACdrB,OAAQwD,EAAKxD,OACb8D,UAAWN,EAAKM,UAAYN,EAAKM,UAAY,KAC7C7F,KAAMuF,EAAKO,UACXtG,MAAO+F,EAAK/F,MACZC,cAAe8F,EAAK/F,MAAMlC,aAO1C,yBAAKiB,MAAO,CAAE4J,OAAQ,QAAS3J,QAAS,OAAQ4J,eAAgB,SAAU3J,WAAY,WAClF,uBAAGF,MAAO,CAAE8I,UAAW,WAAvB,uBACwB,6BAAS,6BAC5BjJ,KAAK5B,MAAMwE,KAAKK,QAAU,GAAK,kBAAC,EAAD,CAActC,MAAM,4BAOhE,yBAAKR,MAAO,CAAEC,QAAS,OAAQQ,UAAW,QAASoJ,eAAgB,WAC/D,uBAAMjH,KAAK,a,qCAQvB,MAAa,SADD/C,KAAK5B,MAAM6L,MAEZ,uBAAQ/J,QAASF,KAAK2J,iBAAiB,uBAAMlK,KAAK,UAElD,uBAAQS,QAASF,KAAK2J,iBAAiB,uBAAMlK,KAAK,U,wCAK7D,OAAOO,KAAK5B,MAAM8L,c,+BAGZ,IACEnE,EADH,IACGA,OACR,OACI,6BACI,2BACI,kBAAC,EAAD,CAAmBoE,UAAUnK,KAAK5B,MAAMwE,KAAKK,UAC7C,yBAAKzD,GAAG,eACJ,yBAAKA,GAAG,wBACJ,2BACI,sBAAY0G,KAAZ,gBAGA,sBAAYA,KAAZ,KACKlG,KAAK5B,MAAMgM,SAIxB,6BACI,uBAAQC,WAAW,EAAOC,aAAa,YAAYnK,MAAO,CAAEqG,MAAO,KAAO9H,SAAUsB,KAAK0J,YACrF,kBAAC3D,EAAD,CAAQpH,MAAM,YAAYwB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WAC5D,uBAAMZ,KAAK,eAAeU,MAAO,CAAEoC,YAAa,SADpD,OAIA,kBAACwD,EAAD,CAAQpH,MAAM,YAAYwB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WAC5D,uBAAMZ,KAAK,OAAOU,MAAO,CAAEoC,YAAa,SAD5C,SAMPvC,KAAKuK,gBAEV,6BACKvK,KAAKwK,oB,GAtHJxJ,aAqIXyJ,cACXxF,aARoB,SAAClG,EAAOX,GAC5B,MAAO,CACH8G,MAAOnG,EAAMoE,UAAUgC,QAAQD,MAC/BtC,KAAM7D,EAAMkC,SAAS2B,SAMzB8H,4BAAkB,SAAAtM,GAAU,IAEhBuM,EAAiCvM,EAAjCuM,OAAQP,EAAyBhM,EAAzBgM,MAAOQ,EAAkBxM,EAAlBwM,OAAQX,EAAU7L,EAAV6L,MAE/B,OAAc,IAAXU,EACQ,CACH,CAAEvL,WAAY,QACZyL,QAAS,CAACD,EAAQX,KAIjB,CAAC,CACJ7K,WAAY,QACZyL,QAAS,CAACD,EAAQX,GAClBa,MAAO,CAAC,QAAS,KAAMV,QAhBxBK,CAqBblB,G,mBC5JEtI,GAAWC,EAAQ,IAoSR6J,G,YAhSX,WAAY3M,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTqC,MAAO,GACPC,cAAe,EACfC,WAAW,EACXC,SAAU,MAEd,EAAKC,KAAO,EAAKA,KAAK1B,KAAV,gBACZ,EAAKwB,UAAY,EAAKA,UAAUxB,KAAf,gBACjB,EAAK4B,UAAY,EAAKA,UAAU5B,KAAf,gBAVH,E,iFAcdE,KAAK1B,SAAS,CACV+C,cAAerB,KAAK5B,MAAMgD,MAAMlC,SAEpCc,KAAKsB,YACLtB,KAAK0B,c,8BAI2B,IAA5B1B,KAAK5B,MAAMwE,KAAKK,SACY,IAAzBjD,KAAKjB,MAAMuC,WACVtB,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAE9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3D9B,MAAOH,GAASkC,UAAUC,WAAWC,WACjCrD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,GAASkC,UAAUC,WAAWG,UAAU,OAGvDvD,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAG9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3D9B,MAAOH,GAASkC,UAAUC,WAAWI,YACjCxD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,GAASkC,UAAUC,WAAWG,WAAW,MAI5DvE,EAAA,EAAQyE,QAAQ,6C,kCAMpB,IADA,IAAMrC,EAAQpB,KAAK5B,MAAMgD,MAChBqB,EAAI,EAAGA,EAAIrB,EAAMlC,OAAQuD,IAAK,CACnC,GAAGrB,EAAMqB,KAAOzC,KAAK5B,MAAMwE,KAAKF,YAAY,CACxC1C,KAAK1B,SAAS,CACVgD,WAAW,IAEf,MAEAtB,KAAK1B,SAAS,CACVgD,WAAW,O,oCAOvB,OAAGtB,KAAKjB,MAAMuC,UAEN,0BAAMuB,UAAU,gBACZ,uBACIpD,KAAK,QACLqD,MAAM,SACNC,KAAK,QACLC,IAAI,UAER,0BAAMxD,GAAG,SACJQ,KAAKjB,MAAMsC,gBAMpB,0BAAMwB,UAAU,SACZ,uBACIpD,KAAK,QACLuD,IAAI,UAER,0BAAMxD,GAAG,SACJQ,KAAKjB,MAAMsC,kB,kCAQ5B,IAAIqC,EAAO1D,KACXb,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMuF,QAAQC,MACzDC,MAAK,SAASxE,GACPA,EAAIyE,YACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,OAKlBvC,EAAA,EAAQC,MAAM,wBAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,0BAA2BA,Q,oCAK7C,IAEI+L,EAFAC,EAAUjL,KAAK5B,MAAM8M,eACrBC,EAAUnL,KAAK5B,MAAMsJ,UAAUzF,SAE/BmJ,EAAM,IAAIpJ,KACVqJ,EAAW,IAAIrJ,KAAKmJ,EAAQtG,UAAY,QACxCyG,EAAW,IAAItJ,KAAKqJ,EAASxG,UAAY,QACzC0G,EAAW,IAAIvJ,KAAKsJ,EAASzG,UAAY,QACzC2G,EAAQ,IAAIxJ,KAAKuJ,EAAS1G,UAAY,QAE1C,OAAOoG,GACH,KAAK,EACDD,GAAYK,EAAWD,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYM,EAAWF,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYO,EAAWH,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYQ,EAAQJ,GAAO,IAMnC,OAAGJ,EAAW,GAEN,uBAASrK,MAAM,sCACX,uBAAKR,MAAO,CACRiC,WAAY,OACZC,OAAQ,oCACRC,MAAO,YAEP,0BAAMnC,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMF,MAAO,CAAEoC,YAAa,OAAQ9C,KAAK,iBACxCqC,KAAKU,MAAMwI,EAAW,IAAM,QAKxCA,EAAW,EAEZ,uBAASrK,MAAM,wCACX,uBAAKR,MAAO,CACRiC,WAAY,OACZC,OAAQ,oCACRC,MAAO,YAEP,0BAAMnC,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMF,MAAO,CAAEoC,YAAa,OAAQ9C,KAAK,iBACxCqC,KAAKU,MAAMwI,GAAY,eAVtC,I,+BAkBA,IACE5G,EADH,IACGA,KACR,OACQ,uBACIC,QAAS,CAEL,uBAAS1D,MAAM,cACX,4BAAQnB,GAAG,gBAAgBU,QAASF,KAAKwB,MACrC,0BAAMqB,UAAU,eACX7C,KAAKsE,iBAKlB,uBAAS3D,MAAM,eACX,kBAAC,KAAD,CAAiB7B,KAAM,oBAAsBkB,KAAK5B,MAAMoB,GACpDiM,OAAQ,kBAAMzM,EAAA,EAAQY,QAAQ,8BAE9B,4BAAQJ,GAAG,iBACP,uBAAMC,KAAK,iBAKvB,uBAASkB,MAAOX,KAAK5B,MAAMuF,QACvB,4BAAQnE,GAAG,iBACP,uBAAMC,KAAK,WAInB,uBAASkB,MAAM,sBACX,kBAAC,EAAD,CACIA,MAAOX,KAAK5B,MAAMuC,MAClBlB,KAAK,QACLD,GAAIQ,KAAK5B,MAAMoB,GACfS,UAAU,WAItByL,WAAW,GAEX,kBAAC,IAAD,CAAMnH,GAAI,CAAEC,SAAU,UAAYxE,KAAK5B,MAAMoB,GACzCT,MAAO,CACHS,GAAIQ,KAAK5B,MAAMoB,GACfoD,KAAM5C,KAAK5B,MAAMwE,KACjB+I,UAAW3L,KAAK5B,MAAMuN,UACtBvB,MAAOpK,KAAK5B,MAAMgM,SAG1B,kBAAChG,EAAD,CACIM,OACI,kBAAC,IAAD,CAASH,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEhC,uBAAShD,MAAOX,KAAK5B,MAAMuF,QACE,OAAxB3D,KAAKjB,MAAMwC,SACR,uBAAQoD,IAAK3E,KAAKjB,MAAMwC,WACxB,uBAAQpB,MAAO,CAAEiC,WAAY,UAAWE,MAAO,WAAasC,KAAK,WAKjFjE,MACI,0BAAMnB,GAAG,mBACL,0BAAMA,GAAG,cAAcQ,KAAK5B,MAAMuC,OAElC,uBAAKR,MAAO,CACRiC,WAAY,OACZC,OAAQ,oCACRC,MAAO,YAENtC,KAAK5B,MAAMwN,SACR,WAEA5L,KAAK5B,MAAM8M,iBAAmBlL,KAAK5B,MAAMsH,iBACrC,uBAAS/E,MAAM,mBACX,0BAAMR,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMZ,KAAK,OAAOU,MAAO,CAAEoC,YAAa,SACvCvC,KAAK5B,MAAM8M,eAAkB,IAAMlL,KAAK5B,MAAMsH,mBAIvD,iBAIX1F,KAAK6L,eAGd/G,YACI,6BAEI,+BACK9E,KAAK5B,MAAM2G,OAEhB,6BAAS,6BACT,0BAAMvF,GAAG,gBAAgBQ,KAAK5B,MAAM4G,SACpC,sC,GAxRRhE,aCQT8K,G,iLAbP,OACI,6BACI,yBAAKtM,GAAG,oBACJ,yBAAKW,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,MAAOhJ,WAAY,SAAUK,aAAc,SACrF,wBAAIP,MAAO,CAAEoC,YAAa,OAAQ7B,aAAc,IAAhD,WACA,kBAAC,EAAD,CAAW4I,KAAM,W,GAPTtI,aCM1B+K,G,YAEF,WAAY3N,GAAO,IAAD,8BACd,4CAAMA,KAuDV4N,eAAiB,WACb,EAAK1N,SAAS,CACVqN,UAAWM,OAAOC,WAxDtB,EAAKnN,MAAM,CACPyK,KAAM,MACNC,QAAQ,EACRkC,UAAW,EACXzB,UAAW,QAEf,EAAKR,WAAa,EAAKA,WAAW5J,KAAhB,gBAClB,EAAK6J,gBAAkB,EAAKA,gBAAgB7J,KAArB,gBATT,E,wEAYPnB,GACP,OAAOqB,KAAK5B,MAAMoL,KAAK7K,K,0CAInBqB,KAAK5B,MAAM+N,SACXnM,KAAK1B,SAAS,CACVmL,QAAQ,IAGhBwC,OAAOG,iBAAiB,SAAUpM,KAAKgM,kB,6CAIvCC,OAAOI,oBAAoB,SAAUrM,KAAKgM,kB,yCAG3BpC,EAAWC,GAAW,IAAD,OACjCD,EAAUuC,UAAYnM,KAAK5B,MAAM+N,UACJ,IAAzBnM,KAAKjB,MAAM4M,UACV3L,KAAK1B,SAAS,CACVmL,QAAQ,EACRkC,UAAW3L,KAAK5B,MAAMuN,YACvB,WACC,EAAKW,SAAS,EAAKvN,MAAM4M,cAG7B3L,KAAK1B,SAAS,CACVmL,QAAQ,IACT,WACC,EAAKuC,iBACL,EAAKM,SAAS,EAAKvN,MAAM4M,iB,+BAMhCY,GACLN,OAAOK,SAAS,CACZE,IAAKD,EACLE,SAAU,a,mCAUL,IAAD,OACAN,EAAYnM,KAAK5B,MAAjB+N,QACR,OAAGnM,KAAKjB,MAAM0K,OACPzJ,KAAK5B,MAAM+N,QAAQjN,OAAS,EAEvBiN,EAAQrC,KAAI,SAAC3C,EAAK1E,GAAN,OACR,uBAAKjD,GAAG,UACJ,kBAAC,GAAD,CACIwD,IAAKmE,EAAK3H,GACVoD,KAAM,EAAKxE,MAAMwE,KACjBpD,GAAI2H,EAAK3H,GACTmB,MAAOwG,EAAKxG,MACZoE,MAAOoC,EAAKpC,MACZC,QAASmC,EAAKuF,OACdhH,iBAAkByB,EAAKzB,iBACvB/B,OAAQwD,EAAKxD,OACb8D,UAAWN,EAAKM,UAAYN,EAAKM,UAAY,KAC7CC,UAAWP,EAAKO,UAChBwD,eAAgB/D,EAAK+D,eACrByB,SAAUxF,EAAKwF,SACfC,SAAUzF,EAAKyF,SACfvB,SAAUlE,EAAKkE,SACfC,SAAUnE,EAAKmE,SACfC,SAAUpE,EAAKoE,SACfnK,MAAO+F,EAAK/F,MACZuK,UAAW,EAAK5M,MAAM4M,UACtBvB,MAAO,EAAKhM,MAAMgM,MAClBwB,SAAUzE,EAAKyE,eAO3B,yBAAKzL,MAAO,CAAE4J,OAAQ,QAAS3J,QAAS,OAAQ4J,eAAgB,SAAU3J,WAAY,WAClF,uBAAGF,MAAO,CAAE8I,UAAW,WAAvB,uBACwB,6BADxB,oDASR,yBAAK9I,MAAO,CAAEC,QAAS,OAAQQ,UAAW,MAAOoJ,eAAgB,WAC7D,uBAAMjH,KAAK,a,qCAQvB,MAAa,SADD/C,KAAK5B,MAAM6L,MAEZ,uBAAQ/J,QAASF,KAAK2J,iBAAiB,uBAAMlK,KAAK,UAElD,uBAAQS,QAASF,KAAK2J,iBAAiB,uBAAMlK,KAAK,U,wCAK7D,OAAOO,KAAK5B,MAAM8L,c,+BAGZ,IACEnE,EADH,IACGA,OACR,OACI,6BACI,kBAAC,GAAD,MACA,2BACI,yBAAKvG,GAAG,eACJ,yBAAKA,GAAG,wBACJ,2BACI,sBAAY0G,KAAZ,gBAGA,sBAAYA,KAAZ,KACKlG,KAAK5B,MAAMgM,SAIxB,6BACI,uBAAQC,WAAW,EAAOC,aAAa,YAAYnK,MAAO,CAAEqG,MAAO,KAAO9H,SAAUsB,KAAK0J,YACrF,kBAAC3D,EAAD,CAAQpH,MAAM,YAAYwB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WAC5D,uBAAMZ,KAAK,eAAeU,MAAO,CAAEoC,YAAa,SADpD,OAIA,kBAACwD,EAAD,CAAQpH,MAAM,YAAYwB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WAC5D,uBAAMZ,KAAK,OAAOU,MAAO,CAAEoC,YAAa,SAD5C,OAIA,kBAACwD,EAAD,CAAQpH,MAAM,mBAAmBwB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACnE,uBAAMZ,KAAK,OAAOU,MAAO,CAAEoC,YAAa,SAD5C,aAKHvC,KAAKuK,iBAGbvK,KAAK6M,mB,GAnKA7L,aAiLXyJ,eACXxF,aARoB,SAAClG,EAAOX,GAC5B,MAAO,CACH+N,QAASpN,EAAMoE,UAAUgC,QAAQgH,QACjCvJ,KAAM7D,EAAMkC,SAAS2B,SAMzB8H,4BAAkB,SAAAtM,GAAU,IAChBuM,EAAiCvM,EAAjCuM,OAAQC,EAAyBxM,EAAzBwM,OAAQR,EAAiBhM,EAAjBgM,MAAOH,EAAU7L,EAAV6L,MAC/B,OAAc,IAAXU,EACQ,CACH,CAAEvL,WAAY,UACZyL,QAAS,CAACD,EAAQX,KAGT,aAAVG,EACE,CAAC,CACJhL,WAAY,UACZyL,QAAS,CAACD,EAAQX,GAClBa,MAAO,CAAC,WAAY,MAAM,KAGvB,CAAC,CACJ1L,WAAY,UACZyL,QAAS,CAACD,EAAQX,GAClBa,MAAO,CAAC,QAAS,KAAMV,QApBxBK,CAwBbsB,I,yDC1MIe,G,YAEF,WAAY1O,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTgO,OAAQ,MAEZ,EAAKC,YAAc,EAAKA,YAAYlN,KAAjB,gBACnB,EAAKmN,SAAW,EAAKA,SAASnN,KAAd,gBANF,E,iFAUdE,KAAKiN,WACLhB,OAAOG,iBAAiB,SAAUpM,KAAKgN,e,yCAGxBpD,EAAWC,GACvBA,EAAUkD,SAAW/M,KAAKjB,MAAMgO,QAC/B/M,KAAKkN,e,iCAKNjB,OAAOkB,WAAa,IACnBnN,KAAK1B,SAAS,CACVyO,QAAQ,IAGZ/M,KAAK1B,SAAS,CACVyO,QAAQ,M,oCAKN,IAAD,OACLA,EAAS/M,KAAKjB,MAAMgO,OACrBd,OAAOkB,WAAa,KAAOJ,EAC1B/M,KAAK1B,SAAS,CACVyO,QAAQ,IAEPd,OAAOkB,WAAa,MAAQJ,GACjC/M,KAAK1B,SAAS,CACVyO,OAAQ,OACV,WACE,EAAKzO,SAAS,CACVyO,QAAQ,S,mCAMX,IACDK,EADA,KACAA,QACR,GAAyB,OAAtBpN,KAAKjB,MAAMgO,OAAgB,CAC1B,IAAIA,EAAS/M,KAAKjB,MAAMgO,OACxB,OACI,sCACI7M,QAASF,KAAKqN,YACdlN,OAA6B,IAAtBH,KAAKjB,MAAMgO,OAAmB,CACjChD,OAAQ,QACRuD,SAAU,QACVC,UAAW,SACXC,UAAW,SACXC,WAAY,QACZjB,IAAK,EACLkB,KAAM,GACN,CACAJ,SAAU,QACV1M,UAAW,OACX8M,KAAM,IACNC,OAAQ,KAEZC,aAAc3B,OAAO4B,SAASrJ,UACzBuI,EAAS,KAAO,CAAEe,gBAAkB,CAAC,OAAQ,SAC7Cf,EAAS,KAAO,CAAEgB,SAAW,CAAC,OAAQ,SAlB/C,CAoBIC,KAAMjB,EAAS,aAAe,SAC9BvN,GAAG,YAEH,kBAAC4N,EAAD,CACIpK,IAAI,OACJrC,MACI,8BACI,uBAAMlB,KAAK,SACX,0CAGRU,MAAQ4M,EAAS,CAAEvG,MAAO,MAAOyC,UAAW,UAAa,MAEzD,uBAAM/C,KAAN,CAAWlD,IAAI,gBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,iBAEV,kBAAC,IAAD,CAAQrE,MAAO8N,GAAOC,YAH1B,QAOJ,uBAAMhI,KAAN,CAAWlD,IAAI,mBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,kBACVzF,MAAO,CACHqL,MAAO,YAGX,kBAAC,IAAD,CAAejK,MAAO8N,GAAOC,YANjC,WAUJ,uBAAMhI,KAAN,CAAWlD,IAAI,mBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,kBACVzF,MAAO,CACHqL,MAAO,YAGX,kBAAC,KAAD,CAAejK,MAAO8N,GAAOC,YANjC,WAUJ,uBAAMhI,KAAN,CAAWlD,IAAI,oBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,mBACVzF,MAAO,CACHqL,MAAO,aAGX,kBAAC,KAAD,CACIjK,MAAO8N,GAAOC,YAPtB,YAYJ,uBAAMhI,KAAN,CAAWlD,IAAI,kBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,iBACVzF,MAAO,CACHqL,MAAO,WAGX,kBAAC,IAAD,CACIjK,MAAO8N,GAAOC,YAPtB,UAYJ,uBAAMhI,KAAN,CAAWlD,IAAI,kBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,iBACVzF,MAAO,CACHqL,MAAO,WAGX,kBAAC,KAAD,CACIjK,MAAO8N,GAAOC,YAPtB,YAce,IAAtBlO,KAAKjB,MAAMgO,OAAkB,GAAK,6BAInC,kBAACK,EAAD,CACIpK,IAAI,OACJrC,MACI,8BACA,uBAAMlB,KAAK,SACX,0CAGJU,MAAQH,KAAKjB,MAAMgO,OAAS,CAAEvG,MAAO,MAAOyC,UAAW,UAAa,MAEpE,uBAAM/C,KAAN,CAAWlD,IAAI,gBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,eACVzF,MAAO,CACHqL,MAAO,SAGX,kBAAC,IAAD,CAAQjK,MAAO8N,GAAOC,YAN1B,QAUJ,uBAAMhI,KAAN,CAAWlD,IAAI,qBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,oBACVzF,MAAO,CACHqL,MAAO,cAGX,uBAAM3K,KAAK,eAAeU,MAAO8N,GAAOC,YAN5C,aAUJ,uBAAMhI,KAAN,CAAWlD,IAAI,mBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,kBACVzF,MAAO,CACHqL,MAAO,YAGX,kBAAC,IAAD,CACIjK,MAAO8N,GAAOC,YAPtB,WAYJ,uBAAMhI,KAAN,CAAWlD,IAAI,mBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,kBACVzF,MAAO,CACHqL,MAAO,YAGX,kBAAC,KAAD,CACIjK,MAAO8N,GAAOC,YAPtB,WAYJ,uBAAMhI,KAAN,CAAWlD,IAAI,oBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,mBACVzF,MAAO,CACHqL,MAAO,aAGX,kBAAC,KAAD,CACIjK,MAAO8N,GAAOC,YAPtB,YAYJ,uBAAMhI,KAAN,CAAWlD,IAAI,kBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,iBACVzF,MAAO,CACHqL,MAAO,WAGX,kBAAC,IAAD,CAASjK,MAAO8N,GAAOC,YAN3B,UAUJ,uBAAMhI,KAAN,CAAWlD,IAAI,kBACX,kBAAC,IAAD,CAASuB,GAAI,CACTC,SAAU,iBACVzF,MAAO,CACHqL,MAAO,WAGX,kBAAC,KAAD,CACIjK,MAAO8N,GAAOC,YAPtB,YAgBhB,OAAO,gC,+BAKX,OACIlO,KAAKkN,iB,GA7QKlM,aAkRhBiN,GAAS,CACXC,UAAW,CACP3L,YAAa,OACb4L,SAAU,UAIHrB,M,+BCzRTsB,G,YAEF,WAAYhQ,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAM,CACP0K,QAAQ,GAHE,E,iFAQVzJ,KAAK5B,MAAM8G,OACXlF,KAAK1B,SAAS,CACVmL,QAAQ,M,yCAKDG,EAAWC,GACvBD,EAAU1E,QAAUlF,KAAK5B,MAAM8G,OAC9BlF,KAAK1B,SAAS,CACVmL,QAAQ,M,iCAKT,IAAD,OACEvE,EAAUlF,KAAK5B,MAAf8G,MACR,OAAGlF,KAAKjB,MAAM0K,OACPzJ,KAAK5B,MAAM8G,MAAMhG,OAAS,EAErBgG,EAAM4E,KAAI,SAAC3C,EAAK1E,GAAN,OACF,uBAAKjD,GAAG,UACW,UAAd2H,EAAK1H,KACF,kBAAC,GAAD,CACImD,KAAM,EAAKxE,MAAMwE,KACjBI,IAAKmE,EAAK3H,GACVA,GAAI2H,EAAK3H,GACTkI,UAAWP,EAAKO,UAChB/G,MAAOwG,EAAKxG,MACZoE,MAAOoC,EAAKpC,MACZC,QAASmC,EAAKuF,OACd/I,OAAQwD,EAAKxD,OACb8D,UAAWN,EAAKM,UAAYN,EAAKM,UAAY,KAC7C7F,KAAMuF,EAAKO,UACXtG,MAAO+F,EAAK/F,MACZC,cAAe8F,EAAK/F,MAAMlC,OAC1BgM,eAAgB/D,EAAK+D,eACrBxF,iBAAkByB,EAAKzB,mBAG3B,kBAAC,EAAD,CACI1C,IAAKmE,EAAK3H,GACVA,GAAI2H,EAAK3H,GACTmB,MAAOwG,EAAKxG,MACZoE,MAAOoC,EAAKpC,MACZC,QAASmC,EAAKnC,QACdrB,OAAQwD,EAAKxD,OACb8D,UAAWN,EAAKM,UAAYN,EAAKM,UAAY,KAC7C7F,KAAMuF,EAAKO,UACXtG,MAAO+F,EAAK/F,MACZC,cAAe8F,EAAK/F,MAAMlC,aAQ9C,gDAKJ,yBAAKiB,MAAO,CAAEC,QAAS,OAAQQ,UAAW,QAASoJ,eAAgB,WAC/D,uBAAMjH,KAAK,a,+BAQvB,OACI,2BACK/C,KAAKqO,gB,GApFQrN,aAiGfyJ,eACXxF,aARoB,SAAClG,EAAOX,GAC5B,MAAO,CACH8G,MAAOnG,EAAMoE,UAAUgC,QAAQD,MAC/BtC,KAAM7D,EAAMkC,SAAS2B,SAMzB8H,4BAAkB,SAAAtM,GAAU,IACjBsE,EAAqBtE,EAArBsE,YAAajD,EAAQrB,EAARqB,KACpB,MAAY,gBAATA,EACQ,CAAC,CACJL,WAAY,QACZ0L,MAAO,CAAC,SAAU,KAAMpI,GACxB4L,QAAS,UAEC,gBAAT7O,EACE,CAAC,CACJL,WAAY,UACZ0L,MAAO,CAAC,SAAU,KAAMpI,GACxB4L,QAAS,UAEC,iBAAT7O,EACE,CAAC,CACJL,WAAY,QACZ0L,MAAO,CAAC,QAAS,iBAAkBpI,GACnC4L,QAAS,UAGA,iBAAT7O,EACD,CAAC,CACJL,WAAY,UACZ0L,MAAO,CAAC,QAAS,iBAAkBpI,GACnC4L,QAAS,eAJR,KAvBE7D,CA+Bb2D,ICrIEnN,GAAWC,EAAQ,IA2DRqN,G,2MAvDXC,oBAAsB,SAAAC,GAClB,EAAKC,kBAAkBD,EAAM7P,OAAO+P,MAAM,K,EAG9CD,kBAAoB,SAACE,GACjB,IAAIC,EAAO5N,GAAS2B,OAAO4E,YACvBsH,EAAWD,EAAKnM,YAEhBqM,EADa9N,GAAS+N,UAAUnG,IAAIiG,EAAW,mBAAqBF,GAC5CK,IAAIL,GAChCG,EAAWG,GAAG,iBAAiB,SAASC,GACpC,OAAQA,EAASpQ,OACb,KAAKkC,GAAS+N,QAAQI,UAAUC,OAEhC,KAAKpO,GAAS+N,QAAQI,UAAUE,QAC5B,MACJ,QAASC,QAAQC,IAAI,SAE1B,SAASvQ,GACRD,EAAA,EAAQC,MAAM,iBAAkBA,MACjC,WAEC8P,EAAWI,SAAStG,IAAI4G,iBAAiB5L,MAAK,SAAS6L,GACnDb,EAAKc,cAAc,CACfpO,SAAUmO,IACX7L,MAAK,WACJ7E,EAAA,EAAQY,QAAQ,qCAChBT,yBAAeC,WAAW,SAASC,IAAIyP,GAAU5L,OAAO,CACpD3B,SAAUmO,IAEb7L,MAAK,WACFoI,OAAO4B,SAAS+B,eAErB3L,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,UAAWA,a,iHAWrC,OACI,2BACI,uBAAQkB,MAAO,CAAEM,QAAS,EAAGoP,OAAQ,IACjC,2BAAO1P,MAAO,CAAEqG,MAAO,OAAQuD,OAAQ,OAAQtJ,QAAS,QAAS0F,IAAI,UAArE,cAEJ,uBAAO1G,KAAK,OAAOD,GAAG,SAASW,MAAO,CAAE2P,WAAY,SAAUtJ,MAAO,EAAG/F,QAAS,GAAK/B,SAAUsB,KAAKwO,2B,GAnDpFxN,a,SCG3B+O,G,YAEF,WAAY3R,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTiR,SAAU,cACVC,cAAc,EACdvN,YAAa,GACbnB,SAAU,KACV2O,WAAY,MAEhB,EAAKzK,kBAAoB,EAAKA,kBAAkB3F,KAAvB,gBACzB,EAAKqQ,cAAgB,EAAKA,cAAcrQ,KAAnB,gBACrB,EAAKsQ,cAAgB,EAAKA,cAActQ,KAAnB,gBAXP,E,kFAedE,KAAKiQ,eACLjQ,KAAKoQ,kB,yCAGUxG,GACX5J,KAAK5B,MAAMyP,SAASrJ,WAAaoF,EAAUiE,SAASrJ,WACpDxE,KAAKiQ,eACLjQ,KAAKoQ,mB,qCAKT,IACI1N,EADOuJ,OAAO4B,SAASrJ,SAAS6L,MAAM,KACnB,GACpB3N,IAAgB1C,KAAK5B,MAAMwE,KAAKF,aAC/B1C,KAAK1B,SAAS,CACV2R,cAAc,EACdvN,YAAaA,IAEjB1C,KAAK0B,UAAUgB,KAEf1C,KAAK1B,SAAS,CACV2R,cAAc,EACdvN,YAAaA,IAEjB1C,KAAK0B,UAAUgB,M,wCAILjE,GACduB,KAAK1B,SAAS,CACV0R,SAAUvR,EAAEG,OAAOD,U,yCAKvB,IACI+D,EADOuJ,OAAO4B,SAASrJ,SAAS6L,MAAM,KACnB,GACvB,OAAO,kBAAC,GAAD,CAAiB5Q,KAAMO,KAAKjB,MAAMiR,SAAUtN,YAAaA,M,sKAI5D4N,EAAOrE,OAAO4B,SAASrJ,SAAS6L,MAAM,KACtC3N,EAAc4N,EAAK,GACjBC,EAAQ,G,SACRtP,eAAqB7B,WAAW,SAASwE,MAC5CC,MAAK,SAAA2M,GACJA,EAAcC,KAAKC,SAAQ,SAAArR,GAC3BkR,EAAMI,KAAKtR,EAAI2E,c,OAGnB,IAASvB,EAAI,EAAGA,EAAI8N,EAAMrR,OAAQuD,IAC3BC,IAAgB6N,EAAM9N,GAAGC,YACxB1C,KAAK1B,SAAS,CACV4R,YAAY,IAGhBlQ,KAAK1B,SAAS,CACV4R,YAAY,I,sIAMlBxN,GACN,IAAIgB,EAAO1D,KACXb,yBAAeC,WAAW,SAASC,IAAIqD,GAAakB,MACnDC,MAAK,SAASxE,GACPA,EAAIyE,cACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,WAIvB0C,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,0BAA2BA,Q,sCAK7C,IAAI4P,EAAO5N,UAAgBuG,YAC3BqH,EAAKpN,SAASoC,MAAK,WACf1E,yBAAeC,WAAW,SAASC,IAAIwP,EAAKnM,aAAajB,SACxDoC,MAAK,WACF7E,EAAA,EAAQY,QAAQ,+BAChBqM,OAAO4B,SAAS+B,YACjB3L,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAMA,SAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAMA,EAAMD,c,sCAKxB,IACI0D,EADOuJ,OAAO4B,SAASrJ,SAAS6L,MAAM,KACnB,GACvB,OAAGrQ,KAAKjB,MAAMmR,WAEN,6BACI,uBAAK/P,MAAO,CAAES,UAAW,SACrB,yBAAKT,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,MAAOhJ,WAAY,SAAUK,aAAc,SAC5D,OAAxBV,KAAKjB,MAAMwC,SACR,uBAAQqP,MAAM,SAAS7N,KAAM,GAAI4B,IAAK3E,KAAKjB,MAAMwC,WACjD,uBAAQqP,MAAM,SAAS7N,KAAM,GAAI5C,MAAO,CAAEiC,WAAY,UAAWE,MAAO,WAAasC,KAAK,SAE9F,wBAAIzE,MAAO,CAAE0Q,WAAY,SAAWnO,IAEvC1C,KAAKjB,MAAMkR,aACR,yBAAK9P,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,QAC1C,kBAAC,GAAD,CAAoBzG,KAAM5C,KAAK5B,MAAMwE,OACrC,uBACIjC,MAAM,wEACNuD,UAAWlE,KAAKmQ,cAChB3P,OAAO,MACP2D,WAAW,MAEX,uCAGR,MAGR,uBAAKhE,MAAO,CAAES,UAAW,QAAUlC,SAAUsB,KAAKyF,mBAC9C,sBAAO5E,MAAP,CAAayJ,aAAa,cAAcjE,YAAY,SAC/CrG,KAAKjB,MAAMkR,aACR,8BACI,sBAAO3J,OAAP,CAAc3H,MAAM,eAApB,gBACA,sBAAO2H,OAAP,CAAc3H,MAAM,eAApB,gBACA,sBAAO2H,OAAP,CAAc3H,MAAM,gBAApB,iBACA,sBAAO2H,OAAP,CAAc3H,MAAM,gBAApB,kBAGJ,8BACI,sBAAO2H,OAAP,CAAc3H,MAAM,eAAe+D,EAAnC,cACA,sBAAO4D,OAAP,CAAc3H,MAAM,eAAe+D,EAAnC,iBAKhB,uBAAKvC,MAAO,CAAES,UAAW,SACpBZ,KAAK8Q,qBAIa,OAA1B9Q,KAAKjB,MAAMmR,WAEZ,yBAAK/P,MAAO,CACRqG,MAAO,OACPuD,OAAQ,OACR3J,QAAS,OACTC,WAAY,SACZ2J,eAAgB,WAEhB,6BAID,wBAAI7J,MAAO,CAAES,UAAW,WAAY8B,EAAc,uB,+BAK7D,OACI,6BACK1C,KAAK+Q,qB,GA3LI/P,aAiMXgQ,gBAAW,SAAA5S,GAAK,OAAI,kBAAC,GAAgBA,MC5LrC6S,G,iLARP,OACI,yBAAKzR,GAAG,UAAR,oB,GAHSwB,aCOfkQ,G,YAEF,WAAY9S,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTqL,MAAO,GACPO,QAAQ,EACRnB,KAAM,YACNU,UAAW,OACXyB,UAAW,GAEf,EAAKnC,KAAO,EAAKA,KAAK1J,KAAV,gBACZ,EAAKoK,UAAY,EAAKA,UAAUpK,KAAf,gBAVH,E,iFAcdE,KAAKmR,WACLnR,KAAKoR,oBACLpR,KAAK2K,W,iCAIF3K,KAAK5B,MAAMyP,SAAS9O,OACnBiB,KAAK1B,SAAS,CACV8L,MAAOpK,KAAK5B,MAAMyP,SAAS9O,MAAMqL,U,0CAMtCpK,KAAK5B,MAAMyP,SAAS9O,OAChBiB,KAAK5B,MAAMyP,SAAS9O,MAAMsS,eAAe,cACxCrR,KAAK1B,SAAS,CACVqN,UAAW3L,KAAK5B,MAAMyP,SAAS9O,MAAM4M,c,+BAON,QAAxCM,OAAO4B,SAASrJ,SAAS8M,QAAQ,IAChCtR,KAAK1B,SAAS,CACVqM,QAAQ,M,2BAKf4G,GACDvR,KAAK1B,SAAS,CACVkL,KAAM+H,M,kCAKkB,SAAzBvR,KAAKjB,MAAMmL,UACVlK,KAAK1B,SAAS,CACV4L,UAAW,QAGflK,KAAK1B,SAAS,CACV4L,UAAW,W,yCAMnB,MAA2C,YAAxC+B,OAAO4B,SAASrJ,SAASgN,MAAM,EAAE,GACzB,kBAAC,EAAD,CACKhI,KAAMxJ,KAAKwJ,KACXS,MAAOjK,KAAKjB,MAAMmL,UAClBA,UAAWlK,KAAKkK,UAChBU,OAAQ5K,KAAKjB,MAAMyK,KACnBmB,OAAQ3K,KAAKjB,MAAM4L,OACnBP,MAAOpK,KAAKjB,MAAMqL,QAEe,SAAxC6B,OAAO4B,SAASrJ,SAASgN,MAAM,EAAE,GAC/B,kBAAC,GAAD,CAAa5O,KAAM5C,KAAK5B,MAAMwE,KAAMqN,cAAc,IAElD,kBAAC,GAAD,CACKzG,KAAMxJ,KAAKwJ,KACXS,MAAOjK,KAAKjB,MAAMmL,UAClBA,UAAWlK,KAAKkK,UAChBU,OAAQ5K,KAAKjB,MAAMyK,KACnBmB,OAAQ3K,KAAKjB,MAAM4L,OACnBP,MAAOpK,KAAKjB,MAAMqL,MAClBuB,UAAW3L,KAAKjB,MAAM4M,c,+BAMtC,OACI,6BACA,yBAAKnM,GAAG,QACJ,2BACI,uBAAKiS,GAAI,GAAIC,GAAI,EAAGC,GAAI,GACpB,kBAAC,GAAD,CAAS/O,KAAM5C,KAAK5B,MAAMwE,KAAMwH,MAAOpK,KAAK4R,eAEhD,uBAAKH,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIE,OAAQ,EAAIrS,GAAG,kBACvCQ,KAAK8Q,sBAIlB,kBAAC,GAAD,W,GAvGO9P,aAmHJiE,gBANS,SAAClG,GACrB,MAAO,CACH6D,KAAM7D,EAAMkC,SAAS2B,QAIdqC,CAAyBiM,I,mBCvCzBY,G,YA9EX,WAAY1T,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTwC,SAAU,MAEd,EAAKG,UAAY,EAAKA,UAAU5B,KAAf,gBALH,E,iFASdE,KAAK0B,c,yCAGUkI,EAAWC,GACvBD,EAAUlH,cAAgB1C,KAAK5B,MAAMsE,aACpCuJ,OAAO4B,SAAS+B,W,kCAKpB,IAAIlM,EAAO1D,KACwB,OAAhCA,KAAK5B,MAAMwE,KAAKF,aACfvD,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMwE,KAAKF,aAAakB,MACnEC,MAAK,SAASxE,GACPA,EAAIyE,YACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,OAIlBvC,EAAA,EAAQC,MAAM,yBAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAMA,Q,+BAOtB,IAAM8S,EACF,4BACI,uBAAM7L,KAAN,KACI,kBAAC,IAAD,CAAS3B,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMwE,KAAKF,cAErC,uBAAMjD,KAAK,OAAOU,MAAO,CAAEoC,YAAa,SAH5C,YAOJ,uBAAM2D,KAAN,CAAWhG,QAASF,KAAK5B,MAAM4T,QAAS7R,MAAO,CAAEC,QAAS,OAAQC,WAAY,WAC1E,kBAAC,KAAD,CAAUF,MAAO,CAAEoC,YAAa,SADpC,WAOR,OACI,6BACI,wBAAU0P,QAASF,EAAMG,QAAS,CAAC,UAC/B,uBAAQzS,KAAK,SAASU,MAAO,CAAEiC,WAAY,SACd,OAAxBpC,KAAKjB,MAAMwC,SACR,uBAAQwB,KAAK,QAAQ5C,MAAO,CAAEoC,YAAa,QAAUoC,IAAK3E,KAAKjB,MAAMwC,WACrE,uBAAQwB,KAAK,QAAQ5C,MAAO,CAAEiC,WAAY,UAAWE,MAAO,UAAWC,YAAa,QAAUqC,KAAK,SAEtG5E,KAAK5B,MAAMwE,KAAKF,YACjB,uBAAMjD,KAAK,gB,GAxELuB,a,sCCCxBmR,G,YACF,WAAY/T,GAAO,IAAD,8BACd,4CAAMA,KAUVgU,WAAa,WACX,EAAK9T,SAAS,CAAEC,SAAU,EAAKQ,MAAMR,WAZrB,EAelB8T,UAAY,WACV,EAAK/T,SAAS,CAAEC,SAAS,KAdvB,EAAKQ,MAAQ,CACT0K,QAAQ,EACR6I,UAAW,EACX/T,SAAS,GAEb,EAAKgU,YAAc,EAAKA,YAAYzS,KAAjB,gBACnBmM,OAAOG,iBAAiB,SAAU,EAAKiG,WARzB,E,gFAmBCzI,EAAWC,GACvBD,EAAU4I,gBAAkBxS,KAAK5B,MAAMoU,gBACP,IAA5B5I,EAAU4I,eAAuBxS,KAAK5B,MAAMoU,cAAgB5I,EAAU4I,cACrExS,KAAK1B,SAAS,CACVmL,QAAQ,EACR6I,UAAYtS,KAAK5B,MAAMoU,cAActT,OAAS0K,EAAU4I,cAActT,OAAUc,KAAKjB,MAAMuT,YAG/FtS,KAAK1B,SAAS,CACVmL,QAAQ,O,8BAMhBhH,GACJ,IAAIhD,EAAOO,KAAK5B,MAAMoU,cAAc/P,GAAGhD,KACvC,MAAY,eAATA,EACQ,uBAAMA,KAAK,SACJ,YAATA,EACE,uBAAMA,KAAK,YAEX,uBAAMA,KAAK,Y,yCAMtB,IAAIgK,EAASzJ,KAAKjB,MAAM0K,OACpB+I,EAAgBxS,KAAK5B,MAAMoU,cAC3BC,EAAY,GAEhB,GAAGhJ,EAAO,CACN,IAAK,IAAIhH,EAAI,EAAGA,EAAI+P,EAActT,OAAQuD,IACtCgQ,EAAU9B,KACN,6BACI,kBAAC,IAAD,CAAMpM,GAAI,CACNC,SAAU,UAAYgO,EAAc/P,GAAGjD,GACvCT,MAAO,CACHS,GAAIgT,EAAc/P,GAAGjD,GACrBoD,KAAM5C,KAAK5B,MAAMwE,KACjB+I,UAAW,EACXvB,MAAO,SAGX,uBAAMlE,KAAN,CACIlD,IAAKP,EACLvC,QAASF,KAAKqS,UACdlS,MAAO,CACHuS,UAAW,OACXC,SAAU,QACVvS,QAAS,OACT4J,eAAgB,SAChBX,cAAe,OAEnBxG,UAAU,gBAEV,yBACI1C,MAAO,CACHqG,MAAO,MACPpG,QAAS,OACT4J,eAAgB,SAChB3J,WAAY,WAGfL,KAAK4S,QAAQnQ,IAElB,yBACItC,MAAO,CACHqG,MAAO,MACPpG,QAAS,OACT4J,eAAgB,SAChBX,cAAe,WAGnB,2BAAImJ,EAAc/P,GAAG9B,OACrB,2BACIR,MAAO,CAAEiG,QAAS,KAErBoM,EAAc/P,GAAGoQ,aAHlB,MAGmC7S,KAAK6E,QAAQ,IAAI7C,KAAQwQ,EAAc/P,GAAGqQ,KAAK7Q,gBAQ1G,OACI,wBAAM9B,MAAO,CAAE4S,UAAW,OAAQxF,UAAW,SAAUC,UAAW,WAC7DiF,GAIT,OAAO,+C,8BAKPxH,EAAS+H,GACb,IAAIC,GAAWhI,EAAU+H,GAAU,IAEnC,OAAGC,EAAU,GACFnR,KAAKU,MAAMyQ,EAAU,IAAM,QAC7BA,EAAU,EACRnR,KAAKU,MAAMyQ,GAAW,WAEtB,Q,oCAKXjT,KAAK1B,SAAS,CAAEgU,UAAW,M,+BAI3B,OACI,6BACI,wBACIL,QAASjS,KAAKkT,mBACdhB,QAAS,CAAC,SACViB,gBAAiBnT,KAAKoS,WACtB7T,QAASyB,KAAKjB,MAAMR,SAEpB,wBAAOiB,GAAG,qBAAqB4T,MAAOpT,KAAKjB,MAAMuT,UAAY,GAAK,MAAQtS,KAAKjB,MAAMuT,UAAWpS,QAASF,KAAKuS,aAC1G,uBAAM9S,KAAK,wB,GAhJPuB,aA8JbyJ,eACXxF,aAPoB,SAAClG,EAAOX,GAC5B,MAAO,CACHoU,cAAezT,EAAMoE,UAAUgC,QAAQqN,kBAM3C9H,4BAAiB,SAACtM,GACd,MAAO,CACH,CACIgB,WAAY,gBACZiU,MAAO,GACPxI,QAAS,CAAC,OAAQ,aAPnBJ,CAWb0H,ICvKImB,G,iLAGE,OACI,kBAAC,WAAD,KAEI,yBAAKzQ,UAAU,YACX,kBAAC,EAAD,CAAclC,MAAM,YAGxB,yBAAKkC,UAAU,YACX,kBAAC,EAAD,OAGJ,yBAAKA,UAAU,YACX,kBAAC,GAAD,CAAiBmP,QAAShS,KAAK5B,MAAM4T,QAASpP,KAAM5C,KAAK5B,MAAMwE,QAGnE,yBAAKC,UAAU,YACX,kBAAC,GAAD,Y,GAnBQ7B,aAiCbiE,eAAQ,MANI,SAACiC,GACxB,MAAO,CACH8K,QAAS,kBAAM9K,GClBZ,SAACA,EAAUE,EAAX,IACcC,EADyB,EAAjBA,eAEhBzE,OAAOoP,UAAUnO,MAAK,WAC3BqD,EAAS,CAAEzH,KAAM,oBACjBT,EAAA,EAAQY,QAAQ,2BAChBqM,OAAO4B,SAAS+B,mBDiBb3K,CAAkCqO,IEpC3CC,G,YAEF,aAAe,IAAD,8BACV,+CAsBJlO,aAAe,SAAC5G,GACZ,EAAKH,SAAL,eACKG,EAAEG,OAAOY,GAAKf,EAAEG,OAAOD,SAzBlB,EA6BdgH,aAAe,SAAClH,GACZA,EAAEmH,iBACF,EAAKxH,MAAMoV,OAAO,EAAKzU,QA7BvB,EAAKA,MAAQ,CACT0U,MAAO,GACPC,SAAU,GACVzU,MAAO,MALD,E,gFASK2K,EAAWC,GACvBD,EAAU+J,YAAc3T,KAAK5B,MAAMuV,WAClC3T,KAAK1B,SAAS,CACVW,MAAOe,KAAK5B,MAAMuV,YAGvB9J,EAAU5K,QAAUe,KAAKjB,MAAME,OAA8B,OAArBe,KAAKjB,MAAME,QAClDD,EAAA,EAAQC,MAAMe,KAAKjB,MAAME,OACzBe,KAAK1B,SAAS,CACVW,MAAO,U,+BAiBf,OACI,6BACA,uBAAMgH,SAAUjG,KAAK2F,aAAc9C,UAAU,cACzC,qCACA,6BACA,sBAAMqD,KAAN,KACI,uBACI1G,GAAG,QACHd,SAAUsB,KAAKqF,aACfuO,OAAQ,uBAAMnU,KAAK,OAAOU,MAAO,CAAEmC,MAAO,2BAC1CxB,YAAY,cAGpB,sBAAMoF,KAAN,KACI,sBAAO2N,SAAP,CACIrU,GAAG,WACHd,SAAUsB,KAAKqF,aACfuO,OAAQ,uBAAMnU,KAAK,OAAOU,MAAO,CAAEmC,MAAO,2BAC1C7C,KAAK,WACLqB,YAAY,cAGpB,uBAAQrB,KAAK,UAAUuH,SAAS,UAC5B,uBAAMvH,KAAK,SADf,e,GA3DiBuB,aAiFlBiE,gBAZS,SAAClG,GACrB,MAAO,CACH4U,UAAW5U,EAAM6D,KAAK+Q,cAIH,SAACzM,GACxB,MAAO,CACHsM,OAAQ,SAACM,GAAD,OAAW5M,GDhFJ6M,ECgFoBD,ED/EhC,SAAC5M,EAAUE,EAAX,IACcC,EADyB,EAAjBA,eAEhBzE,OAAOoR,2BACZD,EAAYN,MACZM,EAAYL,UACd7P,MAAK,WACHqD,EAAS,CAAEzH,KAAM,kBACjBT,EAAA,EAAQY,QAAQ,0BAChBqM,OAAO4B,SAAS+B,YACjB3L,OAAM,SAACkE,GACNjB,EAAS,CAAEzH,KAAM,cAAe0I,cAXtB,IAAC4L,MCoFR9O,CAA6CsO,ICvC7CU,G,YAzCX,WAAY7V,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAM,CACPR,SAAS,GAEb,EAAKF,UAAY,EAAKA,UAAUyB,KAAf,gBACjB,EAAKtB,aAAe,EAAKA,aAAasB,KAAlB,gBANN,E,yEAUdE,KAAK1B,SAAS,CACVC,SAAS,M,qCAKbyB,KAAK1B,SAAS,CACVC,SAAS,M,+BAKb,OACI,6BACI,uBAAQ2B,QAASF,KAAK3B,WAClB,uBAAMoB,KAAK,SADf,SAIA,uBACIlB,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKxB,aACfwH,OAAQ,KACRnD,UAAU,oBAEV,kBAAC,GAAD,Y,GApCMoE,IAAMjG,W,qBCE1BkT,G,YAEF,aAAe,IAAD,8BACV,+CAeJ7O,aAAe,SAAC5G,GACZ,EAAKH,SAAL,eACKG,EAAEG,OAAOY,GAAKf,EAAEG,OAAOD,SAlBlB,EAsBdgH,aAAe,SAAClH,GACZA,EAAEmH,iBACF,IAAI6N,EAAQ,EAAK1U,MAAM0U,MACnBC,EAAW,EAAK3U,MAAM2U,SACtBS,EAAW,EAAKpV,MAAMoV,SAEN,IAAjBV,EAAMvU,QAAoC,IAApBwU,EAASxU,QAAoC,IAApBiV,EAASjV,OACvDF,EAAA,EAAQC,MAAM,0BACTkV,EAASjV,QAAU,GACxBF,EAAA,EAAQC,MAAM,qBAEd,EAAKb,MAAMgW,OAAO,EAAKrV,QA/B3B,EAAKA,MAAQ,CACT0U,MAAO,GACPC,SAAU,GACVS,SAAU,IALJ,E,gFASKvK,EAAWC,GACvBD,EAAU+J,YAAc3T,KAAK5B,MAAMuV,YAClC3T,KAAKqU,cACLrV,EAAA,EAAQC,MAAMe,KAAK5B,MAAMuV,c,+BA0B7B,OACI,uBAAKxT,MAAQ,CAAEyI,gBAAiB,UAAWmB,OAAQ,SAE/C,uBAAK0H,GAAI,GAAIC,GAAI,GAAI7O,UAAU,oBAE3B,mDACA,6BAEA,yBAAKA,UAAU,eACX,uBAAMoD,SAAUjG,KAAK2F,cACjB,sBAAMO,KAAN,KACI,uBACI1G,GAAG,WACHoU,OAAQ,uBAAMnU,KAAK,OAAOU,MAAO,CAAEmC,MAAO,2BAC1C5D,SAAUsB,KAAKqF,aACfvE,YAAY,cAIpB,sBAAMoF,KAAN,KACI,uBACI1G,GAAG,QACHoU,OAAQ,uBAAMnU,KAAK,OAAOU,MAAO,CAAEmC,MAAO,2BAC1C5D,SAAUsB,KAAKqF,aACfvE,YAAY,WAIpB,sBAAMoF,KAAN,KACI,sBAAO2N,SAAP,CACIrU,GAAG,WACHoU,OAAQ,uBAAMnU,KAAK,OAAOU,MAAO,CAAEmC,MAAO,2BAC1C5D,SAAUsB,KAAKqF,aACfvE,YAAY,cAIpB,uBAAQrB,KAAK,UAAUuH,SAAS,SAASnE,UAAU,kBAAnD,WAQZ,uBAAK4O,GAAI,EAAGC,GAAI,IACZ,yBAAK7O,UAAU,WACX,yBAAK8B,IAAK2P,KAAUC,IAAI,c,GAvFfvT,aA8GlBiE,gBAZS,SAAClG,GACrB,MAAO,CACH4U,UAAW5U,EAAM6D,KAAK+Q,cAIH,SAACzM,GACxB,MAAO,CACHkN,OAAQ,SAACN,GAAD,OAAW5M,GHnFJsN,EGmFoBV,EHlFhC,SAAC5M,EAAUE,EAAX,GAAwC,IACrCnG,GAAWoG,EADyB,EAAjBA,eAEnBlE,EAAYhE,yBACdsV,GAAQ,EACGtR,EAAU/D,WAAW,SAC3BwE,MACRC,MAAK,SAAAsL,GACFA,EAASuB,SAAQ,SAAArR,GACTA,EAAIG,KAAOgV,EAAQL,WAAYM,GAAQ,OAEjC,IAAVA,EACAxT,EAAS2B,OAAO8R,+BACZF,EAAQf,MACRe,EAAQd,UACV7P,MAAK,SAAC8Q,GACJ,OACIxR,EAAU/D,WAAW,SAASC,IAAImV,EAAQL,UAAU7U,IAAI,CACpD4I,IAAKyM,EAAK9F,KAAK3G,IACfxF,YAAa8R,EAAQL,WAEzBlT,EAAS2B,OAAO4E,YAAYmI,cAAc,CACtCjN,YAAa8R,EAAQL,cAG9BtQ,MAAK,WACJqD,EAAS,CAAEzH,KAAM,mBACjBwM,OAAO4B,SAAS+B,YACjB3L,OAAM,SAAAkE,GACLjB,EAAS,CAAEzH,KAAM,eAAgB0I,WAGrCjB,EAAS,CAAEzH,KAAM,qBAhCX,IAAC+U,MGuFRvP,CAA6CiP,ICnE7CU,G,YA5CX,WAAYxW,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTR,SAAS,GAEb,EAAKC,aAAe,EAAKA,aAAasB,KAAlB,gBACpB,EAAKzB,UAAY,EAAKA,UAAUyB,KAAf,gBANH,E,yEAUdE,KAAK1B,SAAS,CACVC,SAAS,M,qCAKbyB,KAAK1B,SAAS,CACVC,SAAS,M,+BAKb,OACI,6BACI,uBACI2B,QAASF,KAAK3B,UACdoB,KAAK,WAEL,uBAAMA,KAAK,SAJf,QAOA,uBACIlB,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKxB,aACfwH,OAAQ,KACRnD,UAAW,iBAEf,kBAAC,GAAD,Y,GAvCUoE,IAAMjG,WC0BjB6T,G,iLArBP,OACI,kBAAC,WAAD,KAEI,yBAAKhS,UAAU,YACX,kBAAC,EAAD,OAGJ,yBAAKA,UAAU,YACX,kBAAC,GAAD,OAGJ,yBAAKA,UAAU,YACX,kBAAC,GAAD,Y,GAfS7B,a,qBCsCdiE,gBANS,SAAClG,GACrB,MAAO,CACH6D,KAAM7D,EAAMkC,SAAS2B,QAIdqC,EAnCH,SAAC7G,GAAW,IACZwE,EAASxE,EAATwE,KACFkS,EAAQlS,EAAKsF,IAAM,kBAAC,GAAD,CAAetF,KAAMA,IAAU,kBAAC,GAAD,MACxD,OACI,6BACI,wBAAMpD,GAAG,SAASwO,KAAK,cAEnB,uBAAKnL,UAAU,WACX,kBAAC,IAAD,CAAS0B,GAAI,CACTC,SAAU,MAEV,uBAAKiN,GAAI,GAAIC,GAAI,EAAG7O,UAAU,gBAC1B,uBAAMqD,KAAN,CAAWlD,IAAI,OACP,yBAAKxD,GAAG,OAAOmF,IAAKoQ,KAAMR,IAAI,YAK9C,uBAAK9C,GAAI,GAAIC,GAAI,GAAI7O,UAAU,iBACzBiS,S,mBCxBtB7T,GAAWC,EAAQ,IA6QR8T,G,YAzQX,WAAY5W,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTsC,cAAgB,EAChBC,WAAW,EACX2T,UAAU,GAEd,EAAKzT,KAAO,EAAKA,KAAK1B,KAAV,gBACZ,EAAKwB,UAAY,EAAKA,UAAUxB,KAAf,gBACjB,EAAKoV,iBAAmB,EAAKA,iBAAiBpV,KAAtB,gBACxB,EAAKqV,cAAgB,EAAKA,cAAcrV,KAAnB,gBAVP,E,gFAaC8J,EAAWC,GACvBD,EAAUpK,KAAOQ,KAAK5B,MAAMoB,KAC3BQ,KAAK1B,SAAS,CACV+C,cAAgB,EAChBC,WAAW,IAEftB,KAAKoV,gBACLpV,KAAKsB,e,0CAKTtB,KAAKoV,gBACLpV,KAAKsB,YACLtB,KAAK0B,c,gCAIL,IAAIC,EAAa3B,KAAK5B,MAAMwD,KAExByT,EADc,IAAIrT,KACGL,EACrB2T,EAAQD,EAAO,IAAO,GAAK,GAE/B,OAAGC,GAAS,GACDxT,KAAKU,MAAM8S,EAAQ,IAAM,YAE5BA,EAAQ,EACTA,EAAQ,KACA,MAEAxT,KAAKU,MAAM6S,EAAO,IAAO,IAAM,eAGnCvT,KAAKU,MAAM8S,GAAS,e,kCAM/B,IADA,IAAMlU,EAAQpB,KAAK5B,MAAMgD,MAChBqB,EAAI,EAAGA,EAAIrB,EAAMlC,OAAQuD,IAC3BrB,EAAMqB,GAAGyF,MAAQlI,KAAK5B,MAAM8J,IAC3BlI,KAAK1B,SAAS,CACVgD,WAAW,IAGftB,KAAK1B,SAAS,CACVgD,WAAW,M,oCAOvB,OAAGtB,KAAKjB,MAAMuC,UAEN,uBACI7B,KAAK,QACLqD,MAAM,SACNE,IAAI,QACJ7C,MAAO,CAAEmC,MAAM,UAAW6L,SAAU,UAKxC,uBACI1O,KAAK,QACLuD,IAAI,QACJ7C,MAAO,CAAEmC,MAAM,wBAAyB6L,SAAU,Y,sCAO9DnO,KAAK1B,SAAS,CACV+C,cAAerB,KAAK5B,MAAMkF,c,6BAK1BtD,KAAK5B,MAAM8J,KACiB,IAAzBlI,KAAKjB,MAAMuC,WACVtB,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAE9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMmB,QAAQH,WAAW,eAAeC,IAAIW,KAAK5B,MAAMoB,IACpG0D,OAAO,CACJ9B,MAAOH,GAASkC,UAAUC,WAAWC,WACjC,CACI6E,IAAKlI,KAAK5B,MAAM8J,MAGxB5E,UAAWrC,GAASkC,UAAUC,WAAWG,UAAU,OAGvDvD,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAE9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMmB,QAAQH,WAAW,eAAeC,IAAIW,KAAK5B,MAAMoB,IACpG0D,OAAO,CACJ9B,MAAOH,GAASkC,UAAUC,WAAWI,YACjC,CACI0E,IAAKlI,KAAK5B,MAAM8J,MAGxB5E,UAAWrC,GAASkC,UAAUC,WAAWG,WAAW,MAI5DvE,EAAA,EAAQC,MAAM,sC,kCAMlB,IAAIyE,EAAO1D,KACXb,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMuF,QAAQC,MACzDC,MAAK,SAASxE,GACPA,EAAIyE,YACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,OAIlBvC,EAAA,EAAQC,MAAM,wBAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,0BAA2BA,Q,yCAK7CE,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMmB,QAAQH,WAAW,eAAeC,IAAIW,KAAK5B,MAAMoB,IAAIiC,SACxGoC,MAAK,WACF7E,EAAA,EAAQY,QAAQ,wCACjBqE,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAMA,Q,wCAMlB,GADkBe,KAAK5B,MAAMwE,KAAKF,cACf1C,KAAK5B,MAAMuF,OAC1B,OACI,uBACIhD,MAAM,mDACNuD,UAAWlE,KAAKkV,iBAChB1U,OAAO,MACP2D,WAAW,MAJf,Y,sCAaRnE,KAAK1B,SAAS,CACV2W,UAAWjV,KAAKjB,MAAMkW,a,oCAK1B,OAAGjV,KAAKjB,MAAMkW,SACH,CACHlL,OAAQ,QAGL,CACHgJ,UAAW,QACXwC,SAAU,Y,+BAMlB,IAAMlR,EAAU,CACZrE,KAAKwV,mBAET,OACI,yBAAK3S,UAAU,iBACX,wBACIc,OACI,kBAAC,IAAD,CAASY,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAE/B3D,KAAK5B,MAAMuF,QAGpBU,QAASA,EACTK,OACI,yBAAKvE,MAAO,CAAE4J,OAAQ,SAClB,uBAAK5J,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,WAC1C,uBAAS1I,MAAOX,KAAK5B,MAAMuF,QACvB,kBAAC,IAAD,CAASY,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEP,OAAxB3D,KAAKjB,MAAMwC,SACR,uBAAQoD,IAAK3E,KAAKjB,MAAMwC,WACxB,uBAAQpB,MAAO,CAAEiC,WAAY,UAAWE,MAAO,WAAasC,KAAK,YAKjF,uBACIzE,MAAO,CACHC,QAAS,OACTiJ,cAAe,SACfhJ,WAAY,SACZO,UAAW,SAGf,yBAAKV,QAASF,KAAKwB,KAAMrB,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,SAAUW,eAAgB,WACxF,uBAASrJ,MAAM,QACVX,KAAKsE,gBAGd,6BACI,2BAAOnE,MAAO,CAAEmC,MAAO,0BAClBtC,KAAKjB,MAAMsC,kBAMhC2D,QACI,6BACI,yBAAK9E,QAASF,KAAKmV,cAAehV,MAAOH,KAAKyV,cAAe5S,UAAU,sBACnE,2BAAI7C,KAAK5B,MAAMsX,UAEnB,6BACK1V,KAAKjB,MAAMkW,SACR,KACA,oCAKhBU,SAAU3V,KAAK6E,iB,GApQR7D,aCErB4U,G,YAEF,WAAYxX,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACT0K,QAAQ,EACRoM,YAAa,GACb3L,UAAW,QAEf,EAAKR,WAAa,EAAKA,WAAW5J,KAAhB,gBAClB,EAAK6J,gBAAkB,EAAKA,gBAAgB7J,KAArB,gBART,E,gFAWC+J,EAAWD,GAC1B,GAAG5J,KAAKjB,MAAM0K,SAAWzJ,KAAK5B,MAAMqL,QAAUI,EAAUgM,cAAgB7V,KAAK5B,MAAMyX,YAK/E,OAJA7V,KAAK1B,SAAS,CACVmL,QAAQ,EACRoM,YAAa7V,KAAK5B,MAAMyX,cAErB7V,KAAK5B,MAAM0X,eAAe9V,KAAK5B,MAAMwE,KAAKsF,IAAKlI,KAAK5B,MAAMyX,e,iCAI9DlX,GACP,OAAOqB,KAAK5B,MAAM2X,WAAWpX,K,wCAK7B,MAAa,SADDqB,KAAK5B,MAAM8L,UAEZlK,KAAK5B,MAAM4X,gBAAgB,OAE3BhW,KAAK5B,MAAM4X,gBAAgB,U,wCAMtC,MAAa,SADDhW,KAAK5B,MAAM8L,UAEZ,uBAAMzK,KAAK,SAEX,uBAAMA,KAAK,S,oCAIZ,IAAD,OACT,OAAGO,KAAKjB,MAAM0K,QAAUzJ,KAAKjB,MAAM8W,YAAY3W,OAAS,EAEhD,wBACI2D,UAAU,eACVoT,OAAQjW,KAAKkW,iBACbC,WAAW,aACXC,WAAYpW,KAAK8V,iBACjBO,WAAY,SAAAC,GAAI,OACZ,4BACI,kBAAC,GAAD,CACI9W,GAAI8W,EAAK9W,GACTD,OAAQ+W,EAAK/W,OACbqD,KAAM,EAAKxE,MAAMwE,KACjBsF,IAAK,EAAK9J,MAAMwE,KAAKsF,IACrBvE,OAAQ2S,EAAK3S,OACb+R,QAASY,EAAKtR,QACd5D,MAAOkV,EAAKlV,MACZkC,UAAWgT,EAAKhT,UAChB1B,KAAM0U,EAAK1U,WAQ3B,wBACIiB,UAAU,eACVoT,OAAQjW,KAAKkW,iBACbC,WAAW,aACXC,WAAY,GACZG,OAAQ,CAAEC,UAAW,kD,uCAMpB,IACLzQ,EADI,IACJA,OACR,OACI,yBAAK5F,MAAO,CAACO,aAAc,OAAQE,UAAW,SAC1C,uBACI0J,aAAa,OACbnK,MAAO,CAAEqG,MAAO,IAChB9H,SAAUsB,KAAK0J,WACfW,WAAW,GAEX,kBAACtE,EAAD,CAAQpH,MAAM,QAAd,OACA,kBAACoH,EAAD,CAAQpH,MAAM,aAAd,QAEJ,uBAAQwB,MAAO,CAAE0Q,WAAY,MAAOtO,YAAa,QAAUrC,QAASF,KAAK2J,iBACpE3J,KAAKyW,mBAEV,+BACI,2BACI,uBAAMhX,KAAK,cACV,IAAMO,KAAK5B,MAAMsY,UAEtB,2BACK1W,KAAKjB,MAAM8W,YAAY3W,OAAS,oB,uCASjD,IADA,IAAMyX,EAAO,GACJlU,EAAI,EAAGA,EAAIzC,KAAKjB,MAAM8W,YAAY3W,OAAQuD,IAC/CkU,EAAKhG,KAAK,CACNpR,OAAQS,KAAKjB,MAAM8W,YAAYpT,GAAGlD,OAClC2I,IAAKlI,KAAK5B,MAAMwE,KAAKsF,IACrB1I,GAAIQ,KAAKjB,MAAM8W,YAAYpT,GAAGjD,GAC9BmE,OAAQ3D,KAAKjB,MAAM8W,YAAYpT,GAAGkB,OAClCqB,QAAShF,KAAKjB,MAAM8W,YAAYpT,GAAGuC,QACnC5D,MAAOpB,KAAKjB,MAAM8W,YAAYpT,GAAGrB,MACjCkC,UAAWtD,KAAKjB,MAAM8W,YAAYpT,GAAGa,UACrC1B,KAAM5B,KAAKjB,MAAM8W,YAAYpT,GAAGb,KAAKK,WAG7C,OAAO0U,I,+BAIP,OACI,yBAAKnX,GAAG,YACHQ,KAAK4W,mB,GApIC5V,aAkJRyJ,eACXxF,aAToB,SAAClG,EAAOX,GAC5B,MAAO,CACHyX,YAAa9W,EAAMoE,UAAUgC,QAAQ0Q,YACrCjT,KAAM7D,EAAMkC,SAAS2B,KACrB6G,QAAQ,MAMZiB,4BAAiB,SAAAtM,GACb,MAAO,CAAC,CACJgB,WAAY,UACZC,IAAKjB,EAAMoB,GACXqX,eAAgB,CAAC,CAAEzX,WAAY,gBAC/B0L,MAAO,CACH,UAAW,KAAM1M,EAAM0Y,SAE3BjM,QAAS,CAACzM,EAAMoL,KAAMpL,EAAM8L,WAC5BoE,QAAS,mBAXN7D,CAcbmL,ICnKM7V,G,IAAAA,SAEFgX,G,YACF,WAAY3Y,GAAQ,IAAD,8BACf,4CAAMA,KAcViH,aAAe,SAAC5G,GACZ,GAAmB,YAAhBA,EAAEG,OAAOY,GAAiB,CACzB,IAAIwF,EAAUvG,EAAEG,OAAOD,MAAM2G,WAC7B,EAAKhH,SAAS,CACViH,oBAAqB,IAAQP,EAAQ9F,SAG7C,EAAKZ,SAAL,eACKG,EAAEG,OAAOY,GAAKf,EAAEG,OAAOD,SAvBb,EA2BnBgH,aAAe,SAAClH,GACZA,EAAEmH,iBACC,EAAK7G,MAAMiG,QAAQ9F,OAAS,GAC3BF,EAAA,EAAQC,MAAM,mCAEV,EAAKF,MAAMwG,oBAAsB,GACrC,EAAKnH,MAAM4Y,aACX,EAAK5Y,MAAM6Y,cAAc,EAAKlY,QAE9BC,EAAA,EAAQC,MAAM,mCAlClB,EAAKF,MAAQ,CACTiG,QAAS,GACTO,oBAAqB,KAJV,E,iFASfvF,KAAK1B,SAAS,CACViB,OAAQS,KAAK5B,MAAMoB,GACnBsX,QAAS9W,KAAK5B,MAAM0Y,Y,+BA8BxB,OACI,6BACI,uBAAM7Q,SAAUjG,KAAK2F,cACrB,sBAAMO,KAAN,KACI,kBAAC,GAAD,CACI1G,GAAG,UACHqD,UAAU,uBACVnE,SAAUsB,KAAKqF,aACf6R,SAAU,CAAEC,QAAS,EAAGC,QAAS,OAGzC,0BACIjX,MACIH,KAAKjB,MAAMwG,oBAAsB,EAC7B,CAAEjD,MAAO,UAAW8D,QAAS,IAC7B,CAAEA,QAAS,KAGnB,+BAAQpG,KAAKjB,MAAMwG,oBAAnB,qBAEJ,6BACA,uBACI9F,KAAK,UACLD,GAAG,wBACHwH,SAAS,UAHb,gB,GA/DYhG,aAwFbiE,gBAZS,SAAClG,GACrB,MAAO,CACH6D,KAAM7D,EAAMkC,SAAS2B,SAIF,SAACsE,GACxB,MAAO,CACH+P,cAAe,SAACI,GAAD,OAAgBnQ,E1B/DV,SAACmQ,GAC1B,OAAO,SAACnQ,EAAUE,EAAX,GAAwD,IAAjCC,EAAgC,EAAhCA,aACRlI,EADwC,EAAnBA,gBAE7BC,WAAW,WAAWC,IAAIgY,EAAW9X,QAAQH,WAAW,eAAeC,MAAMC,IAAvF,KACO+X,EADP,CAEIjW,MAAO,GACPkC,UAAW,EACXK,OAAQ0D,IAAczE,OAAO4E,YAAY9E,YACzCd,KAAM,IAAII,QAEdhD,EAAA,EAAQY,QAAQ,oCACfiE,MAAK,WACFqD,EAAS,CAAEzH,KAAM,iBAAkB4X,kBACpCpT,OAAM,SAACkE,GACNjB,EAAS,CAAEzH,KAAM,uBAAwB0I,Y0BiDL8O,CAAcI,QAI/CpS,CAA6C8R,ICmB7CO,G,YA3GX,WAAYlZ,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTsC,cAAgB,GAHN,E,gFAOCuI,EAAWC,GACvBD,EAAUpK,KAAOQ,KAAK5B,MAAMoB,KAC3BQ,KAAK1B,SAAS,CACV+C,cAAgB,EAChBC,WAAW,IAEftB,KAAKoV,mB,0CAKTpV,KAAKoV,gBACLpV,KAAK0B,c,sCAIL1B,KAAK1B,SAAS,CACV+C,cAAerB,KAAK5B,MAAMkF,c,kCAK9B,IAAII,EAAO1D,KACXb,yBAAeC,WAAW,SAASC,IAAIW,KAAK5B,MAAMuF,QAAQC,MACzDC,MAAK,SAASxE,GACPA,EAAIyE,YACuBC,IAAxB1E,EAAI2E,OAAOzC,SACVmC,EAAKpF,SAAS,CACViD,SAAUlC,EAAI2E,OAAOzC,WAGzBmC,EAAKpF,SAAS,CACViD,SAAU,OAIlBvC,EAAA,EAAQC,MAAM,wBAEnBgF,OAAM,SAAShF,GACdD,EAAA,EAAQC,MAAM,0BAA2BA,Q,gCAK7C,IAAI0C,EAAa3B,KAAK5B,MAAMwD,KAExByT,EADc,IAAIrT,KACGL,EACrB2T,EAAQD,EAAO,IAAO,GAAK,GAE/B,OAAGC,GAAS,GACDxT,KAAKU,MAAM8S,EAAQ,IAAM,YAE5BA,EAAQ,EACTA,EAAQ,KACA,MAEAxT,KAAKU,MAAM6S,EAAO,IAAO,IAAM,eAGnCvT,KAAKU,MAAM8S,GAAS,e,+BAK/B,OACI,yBAAKzS,UAAU,gBAAgB1C,MAAO,CAAES,UAAW,OAAQ2W,aAAc,SACrE,wBACI5T,OACI,kBAAC,IAAD,CAASY,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAE/B3D,KAAK5B,MAAMuF,QAGpBe,OACI,yBAAKvE,MAAO,CAAE4J,OAAQ,SAClB,uBAAK5J,MAAO,CAAEC,QAAS,OAAQiJ,cAAe,WAC1C,uBAAS1I,MAAOX,KAAK5B,MAAMuF,QACE,OAAxB3D,KAAKjB,MAAMwC,SACR,uBAAQoD,IAAK3E,KAAKjB,MAAMwC,WACxB,uBAAQpB,MAAO,CAAEiC,WAAY,UAAWE,MAAO,WAAasC,KAAK,YAMrFI,QACI,6BACI,yBAAKnC,UAAU,sBACX,2BAAI7C,KAAK5B,MAAMsX,WAI3BC,SAAU3V,KAAK6E,iB,GAtGJ7D,aCK3BC,GAAWC,EAAQ,IAknBRsW,G,YA9mBX,WAAYpZ,GAAO,IAAD,8BACd,4CAAMA,KA8JVM,SAAW,SAAAD,GACP,EAAKH,SAAS,CAAEmZ,gBAAiBhZ,EAAEG,OAAOD,SA9J1C,EAAKI,MAAM,CACP2Y,WAAW,EACXZ,QAAS,EACTtN,KAAM,OACNU,UAAW,OACXhC,IAAK,GACL9G,MAAO,GACPC,cAAe,EACfC,WAAW,EACXuU,YAAa,GACb8B,mBAAmB,EACnBC,eAAe,EACfH,gBAAiB,EACjBf,SAAU,GAEd,EAAKmB,kBAAoB,EAAKA,kBAAkB/X,KAAvB,gBACzB,EAAKgY,uBAAyB,EAAKA,uBAAuBhY,KAA5B,gBAC9B,EAAKgW,eAAiB,EAAKA,eAAehW,KAApB,gBACtB,EAAKiY,gBAAkB,EAAKA,gBAAgBjY,KAArB,gBACvB,EAAKkY,iBAAmB,EAAKA,iBAAiBlY,KAAtB,gBACxB,EAAKpB,SAAW,EAAKA,SAASoB,KAAd,gBAChB,EAAK0B,KAAO,EAAKA,KAAK1B,KAAV,gBACZ,EAAKwB,UAAY,EAAKA,UAAUxB,KAAf,gBACjB,EAAKmY,iBAAmB,EAAKA,iBAAiBnY,KAAtB,gBACxB,EAAK4W,SAAW,EAAKA,SAAS5W,KAAd,gBAChB,EAAKyI,KAAO,EAAKA,KAAKzI,KAAV,gBACZ,EAAK6I,KAAO,EAAKA,KAAK7I,KAAV,gBA5BE,E,iFAgCd,IACIkQ,EADA/E,EAAUjL,KAAK5B,MAAM8M,eAIrB8E,EADDhQ,KAAK5B,MAAMwN,SACC,EAEAX,EAAU,EAGzBjL,KAAK1B,SAAS,CACV+C,cAAerB,KAAK5B,MAAMgD,MAAMlC,OAChCgM,eAAgBD,EAChBwM,gBAAiBzH,IAErBhQ,KAAKsB,c,yCAGUsI,EAAWC,GAAW,IAAD,OACjCA,EAAUgM,cAAgB7V,KAAKjB,MAAM8W,aACpC7V,KAAK1B,SAAS,CACVqZ,mBAAmB,IACrB,WACE,EAAKM,mBACL,EAAKvB,gB,oCAOb,IAAI1G,EAAWhQ,KAAK5B,MAAM8Z,iBACtBC,EAAQnY,KAAKjB,MAAM0Y,gBACnBxM,EAAUjL,KAAKjB,MAAMmM,eAEzB,OAAGD,EACKkN,EAAQ,EAAKlN,GAAWjL,KAAK5B,MAAMwN,SAE/B,yBAAKzL,MAAO,CACRyI,gBAAiB,YAEjB,kBAACwP,GAAD,CACI5Y,GAAIwQ,EAASmI,GAAO3Y,GACpBD,OAAQyQ,EAASmI,GAAO5Y,OACxB2I,IAAKlI,KAAK5B,MAAMwE,KAAKsF,IACrBvE,OAAQqM,EAASmI,GAAOxU,OACxB+R,QAAS1F,EAASmI,GAAOnT,QACzB5D,MAAO4O,EAASmI,GAAO/W,MACvBkC,UAAW0M,EAASmI,GAAO7U,UAC3BV,KAAM5C,KAAK5B,MAAMwE,KACjBhB,KAAM5B,KAAK5B,MAAMsJ,UAAUzF,YAMnC,kBAAC,GAAD,CACIzC,GAAIQ,KAAK5B,MAAMoB,GACf0I,IAAKlI,KAAKjB,MAAMmJ,IAChB4O,QAAS9W,KAAKjB,MAAM0Y,gBAAkB,EACtCjO,KAAMxJ,KAAKjB,MAAMyK,KACjBU,UAAWlK,KAAKjB,MAAMmL,UACtB6L,WAAY/V,KAAK6X,kBACjB7B,gBAAiBhW,KAAK8X,uBACtBjC,YAAa7V,KAAKjB,MAAM8W,YACxBC,eAAgB9V,KAAK8V,eACrBY,SAAU1W,KAAKjB,MAAM2X,WAK1B,uC,yCASX,IAHA,IAAIzL,EAAUjL,KAAK5B,MAAM8M,eACrBmN,EAAU,GACV3B,EAAW1W,KAAKjB,MAAM2X,SACjBjU,EAAI,EAAGA,GAAKwI,EAASxI,IACvBA,IAAMwI,IAAmC,IAAxBjL,KAAK5B,MAAMwN,SAC3ByM,EAAQ1H,KACJ,uBAAShQ,MAAO+V,EAAW,kBAAoBjU,EAAI,cAC/C,sBAAO6D,OAAP,CACInG,MAAO,CAAEoC,YAAa,QACtB5D,MAAO8D,EAAI,EACXqC,YAAa4R,GAEb,uBAAMvW,MAAO,CAAEoC,YAAa,OAAS9C,KAAK,cACzC,WAAagD,KAK1B4V,EAAQ1H,KACJ,sBAAOrK,OAAP,CACInG,MAAO,CAAEoC,YAAa,QACtB5D,MAAO8D,EAAI,GAEX,uBAAMtC,MAAO,CAAEoC,YAAa,OAAS9C,KAAK,UACzC,WAAagD,IAK9B,OAAO4V,I,0CAQP,IAJA,IAAIpN,EAAUjL,KAAK5B,MAAM8M,eACrBxF,EAAmB1F,KAAK5B,MAAMsH,iBAC9B4S,EAAW,GAEN7V,EAAIwI,EAAU,EAAGxI,GAAKiD,EAAkBjD,IAC7C6V,EAAS3H,KACL,sBAAOrK,OAAP,CACI3H,MAAO8D,EAAI,EACXtC,MAAO,CAAEiG,QAAS,GAAK7D,YAAa,QACpC+V,UAAU,GAHd,WAKa7V,IAIrB,OAAO6V,I,4CAQP,OACI,6BACI,sBAAOzX,MAAP,CACIyJ,aAActK,KAAK5B,MAAM8M,eAAiB,EAC1C7E,YAAY,QACZ3H,SAAUsB,KAAKtB,UAEdsB,KAAKuY,mBACLvY,KAAKwY,wB,wCAMJ7Z,GACdqB,KAAK1B,SAAS,CACVkL,KAAM7K,EACNuL,UAAW,W,6CAIID,GACnBjK,KAAK1B,SAAS,CACV4L,UAAWD,M,qCAIJ/B,EAAK2N,GAChB7V,KAAK1B,SAAS,CACV4J,IAAKA,EACL2N,YAAaA,M,yCAKjB,IAAIA,EAAc7V,KAAKjB,MAAM8W,YACzB4C,EAAqB,GAMzB,GAJA5C,EAAYrM,MAAK,SAASkP,EAAGC,GACzB,OAAOA,EAAErV,UAAYoV,EAAEpV,aAGxBuS,EAAY3W,OAAS,GAAKc,KAAKjB,MAAM4Y,kBAAkB,CAEtD,GAAG9B,EAAY3W,OAAS,EACpB,IAAK,IAAIuD,EAAI,EAAGA,EAAIoT,EAAY3W,OAAS,GAClC2W,EAAYpT,GAAGa,YAAcuS,EAAYpT,EAAE,GAAGa,UADTb,IAEpCgW,EAAmB9H,KAAKkF,EAAYpT,IACpCgW,EAAmB9H,KAAKkF,EAAYpT,EAAE,IAO/CgW,EAAmBvZ,OAAS,GAC3BuZ,EAAmBjP,MAAK,SAASkP,EAAEC,GAC/B,OAAOA,EAAE/W,KAAKK,SAAWyW,EAAE9W,KAAKK,YAEpCjC,KAAK4Y,qBAAqBH,EAAmB,KAE7CzY,KAAK4Y,qBAAqB/C,EAAY,SAG1C1W,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAIiC,W,wCAM5DzB,KAAK1B,SAAS,CACVoZ,WAAY1X,KAAKjB,MAAM2Y,c,yCAK3B1X,KAAK1B,SAAS,CACVoZ,WAAW,M,yCAKf,IAAI7B,EAAc7V,KAAKjB,MAAM8W,YAC7B,GAAG7V,KAAK5B,MAAMwE,KAAKK,QAChB,OAAO,KAEN,GAAG4S,EAAY3W,OAAS,EACpB,IAAK,IAAIuD,EAAI,EAAGA,EAAIoT,EAAY3W,OAAQuD,IAAK,CACzC,GAAGoT,EAAYpT,GAAGkB,SAAW3D,KAAK5B,MAAMwE,KAAKF,aAAemT,EAAYpT,GAAGqU,UAAY9W,KAAK5B,MAAM8M,eAAe,CAC7GlL,KAAK1B,SAAS,CACVsZ,eAAe,EACfF,WAAW,IAEf,MAEA1X,KAAK1B,SAAS,CACVsZ,eAAe,EACfF,WAAW,SAKvB1X,KAAK1B,SAAS,CACVsZ,eAAe,EACfF,WAAW,M,2CAOvB,GAAG1X,KAAKjB,MAAM2Y,UACV,OACI,kBAAC,GAAD,CACIlY,GAAIQ,KAAK5B,MAAMoB,GACfsX,QAAS9W,KAAK5B,MAAM8M,eACpB8L,WAAYhX,KAAKgY,qB,8BAOG,IAA5BhY,KAAK5B,MAAMwE,KAAKK,SACY,IAAzBjD,KAAKjB,MAAMuC,WACVtB,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAE9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3D9B,MAAOH,GAASkC,UAAUC,WAAWC,WACjCrD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,GAASkC,UAAUC,WAAWG,UAAU,OAGvDvD,KAAK1B,SAAS,CACVgD,WAAW,EACXD,cAAerB,KAAKjB,MAAMsC,cAAgB,IAG9ClC,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3D9B,MAAOH,GAASkC,UAAUC,WAAWI,YACjCxD,KAAK5B,MAAMwE,KAAKF,aAEpBY,UAAWrC,GAASkC,UAAUC,WAAWG,WAAW,MAI5DvE,EAAA,EAAQyE,QAAQ,6C,kCAMpB,IADA,IAAMrC,EAAQpB,KAAK5B,MAAMgD,MAChBqB,EAAI,EAAGA,EAAIrB,EAAMlC,OAAQuD,IAAK,CACnC,GAAGrB,EAAMqB,KAAOzC,KAAK5B,MAAMwE,KAAKF,YAAY,CACxC1C,KAAK1B,SAAS,CACVgD,WAAW,IAEf,MAEAtB,KAAK1B,SAAS,CACVgD,WAAW,O,oCAOvB,OAAGtB,KAAKjB,MAAMuC,UAEN,uBACI7B,KAAK,QACLqD,MAAM,SACNC,KAAK,QACLC,IAAI,QACJ7C,MAAO,CAAEmC,MAAM,aAKnB,uBACI7C,KAAK,QACLuD,IAAI,QACJ7C,MAAO,CAAEmC,MAAM,gC,iCAQ3B,IAEI0I,EAFAC,EAAUjL,KAAK5B,MAAM8M,eACrBC,EAAUnL,KAAK5B,MAAMsJ,UAAUzF,SAE/BmJ,EAAM,IAAIpJ,KACVqJ,EAAW,IAAIrJ,KAAKmJ,EAAQtG,UAAY,QACxCyG,EAAW,IAAItJ,KAAKqJ,EAASxG,UAAY,QACzC0G,EAAW,IAAIvJ,KAAKsJ,EAASzG,UAAY,QACzC2G,EAAQ,IAAIxJ,KAAKuJ,EAAS1G,UAAY,QAE1C,OAAOoG,GACH,KAAK,EACDD,GAAYK,EAAWD,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYM,EAAWF,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYO,EAAWH,GAAO,IAC9B,MACJ,KAAK,EACDJ,GAAYQ,EAAQJ,GAAO,IAMhCJ,EAAW,GACiB,IAAxBhL,KAAK5B,MAAMwN,SACV5L,KAAK6Y,mBAEL7Y,KAAK1B,SAAS,CACVoY,SAAU,OAGb1L,EAAW,GAChBhL,KAAK1B,SAAS,CACVoY,SAAU5U,KAAKU,MAAMwI,EAAW,IAAM,aAErCA,EAAW,GAChBhL,KAAK1B,SAAS,CACVoY,SAAU5U,KAAKU,MAAMwI,GAAY,e,2CAMxB8N,GACjB,IAAI1N,EAAM,IAAIpJ,KAEXhC,KAAK5B,MAAM8M,iBAAmBlL,KAAK5B,MAAMsH,kBACxCvG,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3DgI,eAAgBlL,KAAK5B,MAAM8M,eAAiB,EAC5CgN,iBAAkBjX,GAASkC,UAAUC,WAAWC,WAC5CyV,KAGR3Z,yBAAeC,WAAW,iBAAiBC,MAAMC,IAAI,CACjDqB,MAAOX,KAAK5B,MAAMuC,MAClBkS,aAAc,sBAAwB7S,KAAK5B,MAAM8M,eAAiB,GAClEzL,KAAM,UACND,GAAIQ,KAAK5B,MAAMoB,GACfoC,KAAMwJ,EAAI9F,WACVwN,KAAM1H,MAGVjM,yBAAeC,WAAW,WAAWC,IAAIW,KAAK5B,MAAMoB,IAAI0D,OAAO,CAC3D0I,UAAU,EACVsM,iBAAkBjX,GAASkC,UAAUC,WAAWC,WAC5CyV,KAGR3Z,yBAAeC,WAAW,iBAAiBC,MAAMC,IAAI,CACjDqB,MAAOX,KAAK5B,MAAMuC,MAClBkS,aAAc,qBACdpT,KAAM,WACND,GAAIQ,KAAK5B,MAAMoB,GACfoC,KAAMwJ,EAAI9F,WACVwN,KAAM1H,O,6BAMdpL,KAAK1B,SAAS,CACVmZ,gBAAiBzX,KAAKjB,MAAM0Y,gBAAkB,M,6BAKlDzX,KAAK1B,SAAS,CACVmZ,gBAAiBzX,KAAKjB,MAAM0Y,gBAAkB,M,sCAKlD,IAAIzH,EAAWhQ,KAAKjB,MAAM0Y,gBAAkB,EAE5C,OAAGzH,EADYhQ,KAAK5B,MAAMsH,iBAEnBsK,EAAW,EAEN,6BACI,uBAAQ7P,MAAO,CAAEoC,YAAa,OAASrC,QAASF,KAAK2I,MAArD,QACA,uBAAQzI,QAASF,KAAKuI,MAAtB,SAKJ,6BACI,uBAAQrI,QAASF,KAAKuI,MAAtB,SAMR,6BACI,uBAAQrI,QAASF,KAAK2I,MAAtB,W,2CAOZ,OACI,yBAAK9F,UAAU,iBACX,uBACIpD,KAAK,OACLS,QAASF,KAAKwB,MAEd,0BAAMrB,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACvCL,KAAKsE,cACN,0BAAM9E,GAAG,SACJQ,KAAKjB,MAAMsC,iBAIxB,uBAASV,MAAOX,KAAK5B,MAAMuF,QACvB,uBAAQlE,KAAK,QACT,kBAAC,IAAD,CAAS8E,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEhC,0BAAMxD,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMZ,KAAK,OAAOuD,IAAI,aAKtC,kBAAC,EAAD,CACIrC,MAAOX,KAAK5B,MAAMuC,MAClBlB,KAAK,QACLD,GAAIQ,KAAK5B,MAAMoB,GACfS,UAAU,UAEd,kBAAC,kBAAD,CAAiBnB,KAAMmN,OAAO4B,SAASkL,KACnCtN,OAAQ,kBAAMzM,EAAA,EAAQY,QAAQ,8BAE9B,uBAAQH,KAAK,QACT,0BAAMU,MAAO,CAAEC,QAAS,OAAQC,WAAY,WACxC,uBAAMZ,KAAK,oB,2CAS/B,OACIO,KAAK5B,MAAMwE,KAAKK,QACZ,uBACI/C,QAAS,WAAYlB,EAAA,EAAQC,MAAM,oCACnCkB,MAAO,CACH+I,cAAe,OACfqO,aAAc,OACdyB,YAAa,OACbvL,WAAY,OACZlL,YAAa,QAEjB9C,KAAK,WAEL,uBAAMA,KAAK,SAXf,mBAWwCO,KAAK5B,MAAM8M,gBAEnD,uBACIhL,QAASF,KAAK+X,gBACd5X,MAAO,CACH+I,cAAe,OACfqO,aAAc,OACdyB,YAAa,OACbvL,WAAY,OACZlL,YAAa,QAEjB9C,KAAMO,KAAKjB,MAAM2Y,UAAY,SAAW,UACxCY,SAAUtY,KAAKjB,MAAM6Y,eAEpB5X,KAAKjB,MAAM6Y,cACR,uBAAMnY,KAAK,UACfO,KAAKjB,MAAM2Y,UACP,uBAAMjY,KAAK,UACX,uBAAMA,KAAK,SAEdO,KAAKjB,MAAM6Y,cACR,oBACA,kBAAoB5X,KAAK5B,MAAM8M,kB,+BAO/C,OACI,yBAAK/K,MAAO,CAAEM,QAAS,OAAQmI,gBAAiB,YAC5C,uBAAKnJ,KAAK,OAAOwZ,MAAM,UACnB,2BACI,uBAAKxZ,KAAK,OAAOwZ,MAAM,UACnB,2BACI,wBAAI9Y,MAAO,CAAE0P,OAAQ,IAAM7P,KAAK5B,MAAMuC,OACtC,uBAAGR,MAAO,CAAE0P,OAAQ,EAAGzJ,QAAS,KAAhC,aACI,kBAAC,IAAD,CAAS7B,GAAI,CACTC,SAAU,SAAWxE,KAAK5B,MAAMuF,SAEhC,uBAAGxD,MAAO,CAAEmC,MAAO,QAAS8D,QAAS,KAArC,IAA8CpG,KAAK5B,MAAMuF,cAOjF,6BACA,uBAAKxD,MAAO,CAAES,UAAW,QAASnB,KAAK,OAAOwZ,MAAM,UAChD,2BACI,2BAAIjZ,KAAK5B,MAAMsO,UAGvB,uBAAKvM,MAAO,CAAES,UAAW,QAASnB,KAAK,OAAOwZ,MAAM,UAChD,2BACKjZ,KAAKkZ,sBAEV,2BACKlZ,KAAKmZ,uBAGd,2BACKnZ,KAAKoZ,sBAEV,uBAAKjZ,MAAO,CAAES,UAAW,SACrB,2BACKZ,KAAKqZ,wBAGd,uBAAKlZ,MAAO,CAAES,UAAW,SACpBZ,KAAK4W,eAEV,2BACK5W,KAAK5B,MAAMwN,SACR,yBAAKzL,MAAO,CAAEyI,gBAAiB,UAAWnI,QAAS,SAC9CT,KAAKmJ,iBAGV,W,GAxmBQnI,aCL1BsY,G,YAEF,WAAYlb,GAAO,IAAD,8BACd,4CAAMA,KACDW,MAAQ,CACTR,SAAS,EACTkL,QAAQ,EACRxK,OAAO,GAEX,EAAKT,aAAe,EAAKA,aAAasB,KAAlB,gBACpB,EAAKzB,UAAY,EAAKA,UAAUyB,KAAf,gBACjB,EAAKyZ,OAAS,EAAKA,OAAOzZ,KAAZ,gBATA,E,iFAcd,IAAI4D,EAAO1D,KAEPwZ,EADUvN,OAAO4B,SAASrJ,SAAS6L,MAAM,KACvBoJ,MAEtBta,yBAAeC,WAAW,WAAWC,IAAIma,GAAS5V,MACjDC,MAAK,SAASxE,QACO0E,IAAf1E,EAAI2E,OACHN,EAAKpF,SAAS,CACV0F,KAAM3E,EAAI2E,SAGdN,EAAKpF,SAAS,CACVW,OAAO,OAGhBgF,OAAM,SAAShF,GACdyE,EAAKpF,SAAS,CACVW,OAAO,S,yCAKA2K,EAAWC,GACvBA,EAAU7F,OAAShE,KAAKjB,MAAMiF,MAC7BhE,KAAK1B,SAAS,CACVmL,QAAQ,M,+BAWhBzJ,KAAK5B,MAAMsb,QAAQH,W,kCAInBvZ,KAAK1B,SAAS,CACVC,SAAS,M,qCAKbyB,KAAK5B,MAAMsb,QAAQH,W,+BAInB,GAAGvZ,KAAKjB,MAAM0K,OAAO,CAEjB,IAAIzF,EAAOhE,KAAKjB,MAAMiF,KAElBwV,EADUvN,OAAO4B,SAASrJ,SAAS6L,MAAM,KACvBoJ,MAEtB,OACI,uBACIlb,QAASyB,KAAKjB,MAAMR,QACpB+B,SAAUN,KAAKxB,aACfwH,OAAQ,KACR7F,MAAO,CAAEqM,IAAK,EAAG/L,QAAS,GAC1BoC,UAAW,eAEX,kBAAC,GAAD,CACIrD,GAAMga,EACN5W,KAAQ5C,KAAK5B,MAAMwE,KACnBjC,MAASqD,EAAKrD,MACdgD,OAAUK,EAAKL,OACf8D,UAAazD,EAAKyD,UAClB1C,MAASf,EAAKe,MACdmG,eAAkBlH,EAAKkH,eACvByB,SAAY3I,EAAK2I,SACjBD,OAAU1I,EAAK0I,OACfhF,UAAa1D,EAAK0D,UAClB2D,SAAYrH,EAAKqH,SACjBC,SAAYtH,EAAKsH,SACjBC,SAAYvH,EAAKuH,SACjBnK,MAAS4C,EAAK5C,MACdsE,iBAAoB1B,EAAK0B,iBACzBwS,iBAAoBlU,EAAKkU,iBACzBtM,SAAW5H,EAAK4H,YAK5B,OACI,uBACIrN,SAAS,EACT+B,SAAUN,KAAKxB,aACfwH,OAAQ,KACR7F,MAAO,CAAEC,QAAS,OAAQ6I,UAAW,WAEpCjJ,KAAKjB,MAAME,MACR,yBAAKkB,MAAO,CAAEM,QAAS,SACnB,gDACA,oGAGJ,U,GAnHCO,aAkIViE,gBAPS,SAAClG,EAAOX,GAC5B,MAAO,CACHwE,KAAM7D,EAAMkC,SAAS2B,QAKdqC,CAAyBqU,IChGzBK,GAjCH,kBACR,kBAAC,IAAD,KACI,2BACA,6BACI,kBAAC,GAAD,MACA,4BAEA,kBAAC,IAAD,CAAOC,OAAK,EAACtJ,KAAK,IAAIuJ,OAAQ,kBAC1B,kBAAC,IAAD,CAAUtV,GAAG,oBAEjB,kBAAC,IAAD,CAAO+L,KAAK,eAAerQ,UAAWiR,KACtC,kBAAC,IAAD,CAAOZ,KAAK,kBAAkBrQ,UAAWiR,KACzC,kBAAC,IAAD,CAAOZ,KAAK,kBAAkBrQ,UAAWiR,KACzC,kBAAC,IAAD,CAAOZ,KAAK,mBAAmBrQ,UAAWiR,KAC1C,kBAAC,IAAD,CAAOZ,KAAK,iBAAiBrQ,UAAWiR,KACxC,kBAAC,IAAD,CAAOZ,KAAK,iBAAiBrQ,UAAWiR,KAExC,kBAAC,IAAD,CAAOZ,KAAK,eAAerQ,UAAWiR,KACtC,kBAAC,IAAD,CAAOZ,KAAK,oBAAoBrQ,UAAWiR,KAC3C,kBAAC,IAAD,CAAOZ,KAAK,kBAAkBrQ,UAAWiR,KACzC,kBAAC,IAAD,CAAOZ,KAAK,kBAAkBrQ,UAAWiR,KACzC,kBAAC,IAAD,CAAOZ,KAAK,mBAAmBrQ,UAAWiR,KAC1C,kBAAC,IAAD,CAAOZ,KAAK,iBAAiBrQ,UAAWiR,KACxC,kBAAC,IAAD,CAAOZ,KAAK,iBAAiBrQ,UAAWiR,KAExC,kBAAC,IAAD,CAAOZ,KAAK,YAAYrQ,UAAWiR,KACnC,kBAAC,IAAD,CAAOZ,KAAK,aAAarQ,UAAWqZ,SCtB5BQ,QACW,cAA7B7N,OAAO4B,SAASkM,UAEe,UAA7B9N,OAAO4B,SAASkM,UAEhB9N,OAAO4B,SAASkM,SAASC,MACvB,2D,6jBClBN,IAAMC,GAAY,CACdtG,UAAW,MAuCAuG,GArCK,WAAgC,IAA/Bnb,EAA8B,uDAAtBkb,GAAWE,EAAW,uCAC/C,OAAOA,EAAO1a,MACV,IAAK,cACD,OAAO,MACAV,EADP,CAEI4U,UAAW,iBAGnB,IAAK,gBACD,OAAO,MACA5U,EADP,CAEI4U,UAAW,OAGnB,IAAK,kBACD,OAAO5U,EAEX,IAAK,iBACD,OAAO,MACAA,EADP,CAEI4U,UAAW,OAEnB,IAAK,eACG,OAAO,MACA5U,EADP,CAEI4U,UAAWwG,EAAOhS,IAAInJ,UAElC,IAAK,aACG,OAAO,MACAD,EADP,CAEI4U,UAAW,0BAEvB,QACI,OAAO5U,ICpCbkb,GAAY,CACd/U,MAAO,CACH,CAAC1F,GAAI,EAAGmB,MAAO,oBAAqBqE,QAAS,qKAC7C,CAACxF,GAAI,EAAGmB,MAAO,yBAA0BqE,QAAS,4SAClD,CAACxF,GAAI,EAAGmB,MAAO,iBAAkBqE,QAAS,sRAC1C,CAACxF,GAAI,EAAGmB,MAAO,kBAAmBqE,QAAS,sRAC3C,CAACxF,GAAI,EAAGmB,MAAO,iBAAkBqE,QAAS,wRAcnCoV,GAXK,WAAgC,IAA/Brb,EAA8B,uDAAtBkb,GAAWE,EAAW,uCAC/C,OAAOA,EAAO1a,MACV,IAAK,cAEL,IAAK,kBAEL,QACI,OAAOV,ICHJsb,GAPKC,YAAgB,CAChC1X,KAAMsX,GACN/S,KAAMiT,GACNjX,UAAWoX,mBACXtZ,SAAUuZ,oB,oBCOVC,I,cAAKxZ,iBAXY,CACjByZ,OAAQ,0CACRC,WAAY,+BACZC,YAAa,sCACbC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,sCACPC,cAAe,kBAInBha,aAAmBwZ,IACnBxZ,eAAqBia,SAAS,CAAEC,uBAAuB,IAExCla,UCTTma,GAAQC,YAAYhB,GACtB5P,YACI6Q,YAAgBC,KAAMC,kBAAkB,CAAErc,4BAAckI,6BACxDoU,yBAAeC,IACfC,6BAAmBD,GAAU,CAACE,mBAAmB,MAGzDR,GAAMS,oBAAoBhY,MAAK,WAC3BiY,IAASjC,OACL,kBAAC,IAAD,CAAUuB,MAAOA,IACb,kBAAC,GAAD,OAEJW,SAASC,eAAe,SLyG1B,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMtY,MAAK,SAAAuY,GACjCA,EAAaC,qB","file":"static/js/main.e4105055.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signupbg.1cd6d96c.png\";","module.exports = \"data:image/png;base64,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\"","import React, { Component, Fragment } from \"react\";\nimport { Modal, Radio, Icon, Row, Input, message, Button } from \"antd\"\nimport { getFirestore } from \"redux-firestore\";\nimport '../../App.css'\n\nclass ReportModal extends Component {\n    constructor(props){\n        super(props)\n        this.state = { \n            visible: false,\n            value: null,\n            text: ''\n        }\n        this.onChange = this.onChange.bind(this)\n        this.handleReport = this.handleReport.bind(this)\n        this.handleTextChange = this.handleTextChange.bind(this)\n    }\n\n    showModal = () => {\n      this.setState({\n        visible: true,\n      });\n    };\n  \n    handleCancel = e => {\n      this.setState({\n        visible: false,\n      });\n    };\n\n    onChange = e => {\n        this.setState({\n          value: e.target.value,\n        });\n    };\n\n    handleReport = e => {\n        var text = this.state.text\n        var value = this.state.value\n\n        if(value === null){\n            message.error('Please select a type')\n        }else if(text.length === 0){\n            message.error('Please provide reasoning')\n        }else{\n            getFirestore().collection('reports').doc().set({\n                postId: this.props.id,\n                type: this.props.type,\n                category: value,\n                reason: text\n            })\n            this.setState({\n                visible: false\n            },() => {\n                if(this.type === \"story\"){\n                    message.success(\"Story has been reported! We'll be looking into it.\")\n                }else{\n                    message.success(\"Prompt has been reported! We'll be looking into it.\")\n                }\n            })\n        }\n    };\n\n    handleTextChange = e => {\n        this.setState({\n            text: e.target.value\n        })\n    }\n  \n    render() {\n        const { TextArea } = Input;\n        return (\n            <Fragment>\n                {this.props.component === \"card\" ?\n                    <button id=\"cardActionBtn\" onClick={this.showModal}>\n                        <Icon type=\"warning\"/>\n                    </button> :\n                    <Button type=\"link\" onClick={this.showModal}>\n                        <span style={{ display: 'flex', alignItems: 'center' }}>\n                            <Icon type=\"warning\"/>\n                        </span>\n                    </Button>\n                }\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    onOk={this.handleReport}\n                    okText=\"Report\"\n                >\n                    <Row style={{ padding: '24px' }}>\n                        <Row style={{ marginBottom: '24px' }}>\n                            <h3>Report '{this.props.title}'</h3>\n                        </Row>\n                        <Row style={{ marginTop: '24px', marginBottom: '24px' }}>\n                            <Radio.Group onChange={this.onChange} value={this.state.value}>\n                                <Radio value='language'>Hateful language</Radio>\n                                <Radio value='invalid'>\n                                    {this.props.type === \"story\" ?\n                                        'Not a story' :\n                                        'Not a prompt'\n                                    }\n                                </Radio>\n                                <Radio value='other'>Other</Radio>\n                            </Radio.Group>\n                        </Row>\n                        <Row>\n                            <TextArea \n                                placeholder=\"Reason\" \n                                rows={5}\n                                onChange={this.handleTextChange}\n                            />\n                        </Row>\n                    </Row>\n                </Modal>\n            </Fragment>\n      );\n    }\n}\n\nexport default ReportModal;","import React, { Component } from 'react';\nimport { Card, Icon, Avatar, Tag, Tooltip, message, Popconfirm } from 'antd';\nimport '../../App.css'\nimport { connect } from 'react-redux'\nimport { getFirestore } from \"redux-firestore\";\nimport { NavLink } from 'react-router-dom'\nimport ReportModal from '../Posts/ReportModal'\nvar firebase = require('firebase');\n\nclass Prompt extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            photoURL: null\n        }\n        this.like = this.like.bind(this)\n        this.delete = this.delete.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState({\n            amountOfLikes: this.props.amountOfLikes\n        })\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    getTime(){\n        var postedTime = this.props.time\n        if(postedTime){\n\n            var diffHours = Math.abs(new Date() - postedTime.toDate()) / 36e5;\n            var hoursLeft = 48 - diffHours\n            var minutesLeft = hoursLeft * 60\n            const tooltipTitle = \"The time remaining for this prompt to get 10 likes!\"\n\n            if(hoursLeft > 1){\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Tag style={{\n                            background: 'none',\n                            border: '1px solid rgb(135, 232, 222, 0.5)',\n                            color: '#87e8de'\n                        }}>\n                            <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                            {Math.round(hoursLeft) + 'h'}\n                        </Tag>\n                    </Tooltip>\n                )\n            }else if(hoursLeft > 0) {\n                return(\n                    <Tooltip title={tooltipTitle}>\n                        <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                        <Tag color=\"#cf1322\">{60 - Math.round(minutesLeft) + 'min'}</Tag>\n                    </Tooltip>\n                )\n            }else if(minutesLeft <= 0){\n                //Delete prompt after time runs out\n                this.delete()\n            }\n        }\n    }\n\n    delete(){\n        getFirestore().collection('posts').doc(this.props.id).delete()\n        for (let i = 0; i < this.props.likes.length; i++) {\n            getFirestore().collection('users').doc(this.props.likes[i].displayName).liked.doc(this.props.id).delete()\n        }\n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i] === this.props.auth.displayName){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <span className=\"heart-filled\">\n                    <Icon \n                        type=\"heart\"\n                        theme=\"filled\"\n                        size=\"large\"\n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }else{\n            return(\n                <span className=\"heart\">\n                    <Icon\n                        type=\"heart\" \n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked === false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('posts').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('posts').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                message.error(\"No such document!\");\n            }\n        }).catch(function(error) {\n            message.error(\"Error getting document:\", error);\n        });\n    }\n\n    deletePromptButton(){\n        if(!this.props.auth.isEmpty){\n            if(this.props.auth.displayName === this.props.author){\n                return(\n                    <Tooltip title=\"Delete prompt\">\n                        <Popconfirm\n                            title=\"Are you sure delete this prompt?\"\n                            onConfirm={this.delete}\n                            okText=\"Yes\"\n                            cancelText=\"No\"\n                        >\n                            <button id=\"cardActionBtn\">\n                                <Icon type=\"delete\" key=\"delete\"/>\n                            </button>\n                        </Popconfirm>\n                    </Tooltip>\n                )\n            }else{\n                return(\n                    <Tooltip title=\"Report this prompt\">\n                        <button id=\"cardActionBtn\">\n                            <Icon type=\"warning\" key=\"warning\" />\n                        </button>\n                    </Tooltip>\n                )    \n            }\n        }else{\n            return(\n                <Tooltip title=\"Report this prompt\">\n                    <ReportModal \n                        title={this.props.title} \n                        type=\"prompt\"\n                        id={this.props.id}\n                        component=\"card\"\n                    />\n                </Tooltip>\n            )\n        }\n    }\n\n    render() { \n        const { Meta } = Card;\n        return (\n            <Card\n                actions={[\n                    <button id=\"cardActionBtn\" onClick= {this.like}>\n                        {this.renderHeart()}\n                    </button>,\n                    <Tooltip title={this.props.author}>\n                        <button id=\"cardActionBtn\">\n                            <NavLink to={{\n                                pathname: \"/user/\" + this.props.author\n                            }}>\n                                <Icon type=\"user\" key=\"book\" />\n                            </NavLink>\n                        </button>\n                    </Tooltip>,\n                    this.deletePromptButton()\n                ]}\n            >\n                <Meta\n                    avatar={\n                        <NavLink to={{\n                            pathname: \"/user/\" + this.props.author\n                        }}> \n                            <Tooltip title={this.props.author}>\n                                {this.state.photoURL !== null ?\n                                    <Avatar src={this.state.photoURL}/>:\n                                    <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                            }\n                            </Tooltip>\n                        </NavLink>\n                    }\n                    title = {\n                        <span id=\"title-container\">\n                            <span id=\"card-title\">{this.props.title}</span>\n                            <Tag style={{\n                                background: 'none',\n                                border: '1px solid rgb(135, 232, 222, 0.5)',\n                                color: '#87e8de'\n                            }}>Prompt</Tag>\n                            {this.getTime()}\n                        </span>\n                    }\n                    description =  { \n                        <div>\n                            <small>{ this.props.genre }</small>\n                            <br></br><br></br>\n                            <span id=\"card-content\">{ this.props.content }</span>\n                            <br></br>\n                        </div>\n                    }\n                />\n            </Card>\n\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\n\nexport default connect(mapStateToProps)(Prompt);","import 'firebase/firestore'\nimport { message } from 'antd'\n\nexport const createPost = (post) => {\n    return (dispatch, getState, { getFirebase, getFirestore }) => {\n        // make async call to db\n        const firestore = getFirestore()\n        var today = new Date();\n        firestore.collection('posts').add({ \n            ...post,\n            likeCount: 0,\n            author: getFirebase().auth().currentUser.displayName,\n            authorPic: getFirebase().auth().currentUser.photoURL,\n            createdAt: new Date(),\n            time: today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()+' - '+today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds(),\n        }).then(function(docRef) { //setting an initial like from the user\n            firestore.collection('posts').doc(docRef.id).collection('likes').doc(getFirebase().auth().currentUser.displayName).set({\n                uid: getFirebase().auth().currentUser.uid\n            })\n        }).then(() => {\n            dispatch({ type: 'CREATE_POST', post})\n        }).catch((err) => {\n            dispatch({ type: 'CREATE_PROJECT_ERROR', err })\n        })\n        message.success('Your prompt has been posted!')\n    } \n}\n\nexport const submitChapter = (submission) => {\n    return (dispatch, getState, { getFirebase, getFirestore }) => {\n        const firestore = getFirestore()\n        firestore.collection('stories').doc(submission.postId).collection('submissions').doc().set({\n            ...submission,\n            likes: [],\n            likeCount: 0,\n            author: getFirebase().auth().currentUser.displayName,\n            time: new Date()\n        })\n        message.success('Your chapter has been submitted!')\n        .then(() => {\n            dispatch({ type: 'SUBMIT_CHAPTER', submission})\n        }).catch((err) => {\n            dispatch({ type: 'SUBMIT_CHAPTER_ERROR', err })\n        })\n    }\n}\n","import React from 'react';\nimport { Button, Modal, Icon, Form, Input, Select, message, Radio } from 'antd';\nimport { connect } from 'react-redux'\nimport { createPost } from '../../Store/Actions/postActions'\nimport { FaPlus } from 'react-icons/fa'\n\nclass NewPostModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            title: '',\n            content: '',\n            genre: '',\n            likes: [],\n            visible: false,\n            remainingCharacters: 500,\n            numberOfChapters: null,\n            type: 'prompt'\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    handleChange = (e) => {\n        if(e.target.id === 'content'){\n            var content = e.target.value.toString()\n            this.setState({\n                remainingCharacters: 500 - content.length\n            })\n        }\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSelectChange = (e) => {\n        this.setState({\n            genre: e\n        })\n    }\n\n    handleRadioChange = (e) => {\n        this.setState({\n            numberOfChapters: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.validateForm(this.state)\n    }\n\n    validateForm(state){\n        if(state.title.length < 4 || state.content.length < 10){\n            return message.error('Title or content length is too short')\n        }else if(state.genre.length === 0){\n            return message.error('Please select a category')\n        }else if(state.numberOfChapters === null){\n            return message.error('Please select amount of chapters')\n        }else if(state.remainingCharacters < 0){\n            return message.error('Content is too long')\n        }else{\n            this.props.createPost(state)\n            this.handleCancel()\n        }\n    }\n\n    render() {\n        const { TextArea } = Input;\n        const { Option } = Select;\n        return (\n            <div>\n                <Button \n                    onClick={this.showModal}\n                    type=\"primary\"\n                >\n                    <div style={{ display: 'flex', alignItems: 'center'}}>\n                        <FaPlus style={{ marginRight: '5px' }}/>\n                        {this.props.title}\n                    </div>\n\n                </Button>\n                <Modal\n                    className=\"post-modal\"\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                >\n\n                {/* **** MODAL DETAILS (FORM) ****/}\n                <div className=\"post-modal-form\" style={{ padding: '24px'}}>\n                    <h2>New Prompt</h2>\n                    <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                        <Form.Item>\n                            <label for=\"title\">\n                                <small>Title</small>\n                            </label>\n                            <Input\n                                id=\"title\"\n                                onChange={this.handleChange} \n                            />\n                        </Form.Item>\n                        <Form.Item style={{ marginBottom: 0 }}>\n                            <label for=\"content\">\n                                <small>Content</small>\n                            </label>\n                            <TextArea\n                                id=\"content\" \n                                onChange={this.handleChange}\n                                rows={5}\n                            />\n                        </Form.Item>\n                        <span \n                            style={\n                                this.state.remainingCharacters < 0 ? \n                                    { color: '#fa541c', opacity: 0.5} : \n                                    { opacity: 0.5 }\n                            }\n                        >\n                            <small>{this.state.remainingCharacters} characters left</small>\n                        </span>\n                        <br></br><br></br>\n                        <Form.Item>\n                            <small>Number of chapters</small><br></br>\n                            <Radio.Group buttonStyle=\"solid\" onChange={this.handleRadioChange}>\n                                <Radio.Button value={2}>2</Radio.Button>\n                                <Radio.Button value={3}>3</Radio.Button>\n                                <Radio.Button value={4}>4</Radio.Button>\n                            </Radio.Group>\n                        </Form.Item>\n                        <Form.Item>\n                            <Select\n                                showSearch\n                                style={{ width: 200 }}\n                                placeholder=\"Category\"\n                                onChange={this.handleSelectChange}\n                                optionFilterProp=\"children\"\n                                filterOption={(input, option) =>\n                                    option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                }\n                            >\n                                <Option value=\"Comedy\">Comedy</Option>\n                                <Option value=\"Horror\">Horror</Option>\n                                <Option value=\"Fantasy\">Fantasy</Option>\n                                <Option value=\"SciFi\">Sci-Fi</Option>\n                                <Option value=\"Other\">Other</Option>\n                            </Select>\n                        </Form.Item>\n                        <Button type=\"primary\" htmlType=\"submit\">    \n                            <Icon type=\"plus\"/>\n                            Post Prompt\n                        </Button>\n                    </Form>\n                </div>\n                </Modal>\n            </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        createPost: (post) => dispatch(createPost(post))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPostModal)","import React, { Component, Fragment } from 'react'\nimport { Modal, Button, Carousel, Icon } from 'antd';\nimport NewPostModal from '../Posts/NewPostModal'\nimport { NavLink } from 'react-router-dom'\nimport '../../App.css'\n\nclass HelpModal extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: false,\n            slide: 1\n        }\n        this.showModal = this.showModal.bind(this)\n        this.handleClose = this.handleClose.bind(this)\n        this.next = this.next.bind(this);\n        this.previous = this.previous.bind(this);\n        this.carousel = React.createRef();\n    }\n\n    showModal = () => {\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleClose = e => {\n        this.setState({\n            visible: false\n        })\n    }\n\n    next() {\n        this.carousel.next();\n        this.setState({\n            slide: this.state.slide + 1\n        })\n    }\n\n    previous() {\n        this.carousel.prev();\n        this.setState({\n            slide: this.state.slide - 1\n        })\n    }\n\n    renderButtons(){\n        if(this.state.slide === 1){\n            return(\n                <Button onClick={this.next}>\n                    Next\n                    <Icon type=\"right\"/>\n                </Button>\n            )        \n        }else if(this.state.slide === 2){\n            return(\n                <Fragment>\n                    <Button onClick={this.previous} style={{ marginRight: '7px' }}>\n                        <Icon type=\"left\"/>\n                        Prev\n                    </Button>\n                    <Button onClick={this.next}>\n                        Next\n                        <Icon type=\"right\"/>\n                    </Button>\n                </Fragment>\n            )\n        }else{\n            return(\n                <Button onClick={this.previous} style={{ marginRight: '7px' }}>\n                    <Icon type=\"left\"/>\n                    Prev\n                </Button>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <Button onClick={this.showModal}>\n                    <Icon type=\"question\"/>\n                </Button>\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleClose}\n                    footer={null}\n                    style={{ backgroundColor: '#111717' }}\n                >\n                <Carousel \n                    ref={node => (this.carousel = node)}\n                    dots={false}\n                    className=\"help-carousel\"\n                    effect=\"fade\"\n                >\n                    <div>\n                        <h1>Step 1: Prompts</h1>\n                        <br></br>\n                        <p>\n                            Post and like story ideas (called prompts).<br></br>\n                            Prompts that get <bold>15</bold> likes within 2 days become stories!<br></br>\n                            Those that don't get deleted.\n                        </p>\n                        <br></br>\n                        <NewPostModal title=\"New Prompt\"/>\n                    </div>\n                    <div>\n                        <h1>Step 2: Stories</h1>\n                        <br></br>\n                        <p>\n                            Stories are divided into multiple chapters<br></br>\n                            Users have 48 hours per chapter to submit their versions!\n                        </p>\n                        <br></br>\n                        <NavLink to={{\n                            pathname: \"/stories/all\"\n                        }}>\n                            <Button type=\"primary\" onClick={this.handleClose}>\n                                All Stories\n                            </Button>\n                        </NavLink>\n                    </div>\n                    <div>\n                        <h1>Step 3: Done!</h1>\n                        <p>\n                            After all the chapters have been submitted and ranked, the story is complete!\n                        </p>\n                        <br></br>\n                        <NavLink to={{\n                            pathname: \"/stories/complete\"\n                        }}>\n                            <Button type=\"primary\" onClick={this.handleClose}>\n                                Complete stories\n                            </Button>\n                        </NavLink>\n                    </div>\n                </Carousel>\n                <div style={{ textAlign: \"center\", paddingBottom: '24px', backgroundColor: '#111717' }}>\n                    {this.renderButtons()}\n                </div>\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default HelpModal;","import React, { Component } from 'react'\nimport HelpModal from '../Common/HelpModal'\n\nclass PromptsFeedHeader extends Component {\n    render() {\n        return (\n            <div>\n                <div id=\"feed-header-text\">\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', marginBottom: '10px'}}>\n                        <h1 style={{ marginRight: '10px', marginBottom: 0}}>Prompts</h1>\n                        <HelpModal step={1}/>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PromptsFeedHeader;","import React, { Component } from 'react';\nimport Prompt from '../Posts/Prompt'\nimport { Row, Col, Select, Breadcrumb, Icon, Spin, Button } from 'antd';\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport PromptsFeedHeader from '../Layout/PromptsFeedHeader'\nimport '../../App.css'\nimport NewPostModal from '../Posts/NewPostModal';\n\nclass PromptsFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            sort: \"new\",\n            loaded: false\n        }\n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    handleSort(value){\n        return this.props.sort(value)\n    }\n\n    componentDidMount(){\n        if(!this.props.posts){\n            this.setState({\n                loaded: false\n            })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.posts !== this.props.posts){\n            this.setState({\n                loaded: true\n            })\n        }\n    }\n\n    getPrompts(){\n        const { posts } = this.props;\n        if(this.state.loaded){\n            if(this.props.posts.length > 0){\n                return(\n                    posts.map((post,i) =>\n                            <Col id=\"prompt\">\n                                <Prompt \n                                    key={post.id} \n                                    id={post.id} \n                                    title={post.title} \n                                    genre={post.genre}\n                                    content={post.content}\n                                    author={post.author}\n                                    authorPic={post.authorPic ? post.authorPic : null}\n                                    time={post.createdAt}\n                                    likes={post.likes}\n                                    amountOfLikes={post.likes.length}\n                                />\n                            </Col> \n                    )\n                )\n            }else{\n                return(\n                    <div style={{ height: '400px', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n                        <p style={{ textAlign: 'center' }}>\n                            No prompts found :( <br></br><br></br>\n                            {this.props.auth.isEmpty ? '' : <NewPostModal title='Post your own prompt!'/>}\n                        </p>\n                    </div>\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '100px', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n    getSortOrder(){\n        var order = this.props.order\n        if(order === 'desc'){\n            return <Button onClick={this.handleSortOrder}><Icon type=\"down\"/></Button>\n        }else{\n            return <Button onClick={this.handleSortOrder}><Icon type=\"up\"/></Button>\n        }\n    }\n\n    handleSortOrder(){\n        return this.props.sortOrder()\n    }\n\n    render() {\n        const { Option } = Select;\n        return (\n            <div>\n                <Row>\n                    <PromptsFeedHeader loggedIn={this.props.auth.isEmpty ? false : true}/>\n                    <div id=\"feed-header\">\n                        <div id=\"breadcrumb-container\">\n                            <Breadcrumb>\n                                <Breadcrumb.Item>\n                                    Prompts\n                                </Breadcrumb.Item>\n                                <Breadcrumb.Item>\n                                    {this.props.query}\n                                </Breadcrumb.Item>\n                            </Breadcrumb>\n                        </div>\n                        <div>\n                            <Select showArrow={false} defaultValue=\"createdAt\" style={{ width: 100 }} onChange={this.handleSort}>\n                                <Option value=\"createdAt\" style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"clock-circle\" style={{ marginRight: '7px'}} />\n                                    New\n                                </Option>\n                                <Option value=\"likeCount\" style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"star\" style={{ marginRight: '7px'}} />\n                                    Top\n                                </Option>\n                            </Select>\n                        </div>\n                        {this.getSortOrder()}\n                    </div>\n                    <div>\n                        {this.getPrompts()}\n                    </div>\n                </Row>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n\n        const { getAll, query, sortBy, order } = props\n\n        if(getAll === true){\n            return [\n                { collection: 'posts',\n                  orderBy: [sortBy, order]\n                }\n            ]\n        }else{\n            return [{ \n                collection: 'posts', \n                orderBy: [sortBy, order],\n                where: [\"genre\", \"==\", query] \n            }]\n        }\n\n    })\n)(PromptsFeed)","import React, { Component } from 'react'\nimport { Card, Icon, Avatar, Tag, Tooltip, message } from 'antd';\nimport { Link } from 'react-router-dom'\nimport { getFirestore } from \"redux-firestore\";\nimport CopyToClipboard from 'react-copy-to-clipboard'\nimport { NavLink } from 'react-router-dom'\nimport ReportModal from '../Posts/ReportModal'\nimport '../../App.css'\nvar firebase = require('firebase');\n\nclass StoryCard extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            photoURL: null\n        }\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState({\n            amountOfLikes: this.props.likes.length\n        })\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked === false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i] === this.props.auth.displayName){\n                this.setState({\n                    userLiked: true\n                })\n                break\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <span className=\"heart-filled\">\n                    <Icon \n                        type=\"heart\"\n                        theme=\"filled\"\n                        size=\"large\"\n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }else{\n            return(\n                <span className=\"heart\">\n                    <Icon\n                        type=\"heart\" \n                        key=\"heart\"\n                    />\n                    <span id=\"likes\">\n                        {this.state.amountOfLikes}\n                    </span>\n                </span>\n            )\n        }\n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                // doc.data() will be undefined in this case\n                message.error(\"No such document!\");\n            }\n        }).catch(function(error) {\n            message.error(\"Error getting document:\", error);\n        });\n    }\n\n    getTimeLeft(){\n        var current = this.props.currentChapter\n        var created = this.props.createdAt.toDate()\n        var diffMins\n        var now = new Date()\n        var chapter2 = new Date(created.getTime() + 2880*60000);\n        var chapter3 = new Date(chapter2.getTime() + 2880*60000);\n        var chapter4 = new Date(chapter3.getTime() + 2880*60000);\n        var final = new Date(chapter4.getTime() + 2880*60000);\n\n        switch(current) {\n            case 1:\n                diffMins = (chapter2 - now) / 60000;\n                break;\n            case 2:\n                diffMins = (chapter3 - now) / 60000;\n                break;\n            case 3:\n                diffMins = (chapter4 - now) / 60000;\n                break;\n            case 4:\n                diffMins = (final - now) / 60000;\n                break;    \n            default:\n                break;\n        }\n\n        if(diffMins > 60){\n            return(\n                <Tooltip title=\"Hours left until chapter selection\">\n                    <Tag style={{\n                        background: 'none',\n                        border: '1px solid rgb(135, 232, 222, 0.5)',\n                        color: '#87e8de'\n                    }}>\n                        <span style={{ display: 'flex', alignItems: 'center'}}>\n                            <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                            {Math.round(diffMins / 60) + 'h '}\n                        </span>\n                    </Tag>\n                </Tooltip>\n            )\n        }else if(diffMins > 0) {\n            return(\n                <Tooltip title=\"Minutes left until chapter selection\">\n                    <Tag style={{\n                        background: 'none',\n                        border: '1px solid rgb(135, 232, 222, 0.5)',\n                        color: '#87e8de'\n                    }}>\n                        <span style={{ display: 'flex', alignItems: 'center'}}>\n                            <Icon style={{ marginRight: '4px' }}type=\"clock-circle\" />\n                            {Math.round(diffMins) + ' min'}\n                        </span>\n                    </Tag>\n                </Tooltip>\n            )\n        }\n    }\n\n    render() {\n        const { Meta } = Card;\n        return (\n                <Card\n                    actions={[     \n                        \n                        <Tooltip title=\"Like story\">\n                            <button id=\"cardActionBtn\" onClick={this.like}>\n                                <span className=\"heart-hover\">\n                                    {this.renderHeart()}\n                                </span>\n                            </button>\n                        </Tooltip>,\n\n                        <Tooltip title=\"Share story\">\n                            <CopyToClipboard text={'cowrite.io/story/' + this.props.id}\n                                onCopy={() => message.success('Link copied to clipboard')}\n                            >\n                                <button id=\"cardActionBtn\">\n                                    <Icon type=\"share-alt\"/>\n                                </button>\n                            </CopyToClipboard>\n                        </Tooltip>,\n\n                        <Tooltip title={this.props.author}>\n                            <button id=\"cardActionBtn\">\n                                <Icon type=\"user\"/>\n                            </button>\n                        </Tooltip>,\n\n                        <Tooltip title=\"Report this prompt\">\n                            <ReportModal \n                                title={this.props.title} \n                                type=\"story\"\n                                id={this.props.id}\n                                component=\"card\"\n                            />\n                        </Tooltip>\n                    ]}\n                    hoverable={true}\n                >\n                    <Link to={{ pathname: '/story/' + this.props.id, \n                        state: { \n                            id: this.props.id,\n                            auth: this.props.auth,\n                            yposition: this.props.yposition,\n                            query: this.props.query\n                        } \n                    }}>\n                    <Meta\n                        avatar={\n                            <NavLink to={{\n                                pathname: \"/user/\" + this.props.author\n                            }}> \n                                <Tooltip title={this.props.author}>\n                                    {this.state.photoURL !== null ?\n                                        <Avatar src={this.state.photoURL}/> :\n                                        <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                                }\n                                </Tooltip>\n                            </NavLink>\n                        }\n                        title = {\n                            <span id=\"title-container\">\n                                <span id=\"card-title\">{this.props.title}</span>\n\n                                <Tag style={{\n                                    background: 'none',\n                                    border: '1px solid rgb(135, 232, 222, 0.5)',\n                                    color: '#87e8de'\n                                }}>\n                                    {this.props.complete ? \n                                        'COMPLETE'\n                                    :\n                                        this.props.currentChapter !== this.props.numberOfChapters ?\n                                            <Tooltip title=\"Current chapter\">\n                                                <span style={{ display: 'flex', alignItems: 'center'}}>\n                                                    <Icon type=\"book\" style={{ marginRight: '4px' }}/>\n                                                    {this.props.currentChapter +  '/' + this.props.numberOfChapters}\n                                                </span>\n                                            </Tooltip> \n                                        :\n                                            'FINAL CHAPTER'\n                                    }\n                                </Tag>\n\n                                {this.getTimeLeft()}\n                            </span>\n                        }\n                        description =  { \n                            <div>\n                                \n                                <small>\n                                    {this.props.genre}\n                                </small>\n                                <br></br><br></br>\n                                <span id=\"card-content\">{this.props.content}</span>\n                                <br></br>\n                            </div>\n                        }\n                    />\n                    </Link>\n                </Card>\n            )\n    }\n}\n\nexport default StoryCard;\n","import React, { Component } from 'react'\nimport HelpModal from '../Common/HelpModal'\n\nclass StoriesFeedHeader extends Component {\n    render() {\n        return (\n            <div>\n                <div id=\"feed-header-text\">\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', marginBottom: '10px'}}>\n                        <h1 style={{ marginRight: '10px', marginBottom: 0 }}>Stories</h1>\n                        <HelpModal step={2}/>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StoriesFeedHeader;","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { Row, Col, Breadcrumb, Select, Spin, Icon, Button } from 'antd'\nimport StoryCard from '../Posts/StoryCard'\nimport '../../App.css'\nimport StoriesFeedHeader from './StoriesFeedHeader'\n\nclass StoriesFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            sort: \"new\",\n            loaded: false,\n            yposition: 0,\n            sortOrder: 'desc'\n        }\n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    handleSort(value){\n        return this.props.sort(value)\n    }\n\n    componentDidMount(){\n        if(!this.props.stories){\n            this.setState({\n                loaded: false,\n            })\n        }\n        window.addEventListener('scroll', this.listenToScroll)\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.listenToScroll)\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.stories !== this.props.stories){\n            if(this.state.yposition === 0){\n                this.setState({\n                    loaded: true,\n                    yposition: this.props.yposition\n                }, () => {\n                    this.scrollTo(this.state.yposition)\n                });\n            }else{\n                this.setState({\n                    loaded: true\n                }, () => {\n                    this.listenToScroll()\n                    this.scrollTo(this.state.yposition)\n                })\n            }\n        }\n    }\n\n    scrollTo(y){\n        window.scrollTo({\n            top: y,\n            behavior: 'smooth'\n        });\n    }\n\n    listenToScroll = () => {\n        this.setState({\n            yposition: window.scrollY,\n        })\n    }\n\n    getStories(){\n        const { stories } = this.props;\n        if(this.state.loaded){\n            if(this.props.stories.length > 0){\n                return(\n                    stories.map((post,i) =>\n                        <Col id=\"prompt\">\n                            <StoryCard \n                                key={post.id} \n                                auth={this.props.auth}\n                                id={post.id} \n                                title={post.title} \n                                genre={post.genre}\n                                content={post.prompt}\n                                numberOfChapters={post.numberOfChapters}\n                                author={post.author}\n                                authorPic={post.authorPic ? post.authorPic : null}\n                                createdAt={post.createdAt}\n                                currentChapter={post.currentChapter}\n                                chapters={post.chapters}\n                                chapter1={post.chapter1}\n                                chapter2={post.chapter2}\n                                chapter3={post.chapter3}\n                                chapter4={post.chapter4}\n                                likes={post.likes}\n                                yposition={this.state.yposition}\n                                query={this.props.query}\n                                complete={post.complete}\n                            />\n                        </Col> \n                    )\n                )\n            }else{\n                return(\n                    <div style={{ height: '400px', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n                        <p style={{ textAlign: 'center' }}>\n                            No stories found :( <br></br>\n                            Like prompts to help convert them into stories!\n                        </p>\n                    </div>\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '25%', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n    getSortOrder(){\n        var order = this.props.order\n        if(order === 'desc'){\n            return <Button onClick={this.handleSortOrder}><Icon type=\"down\"/></Button>\n        }else{\n            return <Button onClick={this.handleSortOrder}><Icon type=\"up\"/></Button>\n        }\n    }\n\n    handleSortOrder(){\n        return this.props.sortOrder()\n    }\n\n    render() {\n        const { Option } = Select;\n        return (\n            <div>\n                <StoriesFeedHeader/>\n                <Row>\n                    <div id=\"feed-header\">\n                        <div id=\"breadcrumb-container\">\n                            <Breadcrumb>\n                                <Breadcrumb.Item>\n                                    Stories\n                                </Breadcrumb.Item>\n                                <Breadcrumb.Item>\n                                    {this.props.query}\n                                </Breadcrumb.Item>\n                            </Breadcrumb>\n                        </div>\n                        <div>\n                            <Select showArrow={false} defaultValue=\"createdAt\" style={{ width: 120 }} onChange={this.handleSort}>\n                                <Option value=\"createdAt\" style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"clock-circle\" style={{ marginRight: '7px'}} />\n                                    New\n                                </Option>\n                                <Option value=\"likeCount\" style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"star\" style={{ marginRight: '7px'}} />\n                                    Top\n                                </Option>\n                                <Option value=\"numberOfChapters\" style={{ display: 'flex', alignItems: 'center' }}>\n                                    <Icon type=\"read\" style={{ marginRight: '7px'}} />\n                                    Chapters\n                                </Option>\n                            </Select>\n                            {this.getSortOrder()}\n                        </div>\n                    </div>\n                    {this.getStories()}\n                </Row>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        stories: state.firestore.ordered.stories,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n        const { getAll, sortBy, query, order } = props\n        if(getAll === true){\n            return [\n                { collection: 'stories',\n                  orderBy: [sortBy, order]\n                }\n            ]\n        }else if(query === \"complete\"){\n            return [{ \n                collection: 'stories', \n                orderBy: [sortBy, order],\n                where: [\"complete\", \"==\", true] \n            }]\n        }else{\n            return [{ \n                collection: 'stories', \n                orderBy: [sortBy, order],\n                where: [\"genre\", \"==\", query] \n            }]\n        }\n    })\n)(StoriesFeed)","import React, { Component } from 'react';\nimport { Menu, Icon, Divider } from 'antd';\nimport { NavLink } from 'react-router-dom'\nimport { FaLaughSquint, FaRobot, FaList } from 'react-icons/fa'\nimport { GiShardSword, GiRaiseZombie} from 'react-icons/gi'\nimport { FiMoreHorizontal } from 'react-icons/fi'\nimport '../../App.css'\n\nclass Sidebar extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            mobile: null\n        }\n        this.updateWidth = this.updateWidth.bind(this)\n        this.getWidth = this.getWidth.bind(this)\n    }\n\n    componentDidMount(){\n        this.getWidth();\n        window.addEventListener('resize', this.updateWidth);\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevState.mobile !== this.state.mobile){\n            this.renderMenu()\n        }\n    }\n\n    getWidth() {\n        if(window.innerWidth > 768){\n            this.setState({\n                mobile: false\n            })\n        }else{\n            this.setState({ \n                mobile: true\n            })\n        }\n    }\n\n    updateWidth(){\n        let mobile = this.state.mobile\n        if(window.innerWidth > 768 && mobile){\n            this.setState({\n                mobile: false\n            })\n        }else if(window.innerWidth < 768 && !mobile){\n            this.setState({\n                mobile: null\n            },() => {\n                this.setState({\n                    mobile: true\n                })\n            })\n        }\n    }\n\n    renderMenu(){\n        const { SubMenu } = Menu;\n        if(this.state.mobile !== null){\n            var mobile = this.state.mobile\n            return (\n                <Menu\n                    onClick={this.handleClick}\n                    style={this.state.mobile === false ? { \n                        height: '100vh',\n                        position: 'fixed',\n                        overflowY: 'scroll',\n                        overflowX: 'hidden',\n                        paddingTop: '100px',\n                        top: 0,\n                        left: 0\n                    } : {\n                        position: 'fixed',\n                        marginTop: '24px',\n                        left: '0',\n                        zIndex: 100\n                    }}\n                    selectedKeys={window.location.pathname}\n                    {...(mobile ? null : { defaultOpenKeys : ['sub1', 'sub2'] })}\n                    {...(mobile ? null : { openKeys : ['sub1', 'sub2'] })}\n                    // defaultOpenKeys={ this.state.mobile ? ['sub1'] : ['sub1', 'sub2']}\n                    mode={mobile ? 'horizontal' : 'inline'}\n                    id=\"sidebar\"\n                >\n                    <SubMenu\n                        key=\"sub1\"\n                        title={\n                            <span>\n                                <Icon type=\"edit\" />\n                                <span>Prompts</span>\n                            </span>\n                        }\n                        style={ mobile ? { width: '50%', textAlign: 'center' } : null }\n                    >\n                        <Menu.Item key=\"/prompts/all\">\n                            <NavLink to={{\n                                pathname: \"/prompts/all\"\n                            }}>\n                                <FaList style={styles.IconStyle}/>\n                                All\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/prompts/comedy\">\n                            <NavLink to={{\n                                pathname: \"/prompts/comedy\",\n                                state: {\n                                    query: 'Comedy'\n                                }\n                            }}>\n                                <FaLaughSquint style={styles.IconStyle}/>\n                                Comedy\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/prompts/horror\">\n                            <NavLink to={{\n                                pathname: \"/prompts/horror\",\n                                state: {\n                                    query: 'Horror'\n                                }\n                            }}>\n                                <GiRaiseZombie style={styles.IconStyle}/>\n                                Horror\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/prompts/fantasy\">\n                            <NavLink to={{\n                                pathname: \"/prompts/fantasy\",\n                                state: {\n                                    query: 'Fantasy'\n                                }\n                            }}>\n                                <GiShardSword \n                                    style={styles.IconStyle}\n                                />\n                                Fantasy\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/prompts/scifi\">\n                            <NavLink to={{\n                                pathname: \"/prompts/scifi\",\n                                state: {\n                                    query: 'SciFi'\n                                }\n                            }}>\n                                <FaRobot \n                                    style={styles.IconStyle} \n                                />\n                                SciFi\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/prompts/other\">\n                            <NavLink to={{\n                                pathname: \"/prompts/other\",\n                                state: {\n                                    query: 'Other'\n                                }\n                            }}>\n                                <FiMoreHorizontal \n                                    style={styles.IconStyle}\n                                />\n                                Other\n                            </NavLink>\n                        </Menu.Item>\n                    </SubMenu>\n    \n                    {this.state.mobile === true ? '' : <Divider/>}\n    \n                    {/* STORIES PART OF SIDEBAR*/}\n    \n                    <SubMenu\n                        key=\"sub2\"\n                        title={\n                            <span>\n                            <Icon type=\"read\" />\n                            <span>Stories</span>\n                            </span>\n                        }\n                        style={ this.state.mobile ? { width: '50%', textAlign: 'center' } : null }\n                    >\n                        <Menu.Item key=\"/stories/all\">\n                            <NavLink to={{\n                                pathname: \"/stories/all\",\n                                state: {\n                                    query: 'all'\n                                }\n                            }}>\n                                <FaList style={styles.IconStyle}/>\n                                All\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/complete\">\n                            <NavLink to={{\n                                pathname: \"/stories/complete\",\n                                state: {\n                                    query: 'complete'\n                                }\n                            }}>\n                                <Icon type=\"check-circle\" style={styles.IconStyle}/>\n                                Complete\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/comedy\">\n                            <NavLink to={{\n                                pathname: \"/stories/comedy\",\n                                state: {\n                                    query: 'Comedy'\n                                }\n                            }}>\n                                <FaLaughSquint               \n                                    style={styles.IconStyle}\n                                />\n                                Comedy\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/horror\">\n                            <NavLink to={{\n                                pathname: \"/stories/horror\",\n                                state: {\n                                    query: 'Horror'\n                                }\n                            }}>\n                                <GiRaiseZombie \n                                    style={styles.IconStyle}\n                                />\n                                Horror\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/fantasy\">\n                            <NavLink to={{\n                                pathname: \"/stories/fantasy\",\n                                state: {\n                                    query: 'Fantasy'\n                                }\n                            }}>\n                                <GiShardSword \n                                    style={styles.IconStyle}\n                                />\n                                Fantasy\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/scifi\">\n                            <NavLink to={{\n                                pathname: \"/stories/scifi\",\n                                state: {\n                                    query: 'SciFi'\n                                }\n                            }}>\n                                <FaRobot style={styles.IconStyle}/>\n                                SciFi\n                            </NavLink>\n                        </Menu.Item>\n                        <Menu.Item key=\"/stories/other\">\n                            <NavLink to={{\n                                pathname: \"/stories/other\",\n                                state: {\n                                    query: 'Other'\n                                }\n                            }}>\n                                <FiMoreHorizontal \n                                    style={styles.IconStyle}\n                                />\n                                Other\n                            </NavLink>\n                        </Menu.Item>\n                    </SubMenu>\n                </Menu>        \n            );\n        }else{\n            return <div></div>\n        }\n    }\n\n    render() { \n        return(\n            this.renderMenu()\n        )\n    }\n}\n\nconst styles = {\n    IconStyle: {\n        marginRight: '20px',\n        fontSize: '1.2em'\n    }\n}\n \nexport default Sidebar;","import React, { Component } from 'react'\nimport Prompt from '../Posts/Prompt'\nimport StoryCard from '../Posts/StoryCard'\nimport { Col, Row, Spin } from 'antd'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\n\nclass ProfilePostFeed extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            loaded: false\n        }\n    }\n\n    componentDidMount(){\n        if(!this.props.posts){\n            this.setState({\n                loaded: false\n            })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.posts !== this.props.posts){\n            this.setState({\n                loaded: true\n            })\n        }\n    }\n\n    getPosts(){\n        const { posts } = this.props;\n        if(this.state.loaded){\n            if(this.props.posts.length > 0){\n                return(\n                    posts.map((post,i) =>\n                            <Col id=\"prompt\">\n                                {post.type === \"story\" ?\n                                    <StoryCard \n                                        auth={this.props.auth}\n                                        key={post.id} \n                                        id={post.id} \n                                        createdAt={post.createdAt}\n                                        title={post.title} \n                                        genre={post.genre}\n                                        content={post.prompt}\n                                        author={post.author}\n                                        authorPic={post.authorPic ? post.authorPic : null}\n                                        time={post.createdAt}\n                                        likes={post.likes}\n                                        amountOfLikes={post.likes.length}\n                                        currentChapter={post.currentChapter}\n                                        numberOfChapters={post.numberOfChapters}\n                                    />\n                                :\n                                    <Prompt\n                                        key={post.id} \n                                        id={post.id} \n                                        title={post.title} \n                                        genre={post.genre}\n                                        content={post.content}\n                                        author={post.author}\n                                        authorPic={post.authorPic ? post.authorPic : null}\n                                        time={post.createdAt}\n                                        likes={post.likes}\n                                        amountOfLikes={post.likes.length}\n                                    />\n                                }\n                            </Col> \n                    )\n                )\n            }else{\n                return(\n                    <small>Nothing found</small>\n                )\n            }\n        }else{\n            return(\n                <div style={{ display: 'flex', marginTop: '100px', justifyContent: 'center'}}>\n                    <Spin size='large'/>\n                </div>\n            )\n        }\n    }\n\n\n    render() {\n        return (\n            <Row>\n                {this.getPosts()}\n            </Row>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        posts: state.firestore.ordered.posts,\n        auth: state.firebase.auth\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect( props => {\n        const {displayName, type} = props\n        if(type === \"yourPrompts\"){\n            return [{ \n                collection: 'posts',\n                where: ['author', '==', displayName],\n                storeAs: 'posts'\n            }]\n        }else if(type === \"yourStories\"){\n            return [{ \n                collection: 'stories',\n                where: ['author', '==', displayName],\n                storeAs: 'posts'\n            }]\n        }else if(type === \"likedPrompts\"){\n            return [{\n                collection: 'posts',\n                where: ['likes', 'array-contains', displayName],\n                storeAs: 'posts'\n            }]\n        }\n        else if(type === \"likedStories\"){\n        return [{\n            collection: 'stories',\n            where: ['likes', 'array-contains', displayName],\n            storeAs: 'posts'\n        }]\n    }\n    })\n)(ProfilePostFeed)","import React, { Component} from 'react'\nimport { Button, Input, Row, message } from 'antd'\nimport { getFirestore } from \"redux-firestore\";\nvar firebase = require('firebase');\n\nclass DisplayPicUploader extends Component {\n\n    fileSelectedHandler = event => {\n        this.fileUploadHandler(event.target.files[0])\n    }\n\n    fileUploadHandler = (file) => {\n        var user = firebase.auth().currentUser;\n        var userName = user.displayName\n        var storageRef = firebase.storage().ref(userName + '/profilePicture/' + file)\n        var uploadTask = storageRef.put(file)\n        uploadTask.on('state_changed', function(snapshot){\n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    break;\n                default: console.log('.')\n            }\n        }, function(error) {\n            message.error('Upload error: ', error)\n        }, function() {\n            // Handle successful uploads on complete\n            uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n                user.updateProfile({\n                    photoURL: downloadURL\n                }).then(function() {\n                    message.success('Display Pic Successfully Changed!')\n                    getFirestore().collection('users').doc(userName).update({\n                        photoURL: downloadURL\n                    })\n                    .then(function(){\n                        window.location.reload()\n                    })\n                }).catch(function(error) {\n                    message.error('Error: ', error)\n                });\n            });\n        });\n    }\n\n    deleteProfile(){\n\n    }\n\n    render() {\n        return (\n            <Row>\n                <Button style={{ padding: 0, margin: 0}}>\n                    <label style={{ width: '100%', height: '100%', padding: '10px'}} for=\"upload\">Change DP</label>\n                </Button>\n                <Input type=\"file\" id=\"upload\" style={{ visibility: 'hidden', width: 0, padding: 0 }} onChange={this.fileSelectedHandler}/>\n            </Row>\n        );\n    }\n}\n\nexport default DisplayPicUploader;","import React, { Component } from 'react';\nimport { Radio, Avatar, Row, Button, Popconfirm, message, Spin } from 'antd'\nimport ProfilePostFeed from '../Profile/ProfilePostFeed'\nimport DisplayPicUploader from './DisplayPicUploader';\nimport { getFirestore } from \"redux-firestore\";\nimport * as firebase from 'firebase'\nimport {withRouter} from 'react-router-dom';\n\nclass UserProfile extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            selected: 'yourPrompts',\n            isOwnProfile: false,\n            displayName: '',\n            photoURL: null,\n            userExists: null\n        }\n        this.handleRadioChange = this.handleRadioChange.bind(this)\n        this.deleteProfile = this.deleteProfile.bind(this)\n        this.doesUserExist = this.doesUserExist.bind(this)\n    }\n\n    componentWillMount(){\n        this.isOwnProfile()\n        this.doesUserExist()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.location.pathname !== prevProps.location.pathname) {\n            this.isOwnProfile()\n            this.doesUserExist()\n        }\n    }\n\n    isOwnProfile(){\n        var path = window.location.pathname.split('/')\n        var displayName = path[2]\n        if(displayName === this.props.auth.displayName){\n            this.setState({\n                isOwnProfile: true,\n                displayName: displayName\n            })\n            this.getAvatar(displayName)\n        }else{\n            this.setState({\n                isOwnProfile: false,\n                displayName: displayName\n            })\n            this.getAvatar(displayName)\n        }\n    }\n\n    handleRadioChange(e){\n        this.setState({\n            selected: e.target.value\n        })\n    }\n\n    showRelevantFeed(){\n        var path = window.location.pathname.split('/')\n        var displayName = path[2]\n        return(<ProfilePostFeed type={this.state.selected} displayName={displayName}/>)\n    }\n\n    async doesUserExist() {\n        var path = window.location.pathname.split('/')\n        var displayName = path[2]\n        const users = [];\n        await firebase.firestore().collection('users').get()\n          .then(querySnapshot => {\n            querySnapshot.docs.forEach(doc => {\n            users.push(doc.data());\n          });\n        });\n        for (let i = 0; i < users.length; i++) {\n            if(displayName === users[i].displayName){\n                this.setState({\n                    userExists: true\n                })\n            }else{\n                this.setState({\n                    userExists: false\n                })\n            }\n        }\n    }\n\n    getAvatar(displayName){\n        var that = this\n        getFirestore().collection('users').doc(displayName).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            }\n        }).catch(function(error) {\n            message.error(\"Error getting document:\", error);\n        });\n    }\n\n    deleteProfile(){\n        var user = firebase.auth().currentUser;\n        user.delete().then(function() {\n            getFirestore().collection('users').doc(user.displayName).delete()\n            .then(function() {\n                message.success('Succesfully deleted profile')\n                window.location.reload()\n            }).catch(function(error) {\n                message.error(error);\n            });\n        }).catch(function(error) {\n            message.error(error.message)\n        });\n    }\n\n    renderProfile(){\n        var path = window.location.pathname.split('/')\n        var displayName = path[2]\n        if(this.state.userExists){\n            return(\n                <div>\n                    <Row style={{ marginTop: '48px' }}>\n                        <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', marginBottom: '24px' }}>\n                            {this.state.photoURL !== null ?\n                                <Avatar shape=\"square\" size={98} src={this.state.photoURL}/>:\n                                <Avatar shape=\"square\" size={98} style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                            }\n                            <h1 style={{ marginLeft: '24px' }}>{displayName}</h1>\n                        </div>\n                        {this.state.isOwnProfile ? \n                            <div style={{ display: 'flex', flexDirection: 'row'}}>\n                                <DisplayPicUploader auth={this.props.auth}/>\n                                <Popconfirm\n                                    title=\"Are you sure you want to delete your profile? (this cannot be undone)\"\n                                    onConfirm={this.deleteProfile}\n                                    okText=\"Yes\"\n                                    cancelText=\"No\"\n                                >\n                                    <Button>Delete</Button>\n                                </Popconfirm>\n                            </div>:\n                            null\n                        }\n                    </Row>\n                    <Row style={{ marginTop: '48px' }} onChange={this.handleRadioChange}>\n                        <Radio.Group defaultValue=\"yourPrompts\" buttonStyle=\"solid\">\n                            {this.state.isOwnProfile ? \n                                <span>\n                                    <Radio.Button value=\"yourPrompts\">Your Prompts</Radio.Button>\n                                    <Radio.Button value=\"yourStories\">Your Stories</Radio.Button>\n                                    <Radio.Button value=\"likedPrompts\">Liked Prompts</Radio.Button>\n                                    <Radio.Button value=\"likedStories\">Liked Stories</Radio.Button>\n                                </span>\n                            :\n                                <span>\n                                    <Radio.Button value=\"yourPrompts\">{displayName}'s Prompts</Radio.Button>\n                                    <Radio.Button value=\"yourStories\">{displayName}'s Stories</Radio.Button>\n                                </span>\n                            }\n                        </Radio.Group>\n                    </Row>\n                    <Row style={{ marginTop: '48px' }}>\n                        {this.showRelevantFeed()}\n                    </Row>\n                </div>\n            )\n        }else if(this.state.userExists === null){\n            return(\n                <div style={{\n                    width: '100%',\n                    height: '90vh',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }}>\n                    <Spin/>\n                </div>\n            )\n        }else{\n            return <h2 style={{ marginTop: '100px '}}>{displayName + ' cannot be found.'}</h2>\n        }\n    }\n\n    render(){\n        return(\n            <div>\n                {this.renderProfile()}\n            </div>\n        )\n    }\n}\n\nexport default withRouter(props => <UserProfile {...props}/>);\n","import React, { Component } from 'react';\nimport '../../App.css'\n\nclass Footer extends Component {\n    render() {\n        return (\n            <div id=\"footer\">\n                cowrite 2019\n            </div>\n        );\n    }\n}\n\nexport default Footer;","import React, { Component } from 'react';\nimport PromptsFeed from '../Layout/PromptsFeed'\nimport StoriesFeed from '../Layout/StoriesFeed'\nimport Sidebar from '../Layout/Sidebar'\nimport UserProfile from '../Profile/UserProfile'\nimport { Row, Col } from 'antd';\nimport '../../App.css'\nimport Footer from '../Layout/Footer'\nimport { connect } from 'react-redux';\n\nclass Home extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            query: '',\n            getAll: false,\n            sort: 'createdAt',\n            sortOrder: 'desc',\n            yposition: 0\n        }\n        this.sort = this.sort.bind(this)\n        this.sortOrder = this.sortOrder.bind(this)\n    }\n\n    componentDidMount(){\n        this.getQuery()\n        this.getScrollPosition()\n        this.getAll()\n    }\n\n    getQuery(){\n        if(this.props.location.state){\n            this.setState({\n                query: this.props.location.state.query\n            })\n        }\n    }\n\n    getScrollPosition(){\n        if(this.props.location.state){\n            if(this.props.location.state.hasOwnProperty('yposition')){\n                this.setState({\n                    yposition: this.props.location.state.yposition\n                })\n            }\n        }\n    }\n\n    getAll(){\n        if(window.location.pathname.substr(-3) === 'all'){\n            this.setState({\n                getAll: true\n            })\n        }\n    }\n\n    sort(condition){\n        this.setState({\n            sort: condition\n        })\n    }\n\n    sortOrder(){\n        if(this.state.sortOrder === 'desc'){\n            this.setState({\n                sortOrder: 'asc'\n            })\n        }else{\n            this.setState({\n                sortOrder: 'desc'\n            })\n        }\n    }\n\n    showRelevantFeed(){\n        if(window.location.pathname.slice(1,8) === 'prompts'){\n            return <PromptsFeed \n                        sort={this.sort} \n                        order={this.state.sortOrder}\n                        sortOrder={this.sortOrder} \n                        sortBy={this.state.sort} \n                        getAll={this.state.getAll} \n                        query={this.state.query}\n                    />\n        }else if(window.location.pathname.slice(1,5) === 'user'){\n            return <UserProfile auth={this.props.auth} isOwnProfile={true}/>\n        }else{\n            return <StoriesFeed \n                        sort={this.sort} \n                        order={this.state.sortOrder}\n                        sortOrder={this.sortOrder} \n                        sortBy={this.state.sort} \n                        getAll={this.state.getAll} \n                        query={this.state.query} \n                        yposition={this.state.yposition}\n                    />\n        }\n    }    \n\n    render() {\n        return (\n            <div>\n            <div id=\"home\">\n                <Row>\n                    <Col xs={24} md={5} xl={3}>\n                        <Sidebar auth={this.props.auth} query={this.updateQuery}/>\n                    </Col>\n                    <Col xs={22} md={17} xl={19} offset={1}  id=\"feed-container\">\n                        {this.showRelevantFeed()}\n                    </Col>\n                </Row>\n            </div>\n            <Footer/>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react'\nimport { Menu, Dropdown, Icon, Button, Avatar, message } from 'antd';\nimport { NavLink } from 'react-router-dom'\nimport { getFirestore } from \"redux-firestore\";\nimport { FiLogOut } from 'react-icons/fi'\n\nclass AccountDropdown extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            photoURL: null\n        }\n        this.getAvatar = this.getAvatar.bind(this)\n    }\n\n    componentDidMount(){\n        this.getAvatar()\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.displayName !== this.props.displayName){\n            window.location.reload()\n        }\n    }\n\n    getAvatar(){\n        var that = this\n        if(this.props.auth.displayName !== null){\n            getFirestore().collection('users').doc(this.props.auth.displayName).get()\n            .then(function(doc) {\n                if (doc.exists) {\n                    if(doc.data().photoURL !== undefined){\n                        that.setState({\n                            photoURL: doc.data().photoURL\n                        })\n                    }else{\n                        that.setState({\n                            photoURL: null\n                        })\n                    }\n                } else {\n                    message.error('Pic does not exist')\n                }\n            }).catch(function(error) {\n                message.error(error)\n            });\n        }\n    }\n\n    render() {\n\n        const menu = (\n            <Menu>\n                <Menu.Item>\n                    <NavLink to={{\n                        pathname: \"/user/\" + this.props.auth.displayName\n                    }}>\n                        <Icon type=\"user\" style={{ marginRight: '7px' }}/>\n                        Profile\n                    </NavLink>\n                </Menu.Item>\n                <Menu.Item onClick={this.props.signOut} style={{ display: 'flex', alignItems: 'center'}}>\n                    <FiLogOut style={{ marginRight: '7px' }}/>\n                    Logout\n                </Menu.Item>\n            </Menu>\n        )\n\n        return (\n            <div>\n                <Dropdown overlay={menu} trigger={['click']}>\n                    <Button type=\"dashed\" style={{ background: 'none' }}>\n                        {this.state.photoURL !== null ?\n                            <Avatar size=\"small\" style={{ marginRight: '10px' }} src={this.state.photoURL}/> :\n                            <Avatar size=\"small\" style={{ background: '#111717', color: '#171F22', marginRight: '14px' }} icon=\"user\" />\n                        }\n                        {this.props.auth.displayName} \n                        <Icon type=\"down\" />\n                    </Button>\n                </Dropdown>\n            </div>\n        );\n    }\n}\n\nexport default AccountDropdown\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport {Dropdown, List, Badge, Icon } from 'antd'\n\nclass Notifications extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            loaded: false,\n            newNotifs: 0,\n            visible: false\n        }\n        this.resetNotifs = this.resetNotifs.bind(this)\n        window.addEventListener(\"scroll\", this.closeMenu);\n    }\n  \n    toggleMenu = () => {\n      this.setState({ visible: !this.state.visible })\n    }\n  \n    closeMenu = () => {\n      this.setState({ visible: false })\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.notifications !== this.props.notifications){\n            if(prevProps.notifications !== 0 && this.props.notifications > prevProps.notifications){\n                this.setState({\n                    loaded: true,\n                    newNotifs: (this.props.notifications.length - prevProps.notifications.length) + this.state.newNotifs\n                })\n            }else{\n                this.setState({\n                    loaded: true\n                })\n            }\n        }\n    }\n\n    getIcon(i){\n        var type = this.props.notifications[i].type\n        if(type === 'conversion'){\n            return <Icon type='sync'></Icon>\n        }else if(type === 'chapter'){\n            return <Icon type='forward'></Icon>\n        }else{\n            return <Icon type='check'></Icon>\n        }\n    }\n\n    getNotifications(){\n\n        var loaded = this.state.loaded\n        var notifications = this.props.notifications\n        var menuItems = []\n\n        if(loaded){\n            for (let i = 0; i < notifications.length; i++) {\n                menuItems.push(\n                    <div>\n                        <Link to={{ \n                            pathname: '/story/' + notifications[i].id, \n                            state: { \n                                id: notifications[i].id,\n                                auth: this.props.auth,\n                                yposition: 0,\n                                query: 'all'\n                            }\n                        }}>\n                            <List.Item \n                                key={i}\n                                onClick={this.closeMenu}\n                                style={{ \n                                    minHeight: '75px', \n                                    minWidth: '250px',\n                                    display: 'flex', \n                                    justifyContent: 'center',\n                                    flexDirection: 'row'\n                                }}\n                                className=\"notification\"\n                            >\n                                <div \n                                    style={{ \n                                        width: '20%',\n                                        display: 'flex', \n                                        justifyContent: 'center',\n                                        alignItems: 'center'\n                                    }}\n                                >\n                                    {this.getIcon(i)}\n                                </div>\n                                <div \n                                    style={{ \n                                        width: '75%',\n                                        display: 'flex', \n                                        justifyContent: 'center',\n                                        flexDirection: 'column'\n                                    }}\n                                >\n                                    <b>{notifications[i].title}</b>\n                                    <small \n                                        style={{ opacity: 0.6 }}\n                                    >\n                                    {notifications[i].notification} - {this.getTime(new Date(), notifications[i].date.toDate())}\n                                    </small>\n                                </div>\n                            </List.Item>\n                        </Link>\n                    </div>\n                )\n            }\n            return(\n                <List style={{ maxHeight: '80vh', overflowY: 'scroll', overflowX: 'hidden'}}>\n                    {menuItems}\n                </List>\n            )\n        }else{\n            return <small>Loading...</small>\n        }\n\n    }\n\n    getTime(current, posted){\n        var diffMin = (current - posted) / 60000\n        \n        if(diffMin > 60){\n            return Math.round(diffMin / 60) + 'h ago'\n        }else if(diffMin > 1){\n            return Math.round(diffMin) + ' min ago'\n        }else{\n            return 'now'\n        }\n    }\n\n    resetNotifs(){\n        this.setState({ newNotifs: 0 })\n    }\n\n    render() {\n        return (\n            <div>\n                <Dropdown \n                    overlay={this.getNotifications()} \n                    trigger={['click']}\n                    onVisibleChange={this.toggleMenu}\n                    visible={this.state.visible}\n                >\n                    <Badge id=\"notification-badge\" count={this.state.newNotifs > 10 ? '10+' : this.state.newNotifs} onClick={this.resetNotifs}>\n                        <Icon type=\"notification\" />\n                    </Badge>\n                </Dropdown>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        notifications: state.firestore.ordered.notifications,\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect((props) => {\n        return [\n            { \n                collection: 'notifications',\n                limit: 20,\n                orderBy: ['date', 'desc']\n            }\n        ]\n    })\n)(Notifications)","import React, { Component, Fragment } from 'react'\nimport NewPostModal from '../Posts/NewPostModal';\nimport { signOut } from '../../Store/Actions/authActions'\nimport { connect } from 'react-redux'\nimport HelpModal from '../Common/HelpModal'\nimport AccountDropdown from '../Common/AccountDropdown'\nimport Notifications from '../Common/Notifications'\nimport '../../App.css'\n\nclass SignedInLinks extends Component {\n\n    render() {\n        return (\n            <Fragment>\n\n                <div className=\"nav-link\">\n                    <NewPostModal title=\"Prompt\"/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <HelpModal/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <AccountDropdown signOut={this.props.signOut} auth={this.props.auth}/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <Notifications/>\n                </div>\n\n            </Fragment>\n        );\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signOut: () => dispatch(signOut())\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(SignedInLinks);","import { getFirestore } from \"redux-firestore\";\nimport { message } from 'antd'\n\nexport const signIn = (credentials) => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n        firebase.auth().signInWithEmailAndPassword(\n            credentials.email,\n            credentials.password\n        ).then(() => {\n            dispatch({ type: 'LOGIN_SUCCESS'});\n            message.success('Logged in successfully')\n            window.location.reload();\n        }).catch((err) => {\n            dispatch({ type: 'LOGIN_ERROR', err });\n        })\n    }\n} \n\nexport const signOut = () => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n        firebase.auth().signOut().then(() => {\n            dispatch({ type: 'SIGNOUT_SUCCESS' });\n            message.success('Signed out successfully')\n            window.location.reload();\n        })\n    }\n}\n\nexport const signUp = (newUser) => {\n    return (dispatch, getState, {getFirebase}) => {\n        const firebase = getFirebase();\n        const firestore = getFirestore();\n        let check = false;\n        let usersRef = firestore.collection('users');\n        usersRef.get()\n        .then(snapshot => {\n            snapshot.forEach(doc => {\n                if (doc.id === newUser.username) { check = true; }\n            });\n            if (check === false) {\n                firebase.auth().createUserWithEmailAndPassword(\n                    newUser.email,\n                    newUser.password,\n                ).then((resp) => {\n                    return (\n                        firestore.collection('users').doc(newUser.username).set({\n                            uid: resp.user.uid,\n                            displayName: newUser.username\n                        }),\n                        firebase.auth().currentUser.updateProfile({\n                            displayName: newUser.username,\n                        })\n                    )\n                }).then(() => {\n                    dispatch({ type: 'SIGNUP_SUCCESS'})\n                    window.location.reload()\n                }).catch(err => {\n                    dispatch({ type: 'SIGNUP_ERROR', err})\n                })\n            } else {\n                dispatch({ type: 'NAME_TAKEN'})\n            }\n        })\n\n    }\n}","import React, { Component } from 'react'\nimport { Form, Icon, Input, Button, message } from 'antd';\nimport { connect } from 'react-redux';\nimport { signIn } from '../../Store/Actions/authActions'\nimport '../../App.css'\n\nclass SignInModalDetails extends Component {\n  \n    constructor() {\n        super();\n        this.state = {\n            email: '',\n            password: '',\n            error: null\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.authError !== this.props.authError){\n            this.setState({\n                error: this.props.authError\n            })\n        }\n        if(prevState.error !== this.state.error && this.state.error !== null){\n            message.error(this.state.error)\n            this.setState({\n                error: null\n            })\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.signIn(this.state);\n    }\n\n    render() {\n        return (\n            <div>\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                <h2>Login</h2>\n                <br></br>\n                <Form.Item>\n                    <Input\n                        id=\"email\"\n                        onChange={this.handleChange} \n                        prefix={<Icon type=\"user\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                        placeholder=\"Username\"\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Input.Password\n                        id=\"password\"\n                        onChange={this.handleChange} \n                        prefix={<Icon type=\"lock\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                        type=\"password\"\n                        placeholder=\"Password\"\n                    />\n                </Form.Item>\n                <Button type=\"primary\" htmlType=\"submit\">    \n                    <Icon type=\"plus\"/>\n                    Login\n                </Button>\n            </Form>\n            </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        authError: state.auth.authError\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signIn: (creds) => dispatch(signIn(creds))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInModalDetails)","import React from 'react';\nimport SignInModalDetails from '../Auth/SignInModalDetails'\nimport { Button, Modal, Icon } from 'antd';\nimport '../../App.css'\n\nclass SignInModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            visible: false\n        }\n        this.showModal = this.showModal.bind(this)\n        this.handleCancel = this.handleCancel.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Button onClick={this.showModal}>\n                    <Icon type=\"user\"/>    \n                    Login\n                </Button>\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    className=\"login-form-modal\"\n                >\n                    <SignInModalDetails/>   \n                </Modal>\n            </div>\n    );\n  }\n}\n\nexport default SignInModal","import React, { Component } from 'react'\nimport { Form, message, Input, Button,  Row, Col, Icon } from 'antd';\nimport { connect } from 'react-redux';\nimport { signUp } from '../../Store/Actions/authActions'\nimport signupbg from '../../img/signupbg.png'\nimport '../../App.css'\n\nclass SignUpModalDetails extends Component {\n  \n    constructor() {\n        super();\n        this.state = {\n            email: '',\n            password: '',\n            username: ''\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevProps.authError !== this.props.authError){\n            this.forceUpdate()\n            message.error(this.props.authError)\n        }\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        let email = this.state.email\n        let password = this.state.password\n        let username = this.state.username\n\n        if(email.length === 0 || password.length === 0 || username.length === 0){\n            message.error('Some fields left empty')\n        }else if(username.length >= 20){\n            message.error('Username too long')\n        }else{\n            this.props.signUp(this.state);\n        }\n    }\n\n    render() {\n        return (\n            <Row style= {{ backgroundColor: '#1a1a1a', height: '100%'}}>\n\n                <Col xs={24} md={12} className=\"left-side-signup\">\n\n                    <h1>Welcome to cowrite!</h1>\n                    <br></br>\n\n                    <div className=\"signup-form\">\n                        <Form onSubmit={this.handleSubmit}>\n                            <Form.Item>\n                                <Input\n                                    id=\"username\"\n                                    prefix={<Icon type=\"user\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                                    onChange={this.handleChange} \n                                    placeholder=\"Username\"\n                                />\n                            </Form.Item>\n\n                            <Form.Item>\n                                <Input\n                                    id=\"email\"\n                                    prefix={<Icon type=\"mail\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                                    onChange={this.handleChange} \n                                    placeholder=\"Email\"\n                                />\n                            </Form.Item>\n\n                            <Form.Item>\n                                <Input.Password\n                                    id=\"password\"\n                                    prefix={<Icon type=\"lock\" style={{ color: 'rgba(255,255,255,.25)' }} />}\n                                    onChange={this.handleChange} \n                                    placeholder=\"Password\"\n                                />\n                            </Form.Item>\n\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"sign-up-submit\">    \n                                Join\n                            </Button>\n\n                        </Form>\n                    </div>\n                </Col>\n\n                <Col xs={0} md={12}>\n                    <div className=\"join-bg\">\n                        <img src={signupbg} alt=\"bg\" />\n                    </div>\n                </Col>\n                \n\n            </Row>\n            \n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        authError: state.auth.authError\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        signUp: (creds) => dispatch(signUp(creds))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpModalDetails)","import React from 'react';\nimport SignUpModalDetails from '../Auth/SignUpModalDetails'\nimport { Modal, Button, Icon } from 'antd';\n\nclass SignUpModal extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: false\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n    }\n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.setState({\n            visible: false\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <Button \n                    onClick={this.showModal}\n                    type=\"primary\"\n                >\n                    <Icon type=\"user\"/>    \n                    Join\n                </Button>\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    className={'sign-up-modal'}\n                >\n                <SignUpModalDetails/>\n                </Modal>\n            </div>\n    );\n  }\n}\n\nexport default SignUpModal","import React, { Component, Fragment } from 'react'\nimport SignInModal from '../Auth/SignInModal'\nimport SignUpModal from '../Auth/SignUpModal'\nimport HelpModal from '../Common/HelpModal'\nimport '../../App.css'\n\nclass SignedOutLinks extends Component {\n    \n    render() {\n        return (\n            <Fragment>\n\n                <div className=\"nav-link\">\n                    <HelpModal/>\n                </div>\n\n                <div className=\"nav-link\">\n                    <SignInModal/>\n                </div>\n                \n                <div className=\"nav-link\">\n                    <SignUpModal/>\n                </div>\n                \n            </Fragment>\n            \n        );\n    }\n}\n\nexport default SignedOutLinks;","import React from 'react'\nimport { Menu, Row, Col } from 'antd'\nimport '../../App.css'\nimport SignedInLinks from '../Auth/SignedInLinks';\nimport SignedOutLinks from '../Auth/SignedOutLinks';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom'\nimport logo from '../../img/logo.png'\n\nconst Nav = (props) => {\n    const { auth } = props;\n    const links = auth.uid ? <SignedInLinks auth={auth}/> : <SignedOutLinks/>;\n    return (\n        <div>\n            <Menu id=\"navBar\" mode=\"horizontal\">\n\n                <Row className=\"nav-row\">\n                    <NavLink to={{\n                        pathname: \"/\"\n                    }}> \n                        <Col xs={24} md={3} className=\"nav-col-left\">\n                            <Menu.Item key=\"app\">\n                                    <img id=\"logo\" src={logo} alt=\"logo\"/>\n                            </Menu.Item>\n                        </Col>\n                    </NavLink>\n\n                    <Col xs={24} md={20} className=\"nav-col-right\">\n                        { links }\n                    </Col>\n                </Row>\n\n            </Menu>\n        </div>\n\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nexport default connect(mapStateToProps)(Nav);","import React, { Component } from 'react'\nimport { Comment, Tooltip, Icon, Avatar, message, Popconfirm, Row } from 'antd'\nimport { getFirestore } from \"redux-firestore\";\nimport { NavLink } from 'react-router-dom'\nvar firebase = require('firebase');\n\nclass StoryComment extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            amountOfLikes : 0,\n            userLiked: false,\n            expanded: false\n        }\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.deleteSubmission = this.deleteSubmission.bind(this)\n        this.expandComment = this.expandComment.bind(this)\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(prevProps.id !== this.props.id){\n            this.setState({\n                amountOfLikes : 0,\n                userLiked: false\n            })\n            this.getLikeAmount()\n            this.userLiked()    \n        }\n    }\n\n    componentDidMount(){\n        this.getLikeAmount()\n        this.userLiked()\n        this.getAvatar()\n    }\n\n    getTime(){\n        var postedTime = this.props.time\n        var currentTime = new Date()\n        var diff = currentTime - postedTime\n        var hours = diff / 1000 / 60 / 60\n\n        if(hours >= 24){\n            return(Math.round(hours / 24) + ' days ago')\n        }\n        else if(hours < 1){\n            if(hours < 0.016){\n                return 'now'\n            }else{\n                return Math.round(diff / 1000 / 60) + ' minutes ago'\n            }\n        }else{\n            return Math.round(hours) + ' hours ago'\n        }\n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i].uid === this.props.uid){\n                this.setState({\n                    userLiked: true\n                })\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <Icon \n                    type=\"heart\"\n                    theme=\"filled\"\n                    key=\"heart\" \n                    style={{ color:'#ff7a45', fontSize: '20px' }}\n                />\n            )\n        }else{\n            return(\n                <Icon \n                    type=\"heart\" \n                    key=\"heart\" \n                    style={{ color:'rgba(255,255,255,0.3)', fontSize: '20px' }}\n                />\n            )\n        }\n    }\n\n    getLikeAmount(){\n        this.setState({\n            amountOfLikes: this.props.likeCount\n        })\n    }\n\n    like(){\n        if (this.props.uid) {\n            if(this.state.userLiked === false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id)\n                .update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        {\n                            uid: this.props.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id)\n                .update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        {\n                            uid: this.props.uid\n                        }\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n            }\n        }else{\n            message.error('Please login to like submissions')\n        }\n\n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                message.error(\"No such document!\");\n            }\n        }).catch(function(error) {\n            message.error(\"Error getting document:\", error);\n        });\n    }\n\n    deleteSubmission(){\n        getFirestore().collection('stories').doc(this.props.postId).collection('submissions').doc(this.props.id).delete()\n        .then(function() {\n            message.success('Your submission has been deleted.')\n        }).catch(function(error) {\n            message.error(error)\n        });\n    }\n\n    isOwnSubmission(){\n        var currentUser = this.props.auth.displayName\n        if(currentUser === this.props.author){\n            return(\n                <Popconfirm\n                    title=\"Are you sure you want to delete your submission?\"\n                    onConfirm={this.deleteSubmission}\n                    okText=\"Yes\"\n                    cancelText=\"No\"\n                >\n                    delete\n                </Popconfirm>\n            )\n        }\n    }\n\n    expandComment(){\n        this.setState({\n            expanded: !this.state.expanded\n        })\n    }\n\n    expandStyle(){\n        if(this.state.expanded){\n            return({\n                height: 'auto',\n            })\n        }else{\n            return({\n                maxHeight: '6.3em',\n                overflow: 'hidden',\n            })\n        }\n    }\n\n    render() {  \n        const actions = [\n            this.isOwnSubmission()\n        ]\n        return (\n            <div className=\"comment-hover\">\n                <Comment\n                    author={\n                        <NavLink to={{\n                            pathname: \"/user/\" + this.props.author\n                        }}>\n                            {this.props.author}\n                        </NavLink>\n                    }\n                    actions={actions}\n                    avatar={\n                        <div style={{ height: '100%' }}>\n                            <Row style={{ display: 'flex', flexDirection: 'column' }}>\n                                <Tooltip title={this.props.author}>\n                                    <NavLink to={{\n                                        pathname: \"/user/\" + this.props.author\n                                    }}>\n                                        {this.state.photoURL !== null ?\n                                            <Avatar src={this.state.photoURL}/> :\n                                            <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                                        }\n                                    </NavLink>\n                                </Tooltip>\n                            </Row>\n                            <Row \n                                style={{ \n                                    display: 'flex', \n                                    flexDirection: 'column', \n                                    alignItems: 'center',\n                                    marginTop: '14px'\n                                }}\n                            >\n                                <div onClick={this.like} style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\n                                    <Tooltip title=\"Like\">\n                                        {this.renderHeart()}\n                                    </Tooltip>\n                                </div>\n                                <div>\n                                    <small style={{ color: 'rgba(255,255,255,0.6)' }}>\n                                        {this.state.amountOfLikes}\n                                    </small>\n                                </div>\n                            </Row>\n                        </div>\n                    }\n                    content={\n                        <div>\n                            <div onClick={this.expandComment} style={this.expandStyle()} className=\"comment-text-hover\">\n                                <p>{this.props.comment}</p>\n                            </div>\n                            <div>\n                                {this.state.expanded ? \n                                    null :\n                                    <p>...</p>\n                                }\n                            </div>\n                        </div>\n                    }\n                    datetime={this.getTime()}\n                />\n            </div>\n        )\n    }\n}\n\nexport default StoryComment;","import React, { Component } from 'react'\nimport StoryComment from '../Posts/StoryComment'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { List, Select, Button, Icon, Tag } from 'antd'\n\n\nclass Comments extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            loaded: false,\n            submissions: [],\n            sortOrder: 'desc'\n        }        \n        this.handleSort = this.handleSort.bind(this)\n        this.handleSortOrder = this.handleSortOrder.bind(this)\n    }\n\n    componentDidUpdate(prevState, prevProps){\n        if(this.state.loaded !== this.props.loaded || prevState.submissions !== this.props.submissions){\n            this.setState({\n                loaded: true,\n                submissions: this.props.submissions\n            })\n            return this.props.getSubmissions(this.props.auth.uid, this.props.submissions)\n        }\n    }\n\n    handleSort(value){\n        return this.props.updateSort(value)\n    }\n\n    handleSortOrder(){\n        var order = this.props.sortOrder\n        if(order === 'desc'){\n            return this.props.updateSortOrder('asc')\n        }else{\n            return this.props.updateSortOrder('desc')\n        }\n    }\n    \n    renderSortArrow(){\n        var order = this.props.sortOrder\n        if(order === 'desc'){\n            return <Icon type=\"down\"/>\n        }else{\n            return <Icon type=\"up\"/>\n        }\n    }\n\n    getComments(){\n        if(this.state.loaded && this.state.submissions.length > 0){\n            return(\n                <List\n                    className=\"comment-list\"\n                    header={this.getCommentSort()}\n                    itemLayout=\"horizontal\"\n                    dataSource={this.getSubmissions()}\n                    renderItem={item => (\n                        <li>\n                            <StoryComment \n                                id={item.id}\n                                postId={item.postId}\n                                auth={this.props.auth}\n                                uid={this.props.auth.uid}\n                                author={item.author}\n                                comment={item.content}\n                                likes={item.likes}\n                                likeCount={item.likeCount}\n                                time={item.time}\n                            />\n                        </li>\n                    )}\n                />\n            )\n        }else{\n            return(\n                <List\n                    className=\"comment-list\"\n                    header={this.getCommentSort()}\n                    itemLayout=\"horizontal\"\n                    dataSource={[]} \n                    locale={{ emptyText: <p>No Submissions</p> }}\n                />\n            )\n        }\n    }\n\n    getCommentSort(){\n        const { Option } = Select;\n        return(\n            <div style={{marginBottom: '24px', marginTop: '24px' }}>\n                <Select \n                    defaultValue=\"time\" \n                    style={{ width: 80 }} \n                    onChange={this.handleSort}\n                    showArrow={false}\n                >\n                    <Option value=\"time\">New</Option>\n                    <Option value=\"likeCount\">Top</Option>\n                </Select>\n                <Button style={{ marginLeft: '5px', marginRight: '24px' }} onClick={this.handleSortOrder}>\n                    {this.renderSortArrow()}\n                </Button>\n                <small>\n                    <Tag>\n                        <Icon type=\"hourglass\"/> \n                        {' ' + this.props.timeLeft}\n                    </Tag>\n                    <Tag>\n                        {this.state.submissions.length + ' submissions'}\n                    </Tag>\n                </small>\n            </div>\n        )\n    }\n\n    getSubmissions(){\n        const subs = []\n        for (let i = 0; i < this.state.submissions.length; i++) {\n            subs.push({\n                postId: this.state.submissions[i].postId,\n                uid: this.props.auth.uid,\n                id: this.state.submissions[i].id,\n                author: this.state.submissions[i].author,\n                content: this.state.submissions[i].content,\n                likes: this.state.submissions[i].likes,\n                likeCount: this.state.submissions[i].likeCount,\n                time: this.state.submissions[i].time.toDate()\n            })\n        }\n        return subs\n    }\n\n    render() {\n        return (\n            <div id=\"comments\">\n                {this.getComments()}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        submissions: state.firestore.ordered.submissions,\n        auth: state.firebase.auth,\n        loaded: true\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect(props => {\n        return [{\n            collection: 'stories',\n            doc: props.id,\n            subcollections: [{ collection: 'submissions'}],\n            where: [\n                'chapter', '==', props.chapter\n            ],\n            orderBy: [props.sort, props.sortOrder],\n            storeAs: 'submissions'\n        }];\n    })\n)(Comments)","import React, { Component } from 'react'\nimport { Input, Button, Form, message } from 'antd';\nimport { connect } from 'react-redux'\nimport { submitChapter } from '../../Store/Actions/postActions'\n\nconst { TextArea } = Input;\n\nclass SubmitChapter extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            content: '',\n            remainingCharacters: 10000\n        }\n    }\n\n    componentDidMount(){\n        this.setState({\n            postId: this.props.id,\n            chapter: this.props.chapter\n        })\n    }\n\n    handleChange = (e) => {\n        if(e.target.id === 'content'){\n            var content = e.target.value.toString()\n            this.setState({\n                remainingCharacters: 10000 - content.length\n            })\n        }\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) =>{\n        e.preventDefault();\n        if(this.state.content.length < 10){\n            message.error('Chapter submission is too short')\n        }\n        else if(this.state.remainingCharacters > 0){\n            this.props.closePanel()\n            this.props.submitChapter(this.state)\n        }else{\n            message.error('Chapter submission is too long')\n        }\n    }\n\n    render() { \n        return (  \n            <div>\n                <Form onSubmit={this.handleSubmit}>\n                <Form.Item>\n                    <TextArea\n                        id=\"content\"\n                        className=\"submit-chapter-input\"\n                        onChange={this.handleChange}\n                        autosize={{ minRows: 3, maxRows: 15 }}\n                    />\n                </Form.Item>\n                <span \n                    style={\n                        this.state.remainingCharacters < 0 ? \n                            { color: '#fa541c', opacity: 0.5} : \n                            { opacity: 0.5 }\n                    }\n                >\n                    <small>{this.state.remainingCharacters} characters left</small>\n                </span>\n                <br></br>\n                <Button \n                    type=\"primary\"\n                    id=\"submit-chapter-button\"\n                    htmlType=\"submit\"\n                >\n                    Submit\n                </Button>\n                </Form>\n            </div>\n        );\n    }\n}\n \nconst mapStateToProps = (state) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        submitChapter: (submission) => dispatch(submitChapter(submission))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubmitChapter)\n\n","import React, { Component } from 'react'\nimport { Comment, Avatar, Tooltip, Row, message } from 'antd'\nimport { getFirestore } from \"redux-firestore\";\nimport { NavLink } from 'react-router-dom'\n\nclass SelectedComments extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            amountOfLikes : 0\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(prevProps.id !== this.props.id){\n            this.setState({\n                amountOfLikes : 0,\n                userLiked: false\n            })\n            this.getLikeAmount()\n        }\n    }\n\n    componentDidMount(){\n        this.getLikeAmount()\n        this.getAvatar()\n    }\n\n    getLikeAmount(){\n        this.setState({\n            amountOfLikes: this.props.likeCount\n        })\n    }\n\n    getAvatar(){\n        var that = this\n        getFirestore().collection('users').doc(this.props.author).get()\n        .then(function(doc) {\n            if (doc.exists) {\n                if(doc.data().photoURL !== undefined){\n                    that.setState({\n                        photoURL: doc.data().photoURL\n                    })\n                }else{\n                    that.setState({\n                        photoURL: null\n                    })\n                }\n            } else {\n                message.error(\"No such document!\");\n            }\n        }).catch(function(error) {\n            message.error(\"Error getting document:\", error);\n        });\n    }\n\n    getTime(){\n        var postedTime = this.props.time\n        var currentTime = new Date()\n        var diff = currentTime - postedTime\n        var hours = diff / 1000 / 60 / 60\n\n        if(hours >= 24){\n            return(Math.round(hours / 24) + ' days ago')\n        }\n        else if(hours < 1){\n            if(hours < 0.016){\n                return 'now'\n            }else{\n                return Math.round(diff / 1000 / 60) + ' minutes ago'\n            }\n        }else{\n            return Math.round(hours) + ' hours ago'\n        }\n    }\n\n    render() { \n        return (\n            <div className=\"comment-hover\" style={{ marginTop: '24px', paddingRight: '24px'}}>\n                <Comment\n                    author={\n                        <NavLink to={{\n                            pathname: \"/user/\" + this.props.author\n                        }}>\n                            {this.props.author}\n                        </NavLink>\n                    }\n                    avatar={\n                        <div style={{ height: '100%' }}>\n                            <Row style={{ display: 'flex', flexDirection: 'column' }}>\n                                <Tooltip title={this.props.author}>\n                                    {this.state.photoURL !== null ?\n                                        <Avatar src={this.state.photoURL}/> :\n                                        <Avatar style={{ background: '#111717', color: '#171F22' }} icon=\"user\" />\n                                }\n                                </Tooltip>\n                            </Row>\n                        </div>\n                    }\n                    content={\n                        <div>\n                            <div className=\"comment-text-hover\">\n                                <p>{this.props.comment}</p>\n                            </div>\n                        </div>\n                    }\n                    datetime={this.getTime()}\n                />\n            </div>\n        )\n    }\n}\n\nexport default SelectedComments;","import React, { Component } from 'react';\nimport Comments from './Comments'\nimport SubmitChapter from './SubmitChapter'\nimport SelectedComment from '../Posts/SelectedComment'\nimport { Button, Icon, message, Radio, Row, Col, Divider, Tooltip } from 'antd';\nimport { getFirestore } from \"redux-firestore\";\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport { NavLink } from 'react-router-dom'\nimport ReportModal from '../Posts/ReportModal'\nimport '../../App.css'\nvar firebase = require('firebase');\n\nclass StoryModalContent extends Component {\n\n    constructor(props){\n        super(props)\n        this.state={\n            panelOpen: false,\n            chapter: 1,\n            sort: 'time',\n            sortOrder: 'desc',\n            uid: '',\n            likes: [],\n            amountOfLikes: 0,\n            userLiked: false,\n            submissions: [],\n            submissionsLoaded: false,\n            userSubmitted: true,\n            selectedChapter: 0,\n            timeLeft: 0 // Minutes left in chapter\n        }\n        this.updateCommentSort = this.updateCommentSort.bind(this)\n        this.updateCommentSortOrder = this.updateCommentSortOrder.bind(this)\n        this.getSubmissions = this.getSubmissions.bind(this)\n        this.openSubmitPanel = this.openSubmitPanel.bind(this)\n        this.closeSubmitPanel = this.closeSubmitPanel.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.like = this.like.bind(this)\n        this.userLiked = this.userLiked.bind(this)\n        this.hasUserSubmitted = this.hasUserSubmitted.bind(this)\n        this.timeLeft = this.timeLeft.bind(this)\n        this.next = this.next.bind(this)\n        this.prev = this.prev.bind(this)\n    }\n\n    componentDidMount(){\n        var current = this.props.currentChapter\n        var selected\n\n        if(this.props.complete){\n            selected = 0\n        }else{\n            selected = current - 1\n        }\n\n        this.setState({\n            amountOfLikes: this.props.likes.length,\n            currentChapter: current,\n            selectedChapter: selected\n        })\n        this.userLiked()\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        if(prevState.submissions !== this.state.submissions){\n            this.setState({\n                submissionsLoaded: true\n            },() => {\n                this.hasUserSubmitted()\n                this.timeLeft()\n            })\n        }\n    }\n\n    getComments(){\n\n        var selected = this.props.selectedChapters\n        var radio = this.state.selectedChapter\n        var current = this.state.currentChapter\n\n        if(current){\n            if((radio + 1) < current || this.props.complete){\n                return (\n                    <div style={{\n                        backgroundColor: '#0E1314'\n                    }}>\n                        <SelectedComment \n                            id={selected[radio].id}\n                            postId={selected[radio].postId}\n                            uid={this.props.auth.uid}\n                            author={selected[radio].author}\n                            comment={selected[radio].content}\n                            likes={selected[radio].likes}\n                            likeCount={selected[radio].likeCount}\n                            auth={this.props.auth}\n                            time={this.props.createdAt.toDate()}\n                        />\n                    </div>\n                )\n            }else{\n                return(\n                    <Comments\n                        id={this.props.id}\n                        uid={this.state.uid}\n                        chapter={this.state.selectedChapter + 1}\n                        sort={this.state.sort}\n                        sortOrder={this.state.sortOrder}\n                        updateSort={this.updateCommentSort}\n                        updateSortOrder={this.updateCommentSortOrder}\n                        submissions={this.state.submissions}\n                        getSubmissions={this.getSubmissions}\n                        timeLeft={this.state.timeLeft}\n                    />\n                )\n            }\n        }else{\n            return <p>Loadin</p>\n        }\n    \n    }\n\n    getEnabledRadios(){\n        var current = this.props.currentChapter\n        var enabled = []\n        var timeLeft = this.state.timeLeft\n        for (let i = 1; i <= current; i++) {\n            if(i === current && this.props.complete === false){\n                enabled.push(\n                    <Tooltip title={timeLeft + ' until chapter ' + i + ' is chosen'}>\n                        <Radio.Button \n                            style={{ marginRight: '14px' }}\n                            value={i - 1} \n                            description={timeLeft}\n                        >\n                            <Icon style={{ marginRight: '7px' }} type=\"hourglass\" />\n                            {\"Chapter \" + i}\n                        </Radio.Button>\n                    </Tooltip>\n                )\n            }else{\n                enabled.push(\n                    <Radio.Button  \n                        style={{ marginRight: '14px' }}\n                        value={i - 1}\n                    >\n                        <Icon style={{ marginRight: '7px' }} type=\"check\" />\n                        {\"Chapter \" + i}\n                    </Radio.Button>\n                )\n            }\n        }\n        return enabled\n    }\n\n    getDisabledRadios(){\n        var current = this.props.currentChapter\n        var numberOfChapters = this.props.numberOfChapters\n        var disabled = []\n\n        for (let i = current + 1; i <= numberOfChapters; i++) {\n            disabled.push(\n                <Radio.Button \n                    value={i - 1}\n                    style={{ opacity: 0.3, marginRight: '14px' }} \n                    disabled={true} \n                >\n                    Chapter {i}\n                </Radio.Button>\n            )\n        }\n        return disabled\n    }\n\n    onChange = e => {\n        this.setState({ selectedChapter: e.target.value });\n    };\n\n    renderChapterRadios(){\n        return(\n            <div>\n                <Radio.Group \n                    defaultValue={this.props.currentChapter - 1}\n                    buttonStyle=\"solid\"\n                    onChange={this.onChange}\n                >\n                    {this.getEnabledRadios()}\n                    {this.getDisabledRadios()}\n                </Radio.Group>\n            </div>\n        )\n    }\n\n    updateCommentSort(value){\n        this.setState({\n            sort: value,\n            sortOrder: 'desc'\n        })\n    }\n\n    updateCommentSortOrder(order){\n        this.setState({\n            sortOrder: order\n        })\n    }\n\n    getSubmissions(uid, submissions){\n        this.setState({\n            uid: uid,\n            submissions: submissions\n        })\n    }\n\n    getTopSubmission(){\n        var submissions = this.state.submissions\n        var equalAmountOfLikes = []\n        // Sort submissions by like count\n        submissions.sort(function(a, b){\n            return b.likeCount - a.likeCount\n        })\n\n        if(submissions.length > 0 && this.state.submissionsLoaded){\n            // If top likes are equal, push to array\n            if(submissions.length > 1){\n                for (let i = 0; i < submissions.length - 1; i++) {\n                    if(submissions[i].likeCount === submissions[i+1].likeCount){\n                        equalAmountOfLikes.push(submissions[i])\n                        equalAmountOfLikes.push(submissions[i+1])\n                    }else{\n                        break\n                    }\n                }\n            }\n            // If there is equal likes, sort by newest submission, if not return top liked\n            if(equalAmountOfLikes.length > 0){\n                equalAmountOfLikes.sort(function(a,b){\n                    return b.time.toDate() - a.time.toDate()\n                })\n                this.endSubmissionProcess(equalAmountOfLikes[0])\n            }else{\n                this.endSubmissionProcess(submissions[0])\n            }\n        }else{\n            getFirestore().collection('stories').doc(this.props.id).delete()\n        }\n\n    }\n\n    openSubmitPanel(){\n        this.setState({\n            panelOpen: !this.state.panelOpen\n        })\n    }\n\n    closeSubmitPanel(){\n        this.setState({\n            panelOpen: false\n        })\n    }\n\n    hasUserSubmitted(){\n        var submissions = this.state.submissions\n        if(this.props.auth.isEmpty){\n           return null \n        }else{\n            if(submissions.length > 0){\n                for (let i = 0; i < submissions.length; i++) {\n                    if(submissions[i].author === this.props.auth.displayName && submissions[i].chapter === this.props.currentChapter){\n                        this.setState({\n                            userSubmitted: true,\n                            panelOpen: false\n                        })\n                        break\n                    }else{\n                        this.setState({\n                            userSubmitted: false,\n                            panelOpen: true\n                        })\n                    }\n                }\n            }else{\n                this.setState({\n                    userSubmitted: false,\n                    panelOpen: true\n                })\n            }\n        }\n    }\n\n    renderSubmitHeader(){\n        if(this.state.panelOpen){\n            return(\n                <SubmitChapter\n                    id={this.props.id}\n                    chapter={this.props.currentChapter}\n                    closePanel={this.closeSubmitPanel}\n                />\n            )\n        }\n    }\n\n    like(){\n        if (this.props.auth.isEmpty === false) {\n            if(this.state.userLiked === false){\n                this.setState({\n                    userLiked: true,\n                    amountOfLikes: this.state.amountOfLikes + 1\n                })\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayUnion(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(1)\n                })\n            }else{\n                this.setState({\n                    userLiked: false,\n                    amountOfLikes: this.state.amountOfLikes - 1\n                })\n                // Delete user from posts 'likes' collection\n                getFirestore().collection('stories').doc(this.props.id).update({\n                    likes: firebase.firestore.FieldValue.arrayRemove(\n                        this.props.auth.displayName\n                    ),\n                    likeCount: firebase.firestore.FieldValue.increment(-1)\n                })\n            }\n        }else{\n            message.warning('Please login or sign up to like prompts')\n        } \n    }\n\n    userLiked(){\n        const likes = this.props.likes\n        for (let i = 0; i < likes.length; i++) {\n            if(likes[i] === this.props.auth.displayName){\n                this.setState({\n                    userLiked: true\n                })\n                break\n            }else{\n                this.setState({\n                    userLiked: false\n                })\n            }\n        }\n    }\n\n    renderHeart(){\n        if(this.state.userLiked){\n            return(\n                <Icon \n                    type=\"heart\"\n                    theme=\"filled\"\n                    size=\"large\"\n                    key=\"heart\" \n                    style={{ color:'#ff7a45' }}\n                />\n            )\n        }else{\n            return(\n                <Icon \n                    type=\"heart\" \n                    key=\"heart\" \n                    style={{ color:'rgba(255, 255, 255, 0.4)' }}\n                />\n            )\n        }\n    }\n\n    \n    timeLeft(){\n        var current = this.props.currentChapter\n        var created = this.props.createdAt.toDate()\n        var diffMins\n        var now = new Date()\n        var chapter2 = new Date(created.getTime() + 2880*60000);\n        var chapter3 = new Date(chapter2.getTime() + 2880*60000);\n        var chapter4 = new Date(chapter3.getTime() + 2880*60000);\n        var final = new Date(chapter4.getTime() + 2880*60000);\n\n        switch(current) {\n            case 1:\n                diffMins = (chapter2 - now) / 60000;\n                break;\n            case 2:\n                diffMins = (chapter3 - now) / 60000;\n                break;\n            case 3:\n                diffMins = (chapter4 - now) / 60000;\n                break;\n            case 4:\n                diffMins = (final - now) / 60000;\n                break;    \n            default:\n                break;\n        }\n\n        if(diffMins < 0){\n            if(this.props.complete === false){\n                this.getTopSubmission()\n            }else{\n                this.setState({\n                    timeLeft: null\n                })\n            }\n        }else if(diffMins > 60){\n            this.setState({\n                timeLeft: Math.round(diffMins / 60) + 'hrs left'\n            })\n        }else if(diffMins > 0){\n            this.setState({\n                timeLeft: Math.round(diffMins) + 'min left'\n            })\n        }\n\n    }\n\n    endSubmissionProcess(topSubmission){\n        var now = new Date()\n        // If story is not on last chapter do following\n        if(this.props.currentChapter !== this.props.numberOfChapters){\n            getFirestore().collection('stories').doc(this.props.id).update({\n                currentChapter: this.props.currentChapter + 1,\n                selectedChapters: firebase.firestore.FieldValue.arrayUnion(\n                    topSubmission\n                )\n            })\n            getFirestore().collection('notifications').doc().set({\n                title: this.props.title,\n                notification: 'is now on chapter ' + (this.props.currentChapter + 1),\n                type: 'chapter',\n                id: this.props.id,\n                time: now.toString(),\n                date: now\n            })\n        }else{\n            getFirestore().collection('stories').doc(this.props.id).update({\n                complete: true,\n                selectedChapters: firebase.firestore.FieldValue.arrayUnion(\n                    topSubmission\n                )\n            })\n            getFirestore().collection('notifications').doc().set({\n                title: this.props.title,\n                notification: 'has been completed',\n                type: 'complete',\n                id: this.props.id,\n                time: now.toString(),\n                date: now\n            })\n        }\n    }\n\n    next(){\n        this.setState({\n            selectedChapter: this.state.selectedChapter + 1\n        })\n    }\n\n    prev(){\n        this.setState({\n            selectedChapter: this.state.selectedChapter - 1\n        })\n    }\n\n    renderButtons(){\n        var selected = this.state.selectedChapter + 1\n        var chapters = this.props.numberOfChapters\n        if(selected < chapters){\n            if(selected > 1){\n                return(\n                    <div>\n                        <Button style={{ marginRight: '7px' }} onClick={this.prev}>Prev</Button>\n                        <Button onClick={this.next}>Next</Button>\n                    </div>\n                )\n            }else{\n                return(\n                    <div>\n                        <Button onClick={this.next}>Next</Button>\n                    </div>\n                )\n            }\n        }else{\n            return(\n                <div>\n                    <Button onClick={this.prev}>Prev</Button>\n                </div>\n            )\n        }\n    }\n\n    renderModalButtons(){\n        return(\n            <div className=\"modal-buttons\">\n                <Button \n                    type=\"link\" \n                    onClick={this.like} \n                >\n                    <span style={{ display: 'flex', alignItems: 'center' }}>\n                        {this.renderHeart()}\n                        <span id=\"likes\">\n                            {this.state.amountOfLikes}\n                        </span>\n                    </span>\n                </Button>\n                <Tooltip title={this.props.author}>\n                    <Button type=\"link\">\n                        <NavLink to={{\n                            pathname: \"/user/\" + this.props.author\n                        }}>\n                            <span style={{ display: 'flex', alignItems: 'center' }}>\n                                <Icon type=\"user\" key=\"user\" />\n                            </span>\n                        </NavLink>\n                    </Button>\n                </Tooltip>\n                <ReportModal\n                    title={this.props.title} \n                    type=\"story\"\n                    id={this.props.id}\n                    component=\"modal\"\n                />\n                <CopyToClipboard text={window.location.href}\n                    onCopy={() => message.success('Link copied to clipboard')}\n                >\n                    <Button type=\"link\">\n                        <span style={{ display: 'flex', alignItems: 'center' }}>\n                            <Icon type=\"share-alt\"/>\n                        </span>\n                    </Button>\n                </CopyToClipboard>\n            </div>\n        )\n    }\n\n    renderSubmitButton(){\n        return(\n            this.props.auth.isEmpty ? \n                <Button\n                    onClick={function(){ message.error('Please login to submit chapters')}}\n                    style={{ \n                        paddingBottom: '30px',\n                        paddingRight: '10px',\n                        paddingLeft: '10px',\n                        paddingTop: '10px',\n                        marginRight: '14px'\n                    }} \n                    type=\"primary\"\n                >\n                    <Icon type=\"plus\"/> Submit Chapter {this.props.currentChapter}</Button>    \n                :\n                <Button \n                    onClick={this.openSubmitPanel} \n                    style={{ \n                        paddingBottom: '30px',\n                        paddingRight: '10px',\n                        paddingLeft: '10px',\n                        paddingTop: '10px', \n                        marginRight: '28px'\n                    }} \n                    type={this.state.panelOpen ? 'dashed' : 'primary'}\n                    disabled={this.state.userSubmitted}\n                >\n                    {this.state.userSubmitted ? \n                        <Icon type=\"check\"/> : \n                    this.state.panelOpen ? \n                        <Icon type=\"minus\"/> : \n                        <Icon type=\"plus\"/>\n                    }\n                    {this.state.userSubmitted ?\n                        'Chapter Submitted':\n                        'Submit Chapter ' + this.props.currentChapter     \n                    }\n                </Button>\n        )\n    }\n\n    render() { \n        return (\n            <div style={{ padding: '48px', backgroundColor: '#0E1314' }}>\n                <Row type=\"flex\" align=\"middle\">\n                    <Col>\n                        <Row type=\"flex\" align=\"middle\">\n                            <Col>\n                                <h1 style={{ margin: 0 }}>{this.props.title}</h1>\n                                <p style={{ margin: 0, opacity: 0.5 }}>created by \n                                    <NavLink to={{\n                                        pathname: \"/user/\" + this.props.author\n                                    }}>\n                                        <b style={{ color: 'white', opacity: 0.9 }}> {this.props.author}</b>\n                                    </NavLink>\n                                </p>\n                            </Col>\n                        </Row>\n                    </Col>\n                </Row>\n                <Divider/>\n                <Row style={{ marginTop: '24px'}} type=\"flex\" align=\"middle\">\n                    <Col>\n                        <p>{this.props.prompt}</p>\n                    </Col>\n                </Row>\n                <Row style={{ marginTop: '24px'}} type=\"flex\" align=\"middle\">\n                    <Col>\n                        {this.renderSubmitButton()}\n                    </Col>\n                    <Col>\n                        {this.renderModalButtons()}\n                    </Col>\n                </Row>\n                <Row>\n                    {this.renderSubmitHeader()}\n                </Row>\n                <Row style={{ marginTop: '48px'}}>\n                    <Col>\n                        {this.renderChapterRadios()}\n                    </Col>\n                </Row>\n                <Row style={{ marginTop: '24px'}}>\n                    {this.getComments()}\n                </Row>\n                <Row>\n                    {this.props.complete ? \n                        <div style={{ backgroundColor: '#111717', padding: '24px' }}>\n                            {this.renderButtons()}\n                        </div> \n                        : \n                        null\n                    }\n                </Row>\n            </div>\n    );\n  }\n}\n\nexport default StoryModalContent","import React, { Component } from 'react'\nimport StoryModalContent from './StoryModalContent'\nimport { Modal } from 'antd';\nimport { connect } from 'react-redux'\nimport { getFirestore } from 'redux-firestore'\nimport '../../App.css'\n\nclass StoryModal extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            visible: true,\n            loaded: false,\n            error: false\n        }\n        this.handleCancel = this.handleCancel.bind(this)\n        this.showModal = this.showModal.bind(this)\n        this.goBack = this.goBack.bind(this);\n    }\n\n    componentDidMount(){\n\n        var that = this;\n        var rawPath = window.location.pathname.split('/')\n        var storyId = rawPath.pop()\n\n        getFirestore().collection('stories').doc(storyId).get()\n        .then(function(doc){\n            if(doc.data() !== undefined){\n                that.setState({\n                    data: doc.data()\n                })\n            }else{\n                that.setState({\n                    error: true\n                })\n            }\n        }).catch(function(error){\n            that.setState({\n                error: true\n            })\n        })\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(prevState.data !== this.state.data){\n            this.setState({\n                loaded: true\n            })\n        }    \n    }\n     \n    goBack(){\n        // if(document.referrer.substring(0,7) == 'cowrite'){\n        //     this.props.history.goBack();\n        // }else{\n        //     window.location.href = 'cowrite.io/stories/category/' + this.state.data.genre;\n        // }\n        this.props.history.goBack();\n    }     \n\n    showModal(){\n        this.setState({\n            visible: true\n        })\n    }\n\n    handleCancel(){\n        this.props.history.goBack();\n    }\n    \n    render() {\n        if(this.state.loaded){\n\n            var data = this.state.data\n            var rawPath = window.location.pathname.split('/')\n            var storyId = rawPath.pop()\n\n            return (\n                <Modal\n                    visible={this.state.visible}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    style={{ top: 0, padding: 0 }}\n                    className={\"story-modal\"}\n                >\n                    <StoryModalContent\n                        id = {storyId}\n                        auth = {this.props.auth}\n                        title = {data.title}\n                        author = {data.author}\n                        authorPic = {data.authorPic}\n                        genre = {data.genre}\n                        currentChapter = {data.currentChapter}\n                        chapters = {data.chapters}\n                        prompt = {data.prompt}\n                        createdAt = {data.createdAt}\n                        chapter2 = {data.chapter2}\n                        chapter3 = {data.chapter3}\n                        chapter4 = {data.chapter4}\n                        likes = {data.likes}\n                        numberOfChapters = {data.numberOfChapters}\n                        selectedChapters = {data.selectedChapters}\n                        complete= {data.complete}\n                    />      \n                </Modal>\n            );\n        }else{\n            return(\n                <Modal\n                    visible={true}\n                    onCancel={this.handleCancel}\n                    footer={null}\n                    style={{ display: 'flex', textAlign: 'center'}}\n                >\n                    {this.state.error ?\n                        <div style={{ padding: '48px' }}>\n                            <h1>Story not found.</h1>\n                            <small>* Stories that receive no submissions are automatically deleted.</small>\n                        </div>\n                    : \n                        null\n                    }\n                </Modal>\n            )\n        }\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        auth: state.firebase.auth\n    }\n}\n\n\nexport default connect(mapStateToProps)(StoryModal);","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport Home from './Components/Layout/Home'\nimport Nav from './Components/Layout/Nav'\nimport StoryModal from './Components/Posts/StoryModal'\nimport { BackTop, Layout } from 'antd';\nimport './App.css'\n\nconst App = () => (\n    <Router>\n        <Layout>\n        <div>\n            <Nav/>\n            <BackTop/>\n            {/* Redirect user to prompts during inital load */}\n            <Route exact path=\"/\" render={() => (\n                <Redirect to=\"/prompts/all\"/>\n            )}/>\n            <Route path=\"/prompts/all\" component={Home}/>\n            <Route path=\"/prompts/comedy\" component={Home}/>\n            <Route path=\"/prompts/horror\" component={Home}/>\n            <Route path=\"/prompts/fantasy\" component={Home}/>\n            <Route path=\"/prompts/scifi\" component={Home}/>\n            <Route path=\"/prompts/other\" component={Home}/>\n\n            <Route path=\"/stories/all\" component={Home}/>\n            <Route path=\"/stories/complete\" component={Home}/>\n            <Route path=\"/stories/comedy\" component={Home}/>\n            <Route path=\"/stories/horror\" component={Home}/>\n            <Route path=\"/stories/fantasy\" component={Home}/>\n            <Route path=\"/stories/scifi\" component={Home}/>\n            <Route path=\"/stories/other\" component={Home}/>\n            \n            <Route path=\"/user/:id\" component={Home}/>\n            <Route path=\"/story/:id\" component={StoryModal}/>\n        </div>\n        </Layout>\n    </Router>\n)\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const initState = {\n    authError: null\n}\nconst authReducer = (state = initState, action) => {\n    switch(action.type){\n        case 'LOGIN_ERROR':\n            return {\n                ...state,\n                authError: 'Login failed'\n            }\n            \n        case 'LOGIN_SUCCESS':\n            return {\n                ...state,\n                authError: null\n            }\n        \n        case 'SIGNOUT_SUCCESS':\n            return state\n\n        case 'SIGNUP_SUCCESS':\n            return {\n                ...state,\n                authError: null\n            }\n        case 'SIGNUP_ERROR':\n                return {\n                    ...state,\n                    authError: action.err.message\n                }\n        case 'NAME_TAKEN':\n                return {\n                    ...state,\n                    authError: 'Name is already taken'\n                }\n        default:\n            return state;\n    }\n}\n\nexport default authReducer","const initState = {\n    posts: [\n        {id: 1, title: 'Greek God Revenge', content: 'Youre an ancient Greek man coming home from 4 months of war to find your wife 3 months pregnant. Now youve embarked on a solemn quest: to punch Zeus in the face.'},\n        {id: 2, title: 'Where Is My Super Suit', content: 'The Suit is powerfull. A mech for some, body armor for others, always unique to each person who wore it. Those who wear it, hear the words \"not original user, booting basic mode\" As a joke, your sergeant gives you The Suit and the first thing you hear is: \"User detected: Welcome back, Commander\"'},\n        {id: 3, title: 'School Reunion', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'},\n        {id: 4, title: 'Seth The Killer', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'},\n        {id: 5, title: 'School Reunion', content: 'The nightmare has come true; youve woken up back in sixth grade with your memories and knowledge of everything that happened since then intact. You start staring at your classmates around you, aware of how they end up. Your teacher asks you whats wrong as you start weeping.'}\n    ]\n}\nconst postReducer = (state = initState, action) => {\n    switch(action.type){\n        case 'CREATE_POST':\n            return state\n        case 'CREATE_POST_ERR':\n            return state\n        default: \n            return state\n    }\n}\n\nexport default postReducer","import authReducer from './authReducer'\nimport postReducer from './postReducer'\nimport { combineReducers } from 'redux'\nimport { firestoreReducer } from 'redux-firestore'\nimport { firebaseReducer } from 'react-redux-firebase'\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    post: postReducer,\n    firestore: firestoreReducer,\n    firebase: firebaseReducer\n});\n\nexport default rootReducer","import * as firebase from 'firebase/app';\nimport 'firebase/analytics';\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\n// Your web app's Firebase configuration\nvar firebaseConfig = {\n    apiKey: \"AIzaSyC-1qE_pSDh3kKMmLI3fA4iErj4qGuZrgw\",\n    authDomain: \"writingrelay.firebaseapp.com\",\n    databaseURL: \"https://writingrelay.firebaseio.com\",\n    projectId: \"writingrelay\",\n    storageBucket: \"writingrelay.appspot.com\",\n    messagingSenderId: \"549963888326\",\n    appId: \"1:549963888326:web:65281ab754acef09\",\n    measurementId: 'G-6WJBXYLBZY'\n};\n// Initialize Firebase\nvar fb = firebase.initializeApp(firebaseConfig);\nfirebase.analytics(fb);\nfirebase.firestore().settings({ timestampsInSnapshots: true })\n\nexport default firebase","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport rootReducer from './Store/Reducers/rootReducer'\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { reduxFirestore, getFirestore } from 'redux-firestore'\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase'\nimport fbConfig from './Config/fbConfig'\n\nconst store = createStore(rootReducer, \n    compose(\n        applyMiddleware(thunk.withExtraArgument({ getFirestore, getFirebase })),\n        reduxFirestore(fbConfig),\n        reactReduxFirebase(fbConfig, {attachAuthIsReady: true})\n    )\n);\nstore.firebaseAuthIsReady.then(() => {\n    ReactDOM.render(\n        <Provider store={store}>\n            <App />\n        </Provider>, \n        document.getElementById('root'));\n        serviceWorker.unregister();\n})\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}